/**/﻿_jsload&&_jsload('glcommon', 'function aU(e,i){this.origin=e||null;this.direction=i||null}D.extend(aU.prototype,{set:function(e,i){this.origin=e;this.direction=i}});cc.Ray=aU;function eR(hV,e,h1){h1=h1||{};var i=h1.filter||hV.LINEAR;var hZ=h1.format||hV.RGBA;var hY=h1.type||hV.UNSIGNED_BYTE;var T=h1.wrap||hV.CLAMP_TO_EDGE;var hU=h1.mipmap||false;var hW=h1.testError||false;var hT=h1.unpackAlpha||false;var h0;if(typeof h1.flipY!=="boolean"){h0=true}else{h0=h1.flipY}var hX=hV.createTexture();hV.bindTexture(hV.TEXTURE_2D,hX);hV.pixelStorei(hV.UNPACK_FLIP_Y_WEBGL,h0);if(hT){hV.pixelStorei(hV.UNPACK_PREMULTIPLY_ALPHA_WEBGL,true)}hV.texParameteri(hV.TEXTURE_2D,hV.TEXTURE_WRAP_S,T);hV.texParameteri(hV.TEXTURE_2D,hV.TEXTURE_WRAP_T,T);hV.texParameteri(hV.TEXTURE_2D,hV.TEXTURE_MAG_FILTER,i);hV.texParameteri(hV.TEXTURE_2D,hV.TEXTURE_MIN_FILTER,hU?hV.LINEAR_MIPMAP_LINEAR:i);if(e===null){hV.texImage2D(hV.TEXTURE_2D,0,hZ,h1.width,h1.height,0,hZ,hY,null)}else{hV.texImage2D(hV.TEXTURE_2D,0,hZ,hZ,hY,e)}if(hU){hV.generateMipmap(hV.TEXTURE_2D)}if(hW===true){if(hV.getError()===hV.INVALID_VALUE){return null}}return hX}cc.utils={createTexture:eR};function bP(i,e){this._gl=i;e=e||{};this._ids={};this._count=0;this._width=e.width||4096;this._height=e.height||4096;this._name=e.name||"";this._textureType=e.textureType||i.UNSIGNED_BYTE;this._unpackAlpha=e.unpackAlpha||false;this._texture=null;this._currentOffsetY=0;this._currentX=0;this._nextX=0;this._usage=0;this.guid=bp.getGUID("texture_atlas_");this.isRendering=false;this._textTextureCache=[];if(e.init===true){this.initTexture()}}D.extend(bP.prototype,{initTexture:function(){var e=this._gl;this._texture=cc.utils.createTexture(e,null,{type:this._textureType,width:this._width,height:this._height,unpackAlpha:this._unpackAlpha})},getTexture:function(){if(!this._texture){this.initTexture()}return this._texture},getSize:function(){return new ea(this._width,this._height)},addTexture:function(i,e){if(i.id&&this._ids[i.id]){return this._ids[i.id]}if(!this._texture){this.initTexture()}e=e||i.height;var hV=this._height-i.height-this._currentOffsetY;if(hV<0){this._currentX=this._nextX;this._currentOffsetY=0;hV=this._height-i.height;if(this._currentX>=this._width){return null}}if(i.width>(this._nextX-this._currentX)){this._nextX=this._currentX+i.width;if(this._nextX>this._width){return null}}var hU=this._gl;hU.bindTexture(hU.TEXTURE_2D,this._texture);hU.pixelStorei(hU.UNPACK_FLIP_Y_WEBGL,true);hU.texSubImage2D(hU.TEXTURE_2D,0,this._currentX,hV,hU.RGBA,this._textureType,i);var hT=this._currentOffsetY;this._currentOffsetY+=e;this._calcUsage();this._count++;var T={width:this._currentX/this._width,height:(this._height-hT-e)/this._height};this._ids[i.id]=T;return T},_calcUsage:function(){this._usage=(this._currentX*this._height+(this._nextX-this._currentX)*this._currentOffsetY)/(this._height*this._width)},getUsage:function(){return this._usage},clear:function(){this._currentOffsetY=0;this._currentX=0;this._nextX=0;this._count=0;this._usage=0;this._ids={}}});cc.TextureAtlas=bP;function dq(i,e){this._gl=i;e=e||{};this._textureWidth=e.width||4096;this._textureHeight=e.height||4096;this._name=e.name||"";this._unpackAlpha=e.unpackAlpha||false;this._textureCollection=[]}D.extend(dq.prototype,{getEmptyTexture:function(){var e=null;if(this._textureCollection.length<3){e=new bP(this._gl,{width:this._textureWidth,height:this._textureHeight,name:this._name,unpackAlpha:this._unpackAlpha});this._textureCollection.push(e)}else{e=this._textureCollection.shift();while(e.inUse===true){this._textureCollection.push(e);e=this._textureCollection.shift()}e.clear();this._textureCollection.push(e)}e.inUse=true;return e},free:function(e){e.inUse=false}});cc.TextTextureManager=dq;var gW={instances:{},get:function(e,i){if(!i){throw"必须指定id"}if(!gW.instances[i]){gW.instances[i]=new fW(e)}return gW.instances[i]}};function fW(e){this._gl=e;this._attributes=new Uint8Array(16);this._enabledAttributes=new Uint8Array(16);this._capabilities={depthTest:[-1,this._gl.DEPTH_TEST],blend:[-1,this._gl.BLEND],cullFace:[-1,this._gl.CULL_FACE],stencilTest:[-1,this._gl.STENCIL_TEST],scissorTest:[-1,this._gl.SCISSOR_TEST]};this._faceCulling=-1;this._depthMask=-1;this._blendFunc=[-1,-1,-1,-1];this._colorMask=[-1,-1,-1,-1];this._depthFunc=-1;this._frontFace=-1;this._activeTexture=-1;this._clearColor=[0,0,0,0];this._fail=-1;this._zfail=-1;this._zpass=-1}D.extend(fW.prototype,{initAttribute:function(){for(var T=0,e=this._attributes.length;T<e;T++){this._attributes[T]=0}},enableAttribute:function(e){this._attributes[e]=1;if(this._enabledAttributes[e]===0){this._gl.enableVertexAttribArray(e);this._enabledAttributes[e]=1}},disableUnusedAttributes:function(){for(var T=0,e=this._enabledAttributes.length;T<e;T++){if(this._enabledAttributes[T]!==this._attributes[T]){this._gl.disableVertexAttribArray(T);this._enabledAttributes[T]=0}}},enableCap:function(e){if(this._capabilities[e][0]!==true){this._gl.enable(this._capabilities[e][1]);this._capabilities[e][0]=true}},disableCap:function(e){if(this._capabilities[e][0]!==false){this._gl.disable(this._capabilities[e][1]);this._capabilities[e][0]=false}},cullFace:function(e){if(this._faceCulling!==e){this._gl.cullFace(e);this._faceCulling=e}},blendFunc:function(){var i=arguments;var e=this._blendFunc;if(i.length===2){if(i[0]!==e[0]||i[1]!==e[1]||i[0]!==e[2]||i[1]!==e[3]){e[0]=i[0];e[1]=i[1];e[2]=i[0];e[3]=i[1];this._gl.blendFunc.apply(this._gl,arguments)}}else{if(i.length===4){if(i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]){e[0]=i[0];e[1]=i[1];e[2]=i[2];e[3]=i[3];this._gl.blendFuncSeparate.apply(this._gl,arguments)}}}},colorMask:function(){var e=arguments;var hT=true;for(var T=0;T<e.length;T++){if(this._colorMask[T]!==e[T]){this._colorMask[T]=e[T];hT=false}}if(!hT){this._gl.colorMask.apply(this._gl,arguments)}},depthFunc:function(e){if(this._depthFunc!==e){this._depthFunc=e;this._gl.depthFunc(e)}},depthMask:function(e){if(this._depthMask!==e){this._gl.depthMask(e);this._depthMask=e}},frontFace:function(e){if(this._frontFace!==e){this._frontFace=e;this._gl.frontFace(e)}},activeTexture:function(e){if(this._activeTexture!==e){this._activeTexture=e;this._gl.activeTexture(e)}},clearColor:function(e){if(!e||e.length<4){return}if(this._clearColor[0]!==e[0]||this._clearColor[1]!==e[1]||this._clearColor[2]!==e[2]||this._clearColor[3]!==e[3]){this._clearColor=e.slice(0,4);this._gl.clearColor(e[0]/255,e[1]/255,e[2]/255,e[3]/255)}},stencilOp:function(i,T,e){if(this._fail!==i||this._zfail!==T||this._zpass!==e){this._fail=i;this._zfail=T;this._zpass=e;this._gl.stencilOp(i,T,e)}}});cc.WebGLState=gW;');
﻿_jsload&&_jsload('marker', 'D.extend(cW.prototype,{initialize:function(e){this.map=e;this._addDom();this._bind();if(this.domElement){this.domElement.hashCode=this.hashCode}D.BaseClass.call(this,this.hashCode);if(!this._visible){D.hide(this.domElement)}this.dispatchEvent(new bc("ondomready"));return this.domElement},_bind:function(){if(!this.domElement){return}var e=this;var T=this.map;function i(hW,hV){var hU=hW.srcElement||hW.target;var hT=hW.clientX||hW.pageX;var hY=hW.clientY||hW.pageY;if(hW&&hV&&hT&&hY&&hU){var hX=D.Dom.getOffset(T.container);hV.pixel=new ek(hT-hX.left,hY-hX.top);hV.point=T.pixelToPointIn(hV.pixel);hV.latLng=T.pixelToPoint(hV.pixel);return hV}else{return hV}}D.on(this.domElement,"mouseover",function(hT){if(!e._dragstarted){e.dispatchEvent(i(hT,new bc("onmouseover").inherit(hT)))}});D.on(this.domElement,"mouseout",function(hT){if(!e._dragstarted){e.dispatchEvent(i(hT,new bc("onmouseout").inherit(hT)))}});if(f6()){D.on(this.domElement,"touchstart",function(hT){e._bind._touchStartPos=new ek(hT.changedTouches[0].clientX,hT.changedTouches[0].clientY)});D.on(this.domElement,"touchend",function(hV){var hU=new Date().getTime();var hT=new ek(hV.changedTouches[0].clientX,hV.changedTouches[0].clientY);if(Math.abs(hT.x-e._bind._touchStartPos.x)>10||Math.abs(hT.y-e._bind._touchStartPos.y)>10){e._bind._touchStartPos=null;return}e.dispatchEvent(i(hV,new bc("onclick").inherit(hV)));if(e._config&&typeof e._config.click==="function"){e._config.click()}if(e.map&&hU-e._dblclickTime<e.map.config.clickInterval){e.dispatchEvent(i(hV,new bc("ondblclick").inherit(hV)))}e._dblclickTime=hU})}D.on(this.domElement,"click",function(hU){if(window.TouchEvent&&f6()){return}var hT=hU.srcElement||hU.target;while(hT){if(hT===e.domElement){if(e.toString()!=="Marker"||e.toString()==="Marker"&&(!e._lastPt||e._lastPt&&e.getPoint().equals(e._lastPt))){if(e.addStat&&typeof e.addStat==="function"){e.addStat()}e.dispatchEvent(i(hU,new bc("onclick").inherit(hU)))}break}else{if(e.map&&e.map.infoWindowDoms&&hT===e.map.infoWindowDoms.popDom){break}}hT=hT.parentNode}});D.on(this.domElement,"mousedown",function(hT){if(e.toString()==="Marker"){e._lastPt=e.getPoint()}e.dispatchEvent(i(hT,new bc("onmousedown").inherit(hT)))});D.on(this.domElement,"mouseup",function(hT){e.dispatchEvent(i(hT,new bc("onmouseup").inherit(hT)))});D.on(this.domElement,"dblclick",function(hU){e.dispatchEvent(i(hU,new bc("ondblclick").inherit(hU)));var hT=hU.target||hU.srcElement||{};if(hT.tagName!=="circle"&&hT.tagName!=="oval"){dc(hU)}});D.on(this.domElement,"contextmenu",function(hT){e.dispatchEvent(i(hT,new bc("onrightclick").inherit(hT)))})},hide:function(){if(this._visible===false){return false}this._visible=false;D.hide(this.domElement);if(this.infoWindow&&this.infoWindow.overlay&&this.infoWindow.overlay===this){this.closeInfoWindow();this.closeSimpleInfoWindow()}return true},show:function(){if(this._visible===true){return false}this._visible=true;if(this._visibleInternal){D.show(this.domElement);return true}else{return false}},setStyle:function(e){if(!this.domElement){return}if(this.siblingElement){this.siblingElement.style.cssText=this.siblingElement.style.cssText+";"+e}else{this.domElement.style.cssText=this.domElement.style.cssText+";"+e}},getPoint:function(T,hT){if(!T){return this.point}else{var e=hT?hT.width:0;var hU=hT?hT.height:0;if(this.map){var i=this.map.pointToPixelIn(this.point);if(this._config&&this._config.offset){i.x=i.x+this._config.offset.width+e;i.y=i.y+this._config.offset.height+hU}else{i.x=i.x+e;i.y=i.y+hU}return this.map.pixelToPointIn(i)}}},setZIndex:function(e){var i=this;i.zIndex=e;i._updateDomZIndex()},_updateDomZIndex:function(){var i=this;var e;if(typeof i.zIndex!=="undefined"){e=i.zIndex}else{e=0;if(i.map&&i.getPoint()){var T=i.getPoint()?i.getPoint().lat:0;e=bm.getZIndex(T,i.map.config.coordType)+(i._config.baseZIndex||0)}}if(i.domElement){i.domElement.style.zIndex=e}},isVisible:function(){if(!this.map){return false}if(this.map._renderType!=="webgl"&&!this.domElement){return false}return !!this._visible},showInternal:function(){if(this._visibleInternal===true){return false}if(this.collisionDetectionFailed===true){return false}this._visibleInternal=true;if(this._visible===true){D.show(this.domElement)}return true},hideInternal:function(e){if(this._visibleInternal===false){return false}this._hideInternalReason=e;this._visibleInternal=false;D.hide(this.domElement);if(this.infoWindow&&this.infoWindow.overlay&&this.infoWindow.overlay===this){this.closeInfoWindow();this.closeSimpleInfoWindow()}return true}});ds.TOP_ZINDEX=bm.getZIndex(-90)+1000000;ds.DRAG_ZINDEX=ds.TOP_ZINDEX+1000000;window.BMAP_ANIMATION_RAISEUP=3;window.BMAP_ANIMATION_DROPDOWN=4;ds._addDragCrossImg=function(T,e){if(!ds._dragCrossImg){ds._dragCrossImg=U("img",{src:e4.imgPath+"drag_cross.png",width:13,height:9});ds._dragCrossImg.style.position="absolute";if(D.Browser.ie===6){delete ds._dragCrossImg;var hT=ds._dragCrossImg=U("div");var i=hT.style;i.position="absolute";i.width="13px";i.height="9px";i.filter=\'progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=image,src="\'+e4.imgPath+\'drag_cross.png")\'}}var i=ds._dragCrossImg.style;i.left=T.width-6+"px";i.top=T.height-5+"px";e.appendChild(ds._dragCrossImg)};ds._removeDragCrossImg=function(){if(ds._dragCrossImg&&ds._dragCrossImg.parentNode){ds._dragCrossImg.parentNode.removeChild(ds._dragCrossImg)}};D.extend(ds.prototype,{initialize:function(e){cW.prototype.initialize.call(this,e);if(!this._visible){if(this.siblingElement){D.hide(this.siblingElement)}}this.setPoint(this.point);this.setIcon(this._config.icon,this._config.startAnimation);this.setLabel(this._config.label);this.setTitle(this._config.title);if(this._rotation!==0){this.setRotation(this._rotation)}this._initDrag();return this.domElement},_addDom:function(){var e=this.map;if(this.domElement&&this.domElement.parentNode){this.domElement.parentNode.removeChild(this.domElement);this.domElement=null}this.domElement=dJ(e.getPanes().markerMouseTarget,this._msTargetRender());if(e.getMapType()==="B_EARTH_MAP"||e._renderType==="webgl"){return}this.siblingElement=dJ(e.getPanes().markerPane,this._markerRender());this.siblingElement.hashCode=this.getHashCode()},_msTargetRender:function(){var e=[\'<div class="BMap_Marker BMap_noprint" unselectable="on" \'];e.push(this._config.title?\'title="\'+this._config.title+\'"\':\'""\');e.push(\' style="position:absolute;padding:0;margin:0;border:0;width:0;height:0;-moz-user-select:none;\');e.push(this._config.clickable?"cursor:pointer;":"");e.push("width:"+this._config.icon.size.width+"px;");e.push("height:"+this._config.icon.size.height+"px;");e.push(\'"></div>\');return e.join("")},_markerRender:function(){var e=[\'<div class="BMap_Marker" unselectable="on" \'];e.push(\'style="position:absolute;padding:0;margin:0;border:0;\');e.push(\'width:0;height:0;-moz-user-select:none"></div>\');return e.join("")},draw:function(T){if(!this.domElement){return}T=T||{};var i=this._getPixPos(T.zoom,T.center);if(i.onBack||i.outOfFrustum){this.hideInternal("out-of-view");return}this.showInternal();this.domElement.style.left=i.x+"px";this.domElement.style.top=i.y+"px";if(this.siblingElement){this.siblingElement.style.left=i.x+"px";this.siblingElement.style.top=i.y+"px"}else{if(this.map.getMapType()!=="B_EARTH_MAP"&&this.map._renderType!=="webgl"){this.initialize(this.map)}}if(this.infoWindow!==null&&this.infoWindow.isOpen()){this.infoWindow.setPosition(T.center,T.zoom)}},_getPixPos:function(T,e){var hU=this._config.offset||new ea(0,0);var hT=this._config.icon.offset||new ea(0,0);var i=this.map.pointToOverlayPixelIn(this.getPoint(),{zoom:T,center:e,fixPosition:true});i.x+=hU.width-hT.width;i.y+=hU.height-hT.height;return i},_draw:function(){if(this.map){this.domElement=this.initialize(this.map)}},remove:function(){if(this.siblingElement&&this.siblingElement.parentNode){this.siblingElement.parentNode.removeChild(this.siblingElement)}if(this.infoWindow&&this.infoWindow.overlay&&this.infoWindow.overlay===this){this.closeInfoWindow();this.closeSimpleInfoWindow();this.infoWindow=null}this.siblingElement=null;this.iconDom=null;if(this._config.label){var i=this._config.label;i.setMarker(null);this.map.removeOverlay(i);this._config.label=null}cW.prototype.remove.call(this);var e=new bc("onstatus_change");e.action="remove";e.overlay=this;this.fire(e)},hide:function(){if(cW.prototype.hide.call(this)===false){return false}if(this.siblingElement){D.hide(this.siblingElement)}if(this._config.label){D.hide(this._config.label.domElement)}var e=new bc("onstatus_change");e.overlay=this;e.action="hide";this.fire(e);return true},show:function(){if(cW.prototype.show.call(this)===false){if(this._hideInternalReason==="out-of-view"){var e=new bc("onstatus_change");e.overlay=this;e.action="show";this.fire(e)}return false}this.draw();if(this.siblingElement){D.show(this.siblingElement)}if(this._config.label){D.show(this._config.label.domElement)}var e=new bc("onstatus_change");e.overlay=this;e.action="show";this.fire(e);return true},showInternal:function(){if(cW.prototype.showInternal.call(this)===false){return false}if(!this._visible){return false}if(this.siblingElement){D.show(this.siblingElement)}if(this._config.label){this._config.label.showInternal()}return true},hideInternal:function(e){if(cW.prototype.hideInternal.call(this,e)===false){return false}if(this.siblingElement){D.hide(this.siblingElement)}if(this._config.label){this._config.label.hideInternal(e)}return true},setIcon:function(hW,hU){if(!hW){return}var hX=this._config.icon.getCurrentImageUrl();var hT=hW.getCurrentImageUrl()!==hX;this._config.icon=hW;if(!this.map||!this.domElement){return}var i=this.map;if(this.iconDom&&this.siblingElement){this.siblingElement.removeChild(this.iconDom);this.iconDom=null}if(this.domElement){var hV=this.domElement.style;hV.width=hW.size.width+"px";hV.height=hW.size.height+"px";hV.transformOrigin=hW.anchor.width+"px "+hW.anchor.height+"px"}if(this.siblingElement){var T=this.iconDom=U("div",{"class":hU||""});var hY=T.style;hY.position="absolute";hY.padding=hY.margin="0";hY.width=hW.size.width+"px";hY.height=hW.size.height+"px";hY.overflow="hidden";if(hW.imageUrl){T.innerHTML=hW.getHTML()}else{if(hW.imageDom){T.appendChild(hW.imageDom);if(hW.imageSize){hW.imageDom.style.width=hW.imageSize.width+"px";hW.imageDom.style.height=hW.imageSize.height+"px"}}}T.galleryImg=false;this.siblingElement.style.transformOrigin=hW.anchor.width+"px "+hW.anchor.height+"px";this.siblingElement.appendChild(this.iconDom)}this.textureCoord=this.textureCoordGLMap=null;this.draw();var e=new bc("onstatus_change");e.overlay=this;e.action="setIcon";e.imageUrlChanged=hT;this.fire(e)},setRotation:function(i){while(i<0){i+=360}this._rotation=i%360;var e=new bc("onstatus_change");e.overlay=this;e.action="setRotation";this.fire(e);if(!this.map||!this.domElement){return}this.domElement.style.transform="rotate("+i+"deg)";if(this.siblingElement){this.siblingElement.style.transform="rotate("+i+"deg)"}},setLabel:function(e){if(!(e instanceof aO)){return}e._config.enableMassClear=this._config.enableMassClear;this._config.label=e;var i=this;if(!this._config.label._binded){this._config.label._binded=true;this._config.label.addEventListener("remove",function(){i._config.label=null})}if(!this.map){return}e.setPoint(this.point);this.map.addOverlay(e);e.setMarker(this)},_initDrag:function(){if(!this.domElement||this.domElement._binded){return}this.domElement._binded=true;var T=this.map;var hX=this;var hV=0;var hU=0;var hT=0;var hY={x:0,y:0};function hW(h0,hZ){hZ.pixel=h0.pixel;hZ.point=h0.point;hZ.latLng=h0.latLng;return hZ}function i(h1){var h0=h1.clientX;var hZ=h1.clientY;if(h1.changedTouches){h0=h1.changedTouches[0].clientX;hZ=h1.changedTouches[0].clientY}return new ek(h0,hZ)}var e=new ek(0,0);this.dragStart=function(h1){e=i(h1);if(!hX._config.enableDragging){return}hX._isDragging=true;var h0=T.pointToPixelIn(hX.point);var hZ=i(h1);hV=hZ.x-h0.x;hU=hZ.y-h0.y;hT=new Date().getTime();if(hX.map){hX.map.temp._draggingMarker=hX}D.on(document,"mousemove",hX.dragIng);D.on(document,"mouseup",hX.dragEnd);D.on(document,"touchmove",hX.dragIng);D.on(document,"touchend",hX.dragEnd);if(hX.domElement&&hX.domElement.setCapture){hX.domElement.setCapture()}};this.dragIng=function(h5){var h0=i(h5);if(h0.equals(e)){return}e=h0;if(!hX._isDragging){return}var h1=i(h5);var h2=new ek((h1.x-hV),(h1.y-hU));hY=h2;hX._draggingMovePixel=h2;if((hX._config.restrictDraggingArea&&(h2.x>15&&h2.x<hX.map.width-15)&&(h2.y>30&&h2.y<hX.map.height-15))||!hX._config.restrictDraggingArea){var hZ=hX.map.pixelToPointIn(h2);var h3=hX.map.pixelToPoint(h2);var h4={pixel:h2,point:hZ,latLng:h3};hX._panByX=hX._panByY=0;if(h2.x<=20||h2.x>=hX.map.width-20||h2.y<=50||h2.y>=hX.map.height-10){if(h2.x<=20){hX._panByX=8}else{if(h2.x>=hX.map.width-20){hX._panByX=-8}}if(h2.y<=50){hX._panByY=8}else{if(h2.y>=hX.map.height-10){hX._panByY=-8}}if(!hX._draggingMoveTimer){hX._draggingMoveTimer=setInterval(function(){T.panBy(hX._panByX,hX._panByY,{newAnimation:true});var h6=T.pixelToPointIn(hX._draggingMovePixel);hX.setPoint(h6)},30)}}else{if(hX._draggingMoveTimer){clearInterval(hX._draggingMoveTimer);hX._draggingMoveTimer=null}hX.setPoint(hZ)}if(!hX._dragstarted){hX.dispatchEvent(hW(h4,new bc("ondragstart").inherit(h5)));hX._dragstarted=true;if(hX._config.raiseOnDrag){hX.setAnimation(BMAP_ANIMATION_RAISEUP);ds._addDragCrossImg(hX._config.icon.offset,hX.siblingElement)}}hX.dispatchEvent(hW(h4,new bc("ondragging").inherit(h5)))}};this.dragEnd=function(hZ){if(hX.domElement&&hX.domElement.releaseCapture){hX.domElement.releaseCapture()}hX._isDragging=false;if(hX.map){hX.map.temp._draggingMarker=null}D.un(document,"mousemove",hX.dragIng);D.un(document,"mouseup",hX.dragEnd);D.un(document,"touchmove",hX.dragIng);D.un(document,"touchend",hX.dragEnd);hV=hU=0;if(hX._draggingMoveTimer){clearInterval(hX._draggingMoveTimer);hX._draggingMoveTimer=null}if(hY.x>2||hY.y>2){hX._dragstarted=false;hX.dispatchEvent(hW({pixel:hX.map.pointToPixelIn(hX.getPoint()),point:hX.getPoint(),latLng:eo.convertMC2LL(hX.getPoint())},new bc("ondragend").inherit(hZ)));if(hX._config.raiseOnDrag){hX.setAnimation(BMAP_ANIMATION_DROPDOWN);ds._removeDragCrossImg()}hY.x=hY.y=0}hX._updateDomZIndex()};this.delVertexMarker=function(hZ){dc(hZ);hX.dispatchEvent(hW({pixel:hX.map.pointToPixelIn(hX.getPoint()),point:hX.getPoint(),latLng:eo.convertMC2LL(hX.getPoint())},new bc("onmarkerdelvertex").inherit(hZ)))};D.on(this.domElement,"mousedown",this.dragStart);D.on(this.domElement,"touchstart",this.dragStart);D.on(this.domElement,"contextmenu",this.delVertexMarker)},setPoint:function(e){if(!e){return}this.point=this._config.point=new hu(e.lng,e.lat);this.latLng=eo.convertMC2LL(e);if(this._config.label){this._config.label.setPoint(this.point)}this.draw();this._updateDomZIndex();var i=new bc("onstatus_change");i.overlay=this;i.action="setPoint";this.fire(i)},_updateDomZIndex:function(){var i=this;var e;if(i._isDragging===true){e=ds.DRAG_ZINDEX}else{if(i._config.isTop===true){e=ds.TOP_ZINDEX+(i._addi||0)}else{if(typeof i.zIndex!=="undefined"){e=i.zIndex}else{e=0;if(i.map&&i.getPoint()){e=bm.getZIndex(i.getPoint().lat,i.map.config.coordType)+i._config.baseZIndex}}}}if(i.domElement){i.domElement.style.zIndex=e}if(i.siblingElement){i.siblingElement.style.zIndex=e}this._zIndex=e},setTop:function(T,i){this._config.isTop=!!T;if(T){this._addi=i||0}this._updateDomZIndex();var e=new bc("onstatus_change");e.overlay=this;e.action="setTop";this.fire(e)},setTitle:function(e){this._config.title=e||"";if(this.domElement){this.domElement.title=this._config.title}},setOffset:function(i){if(!i){return}this._config.offset=i;this.setPoint(this.getPoint());var e=new bc("onstatus_change");e.overlay=this;e.action="setOffset";this.fire(e)},setAnimation:function(i){var e=this;eb.load("markeranimation",function(){e._setAnimation(i)},true)},_setAnimation:function(i){if(!this.iconDom){return}this._clearAnimation(i!==null);var e=bC[i];if(!e){return}this._execJSAnimation(i)},_clearAnimation:function(i){if(i){if(this._aniObj){this._aniObj.stop();this._aniObj=null}this.iconDom.style.top=this.iconDom.style.left="0px";if(this.shadowDom){this.shadowDom.style.top=this.shadowDom.style.left="0px"}}else{if(this._aniObj){var e=this;this._aniObj.setFinishCallback(function(){e._aniObj=null})}}},_execJSAnimation:function(hV){var hX=this.iconDom.style;var e=false;var hU;if(this.shadowDom){e=true;hU=this.shadowDom.style}var T=bC[hV];var hZ=this;var hY=T.iconAnis.length,h2=T.options.duration,h1=hZ._aniObj=new p({duration:0,delay:p.INFINITE});var h0=T.iconAnis;var hT=T.shadowAnis;hX.top=h0[0].translate[1]+"px";if(e){hU.left=hT[0].translate[0]+"px";hU.top=hT[0].translate[1]+"px"}for(var hW=1;hW<hY;hW++){(function(){var h7=[h0[hW].translate[0]-h0[hW-1].translate[0],h0[hW].translate[1]-h0[hW-1].translate[1]];var h6=[h0[hW-1].translate[0],h0[hW-1].translate[1]];if(e){var h4=[hT[hW].translate[0]-hT[hW-1].translate[0],hT[hW].translate[1]-hT[hW-1].translate[1]];var h3=[hT[hW-1].translate[0],hT[hW-1].translate[1]]}var h5=co[h0[hW-1].timingFunc];var i=function(){};if(hW===hY-1){if(T.options.loop!==p.INFINITE){i=function(){hZ._aniObj=null}}else{i=function(){hZ._aniObj.start()}}}h1.add(new p({duration:(T.iconAnis[hW].percent-h0[hW-1].percent)*h2,fps:40,delay:p.INFINITE,transition:h5,render:function(h8){if(hZ.iconDom){hZ.iconDom.style.top=h6[1]+Math.round(h8*h7[1])+"px"}if(e&&hZ.shadowDom){hZ.shadowDom.style.left=h3[0]+Math.round(h8*h4[0])+"px";hZ.shadowDom.style.top=h3[1]+Math.round(h8*h4[1])+"px"}},finish:i}))})()}h1.start()},getVertexInfoForGL:function(){var T=this._config.icon.getRenderData();var e=this.point;var hU=aG(e.lng);var i=aG(e.lat);var hT=[];this._buildVertexForEachRender(hU,i,hT);return{vertex:hT,textureCoordGLMap:T.textureCoordGLMap}},_buildVertexForEachRender:function(h0,hZ,hX){var hY=this._config.icon;var hT=this._config.offset;var e=0;var hW=[];hW[0]=[-hY.offset.width+hT.width,-(hY.size.height-hY.offset.height)-hT.height];hW[1]=[hY.size.width-hY.offset.width+hT.width,-(hY.size.height-hY.offset.height)-hT.height];hW[2]=[hY.size.width-hY.offset.width+hT.width,hY.offset.height-hT.height];hW[3]=[-hY.offset.width+hT.width,hY.offset.height-hT.height];if(this._rotation!==0){for(var hU=0;hU<hW.length;hU++){var T=vec2.fromValues(hW[hU][0],hW[hU][1]);vec2.rotate(T,T,[0,0],dL(-this._rotation));hW[hU][0]=T[0];hW[hU][1]=T[1]}}while(e<6){var hV=e<3?e:(e===3?e-3:e-2);hX.push([h0[0],hZ[0],h0[1],hZ[1],hW[hV][0],hW[hV][1]]);e++}}});var hQ=hd.prototype;hQ.getHTML=function(){if(!this.imageUrl){return""}var e=[];e.push(\'<img src="\'+this.imageUrl+\'" \');if(this.srcSet){e.push(\'srcset="\'+this.srcSet+\'" \')}e.push(\'style="left:\'+(-this.imageOffset.width)+"px;");e.push("top:"+(-this.imageOffset.height)+"px;");if(this.imageSize){this.imageSize.width&&e.push("width:"+this.imageSize.width+"px;");this.imageSize.height&&e.push("height:"+this.imageSize.height+"px;")}e.push(\'position:absolute;"/>\');return e.join("")};D.extend(aO.prototype,{_addDom:function(){var i=this._config;var hT=this.content;var e=U("label",{"class":"BMapLabel",unselectable:"on"});if(i.title){e.title=i.title}var T=e.style;T.position="absolute";T.MozUserSelect="none";if(i.width===0||i.width==="auto"){T.display="inline"}else{T.width=i.width+"px";T.display="block";T.overflow="hidden"}if(!D.Browser.ie){T.cursor="inherit"}e.innerHTML=hT;this.map.getPanes().labelPane.appendChild(e);this.domElement=e;this.setStyle(this._config.styles);return e},setPoint:function(e){if(e){this.point=this._config.point=e.clone();this.draw()}},draw:function(T){if(this.domElement&&this.getPoint()){var hT=this._config.offset||new ea(0,0);T=T||{};var i=this.map.pointToOverlayPixelIn(this.getPoint(),{zoom:T.zoom,center:T.center,fixPosition:true});if(i.onBack||i.outOfFrustum){this.hideInternal("out-of-view")}else{this.showInternal();this.domElement.style.left=(i.x+hT.width)+"px";this.domElement.style.top=(i.y+hT.height)+"px";this._updateDomZIndex()}}},_draw:function(){if(this.map){if(!this.domElement){this.domElement=this.initialize(this.map)}this.draw()}},setContent:function(e){this.content=e;if(this.domElement){this.domElement.innerHTML=e}},setOpacity:function(e){if(e>=0&&e<=1){this._config.opacity=e}if(this.domElement){this.domElement.style.opacity=e}},setOffset:function(e){if(!e){return}this._config.offset=new ea(e.width,e.height);this.draw()},setStyle:function(i){i=i||{};this._config.styles=D.extend(this._config.styles,i);if(this.domElement){for(var hT in i){try{this.domElement.style[hT]=i[hT]}catch(T){}}}},setTitle:function(e){this._config.title=e||"";if(this.domElement){this.domElement.title=this._config.title}}});D.extend(be.prototype,{initialize:function(e){cW.prototype.initialize.call(this,e);return this.domElement},_getPixPos:function(hU,i){var hT=this.map.getZoomUnits();var e=this._config.height/hT/2;var T=this.map.pointToPixelIn(this.getPoint(),{zoom:hU,center:i,height:e});return T},_draw:function(){if(this.map){this.domElement=this.initialize(this.map)}},_addDom:function(){var e=this.map;if(this.domElement&&this.domElement.parentNode){this.domElement.parentNode.removeChild(this.domElement);this.domElement=null}this.domElement=dJ(e.getPanes().markerMouseTarget,this._msTargetRender());if(e.getMapType()==="B_EARTH_MAP"||e._renderType==="webgl"){return}},remove:function(){cW.prototype.remove.call(this);var e=new bc("onstatus_change");e.action="remove";e.overlay=this;this.fire(e)},_msTargetRender:function(){var e=[\'<div class="BMap_Marker BMap_noprint" unselectable="on" \'];e.push(\' style="position:absolute;padding:0;margin:0;border:0;width:0;height:0;-moz-user-select:none;\');e.push(this._config.clickable?"cursor:pointer;":"");e.push("width:"+this._config.size+"px;");e.push("height:"+this._config.size+"px;");e.push(\'"></div>\');return e.join("")},draw:function(hU){if(!this.domElement){return}hU=hU||{};if(hU.currentTarget){var hT=hU.currentTarget.zoomLevel;var i=hU.currentTarget.centerPoint}var T=this._getPixPos(hT,i);this.showInternal();this.domElement.style.left=T.x-this._config.size/2+"px";this.domElement.style.top=T.y-this._config.size/2+"px";if(this.map.getMapType()!=="B_EARTH_MAP"&&this.map._renderType!=="webgl"){this.initialize(this.map)}if(this.infoWindow!==null&&this.infoWindow.isOpen()){this.infoWindow.setPosition(hU.center,hU.zoom)}},showInternal:function(){if(cW.prototype.showInternal.call(this)===false){return false}if(!this._visible){return false}return true},hideInternal:function(e){if(cW.prototype.hideInternal.call(this,e)===false){return false}return true},getVertexInfoForGL:function(){var e=this.point;var hT=aG(e.lng);var i=aG(e.lat);var T=[];this._buildVertexForEachRender(hT,i,T);return{vertex:T}},_buildVertexForEachRender:function(hT,e,T){var i=g1.parseHexAndOpacityToRgbaArray(this._config.fillColor,this._config.fillOpacity);T.push([hT[0],e[0],hT[1],e[1],this._config.height,i[0]/255,i[1]/255,i[2]/255,i[3],this._config.size*a7(),this._config.shape])}});');
﻿_jsload&&_jsload('poly', 'x.DOM_ATTRS={strokecolor:1,strokeweight:1,strokeopacity:1,fillcolor:1,fillopacity:1,strokelinecap:1,strokelinejoin:1,strokestyle:1,topfillcolor:1,topfillopacity:1,sidefillcolor:1,sidefillopacity:1};D.extend(x.prototype,{initialize:function(T){if(T&&this._graphMouseEvent){T.addEventListener("onmousemove",this._graphMouseEvent)}if(T&&this._graphClickEvent){T.addEventListener("onclick",this._graphClickEvent);T.addEventListener("ondblclick",this._graphClickEvent);T.addEventListener("onrightclick",this._graphClickEvent);T.addEventListener("onrightdblclick",this._graphClickEvent)}if((this._config.strokeStyle==="dashed"||this._config.strokeStyle==="dotted")&&T.getRenderType()==="webgl"&&!this._config.texture){this._generateTexture()}var e=cW.prototype.initialize.call(this,T);if(this._config.enableEditing===true&&!this._config.geodesic){var i=this;setTimeout(function(){i.clearVertexs();i.addVertexs()},0)}return e},_generateTexture:function(){var hV=this._config;var T=hV.dashArray;var hU=document.createElement("canvas");var e;var hT;if(hV.strokeStyle==="dashed"){e=16;hT=e*8}else{if(hV.strokeStyle==="dotted"){e=32;hT=e*2}}hU.width=e;hU.height=hT;var i=hU.getContext("2d");i.fillStyle=hV.strokeColor;i.globalAlpha=hV.strokeOpacity;if(hV.strokeStyle==="dashed"){this._drawDashArrayTexture(i,e,hT)}else{if(hV.strokeStyle==="dotted"){this._drawDottedTexture(i,e,hT)}}this._config.texture=hU;this._config.textureSize=[e,hT]},_drawDashArrayTexture:function(hZ,hT,hV){var T=this._config;var hX=T.dashArray;if(!hX){hZ.fillRect(0,0,hT,hV/2);this._totalDashLen=T.strokeWeight*4}else{var hY=0;if(hX.length%2!==0){hX=hX.concat(hX)}for(var hU=0;hU<hX.length;hU++){hY+=hX[hU]}var e=0;for(var hU=0;hU<hX.length;hU++){var hW=hX[hU]/hY*hV;if(hU%2===0){hZ.fillRect(0,e,hT,hW)}e+=hW}this._totalDashLen=hY}},_drawDottedTexture:function(i,e,T){i.beginPath();i.arc(e/2,e/2,e/2,0,2*Math.PI);i.fill();i.closePath();this._totalDashLen=this._config.strokeWeight*2},_addDom:function(){if(this.map._renderType==="webgl"){return}var e=this._drawer=bx.getDrawer(this.map);this.domElement=e.addLine()},_bind:function(){var e=this.domElement;var hT=this;function hV(h1,hZ){var hY=h1.srcElement||h1.target;var hX=fK();var i=h1.pageX?h1.pageX:(h1.clientX+hX[1]);var h3=h1.pageY?h1.pageY:(h1.clientY+hX[0]);if(h1&&hZ&&i&&h3&&hY){var h0=D.I(hY.hashCode).map;var h2=D.Dom.getOffset(h0.container);hZ.pixel=new ek(i-h2.left,h3-h2.top);hZ.point=h0.pixelToPointIn(hZ.pixel);hZ.latLng=h0.pixelToPoint(hZ.pixel);return hZ}else{return hZ}}if(e&&bx.getDrawer(this.map).getType()!=="canvas"){D.on(e,"click",function(i){hT.dispatchEvent(hV(i,new bc("onclick").inherit(i)))});D.on(e,"mousedown",function(i){hT.dispatchEvent(hV(i,new bc("onmousedown").inherit(i)))});D.on(e,"mouseup",function(i){hT.dispatchEvent(hV(i,new bc("onmouseup").inherit(i)))});D.on(e,"dblclick",function(i){hT.dispatchEvent(hV(i,new bc("ondblclick").inherit(i)))})}e=null;if(!this._binded){this._binded=true;this.enableEventListen=true;this._graphMouseEvent=function(h0){if(!hT.map){return}if(hT.map.getMapType()==="B_EARTH_MAP"){return}if(hT instanceof bp.PolylineMultipart||hT instanceof bp.Marker3D){return}if(hT.map.temp._draggingMarker){return}if(!hT.enableEventListen){return}var hX;if(h0.overlay&&h0.overlay.toString()==="Marker"){if(!h0.overlay.keepWhenMousemoveOn){if(hT._temp.ismouseout===false&&hT._temp.ismouseover===true){hT._temp.ismouseover=false;hT._temp.ismouseout=true;hX=new bc("onmouseout");hT.dispatchEvent(hX)}return}}var i=h0.point;var hZ;if(hT.toString()!=="Polyline"){hZ=hT._getInPnpoly(i)}else{hZ=hT._getProximity(i)}var hY=hZ.dist;if(hY>=0&&hY<hT._config.mouseOverTolerance){if(!hT._temp.ismouseover){hT._temp.ismouseover=true;hT._temp.ismouseout=false;hX=new bc("onmouseover")}else{hX=new bc("onmousemove");hT.map.platform.style.cursor="pointer"}}else{if(!hT._temp.ismouseout&&hT._temp.ismouseover){hT._temp.ismouseover=false;hT._temp.ismouseout=true;hX=new bc("onmouseout");hT.map.platform.style.cursor=hT.map.config.defaultCursor}}if(hX){if(hT.toString()!=="Polyline"&&hX.type==="onmousemove"&&hT._temp.ismouseover===true&&(hY===0||hY>hT._config.mouseOverTolerance)){hX.pixel=h0.pixel;hX.point=h0.point;hX.latLng=this.overlayPixelToPoint(h0.pixel)}else{hX.point=this.overlayPixelToPointIn(hZ.pixel);hX.pixel=this.pointToPixelIn(hX.point);hX.latLng=this.overlayPixelToPoint(hZ.pixel)}hT.dispatchEvent(hX)}};this._graphClickEvent=function(h0){if(!hT.map){return}if(hT.map.getMapType()==="B_EARTH_MAP"){return}if(hT instanceof bp.PolylineMultipart||hT instanceof bp.Marker3D){return}if(hT.map.temp._draggingMarker){return}if(!hT.enableEventListen){return}var hX;var i=h0.point;var hZ;if(hT.toString()!=="Polyline"){hZ=hT._getInPnpoly(i)}else{hZ=hT._getProximity(i)}var hY=hZ.dist;if(hY>=0&&hY<hT._config.mouseOverTolerance){hX=new bc(h0.type)}if(hX){if(hT.toString()!=="Polyline"&&hX.type==="onmousemove"&&hT._temp.ismouseover===true&&(hY===0||hY>hT._config.mouseOverTolerance)){hX.pixel=h0.pixel;hX.point=h0.point;hX.latLng=this.overlayPixelToPoint(h0.pixel)}else{hX.point=this.overlayPixelToPointIn(hZ.pixel);hX.pixel=this.pointToPixelIn(hX.point);hX.latLng=this.overlayPixelToPoint(hZ.pixel)}hT.dispatchEvent(hX)}};this.map.addEventListener("onmousemove",this._graphMouseEvent);var hU=["onclick","dblclick","onrightclick","onrightdblclick"];for(var T=0;T<hU.length;T++){var hW=hU[T];this.map.addEventListener(hW,this._graphClickEvent)}this.addEventListener("mouseover",function(i){if(!this.map){return}});this.addEventListener("mouseout",function(i){if(!this.map){return}});this.map.addEventListener("movestart",function(){hT.enableEventListen=false;hT._mouseEventPixels=null});this.map.addEventListener("moveend",function(){hT.enableEventListen=true});this.map.addEventListener("zoomstart",function(){hT.enableEventListen=false;hT._mouseEventPixels=null});this.map.addEventListener("zoomend",function(){hT.enableEventListen=true});this.map.on("center_changed",function(){hT._mouseEventPixels=null});this.map.on("zoom_changed",function(){hT._mouseEventPixels=null});this.map.on("load",function(){hT._mouseEventPixels=null})}},draw:function(hU){if(!this.domElement){return}var hT=this.map;if(hT.getMapType()==="B_EARTH_MAP"||hT._renderType==="webgl"){return}hU=hU||{};var T=this.points.slice(0);if(this.greatCirclePoints.length>0){T[0]=this.greatCirclePoints}var i=this._getDisplayPixels(T,hU.zoom,hU.center);if(this._drawer){this._drawer.setPath(this.domElement,i)}},_draw:function(){if(this.map){this.initialize(this.map);if(this.domElement){this.domElement.style.WebkitUserSelect="none"}this.draw()}},_getDisplayPixels:function(hX,hY,e){var hT=this.map;var hW=[];if(hX.length==0||!this.isVisible()){return[hW]}if(hT._renderType!=="webgl"&&!this.domElement){return[hW]}var T=hX;if(!this._config.enableEditing&&this._config.enableParse){T=this._simplification(hX)}var hV=[];if(hX[0] instanceof hu){var hZ=this._toOverlayPixels(T,hY,e);hV.push(hZ.pixels);hV.isOnBack=hZ.isOnBack}else{hV.isOnBack=false;for(var hU=0;hU<T.length;hU++){var hZ=this._toOverlayPixels(T[hU],hY,e);hV.push(hZ.pixels);if(hZ.isOnBack===true){hV.isOnBack=true}}}return hV},_toOverlayPixels:function(hY,h1,e){var T=this.map;var hZ;var h0=[];var hX=T.pointToOverlayPixelIn(hY[0],{zoom:h1,center:e});h0.push(hX);if(hX.onBack){hZ=true}for(var hV=1,hU=1,hT=hY.length;hV<hT;hV++){var hW=T.pointToOverlayPixelIn(hY[hV],{zoom:h1,center:e});if(hW.onBack){hZ=true}if(!hW.equals(h0[hU-1])){h0.push(hW);hU++}}return{pixels:h0,isOnBack:hZ}},getParseCacheIndex:function(e){e=Math.floor(e);if(this._config.getParseCacheIndex){return this._config.getParseCacheIndex(e)}if(e<6){return 0}if(e<10){return 1}if(e<15){return 2}return 3},getParseTolerance:function(i,e){i=Math.floor(i);if(this._config.getParseTolerance){return this._config.getParseTolerance(i,e)}return x.parseTolerance[e][this.getParseCacheIndex(i)]},setPoints:function(i){this._clearCache();this.points=x.getGraphPoints(i).slice(0);this._calcBounds();this.draw();var e=new bc("onlineupdate");e.overlay=this;this.dispatchEvent(e)},setPointAt:function(T,e){if(!e||!this.points[T]){return}this._clearCache();this.points[T]=new hu(e.lng,e.lat);this._calcBounds();this.draw();var i=new bc("onlineupdate");i.overlay=this;this.dispatchEvent(i)},setPositionAt:function(i,e){if(!e||!this.points[i]){return}var T=eo.convertLL2MC(e);this.setPointAt(i,T);if(this._config.enableEditing===true&&!this._config.geodesic){this.clearVertexs();this.addVertexs()}},setOptions:function(i){i=i||{};var T=this.isStyleUseTexture();for(var e in i){if(i.hasOwnProperty(e)){var hU=this._config[e];var hT=i[e];this._config[e]=hT;if(hT!==hU&&(e==="strokeColor"||e==="strokeOpacity"||e==="strokeWeight")){if(this._config.texture){this._config.texture=null}if(T){this._generateTexture()}}if(this.map){this._setDomAttribute(e.toLowerCase(),i[e])}}}},isStyleUseTexture:function(){if(!this.map){return false}if(this.map.getRenderType()!=="webgl"){return false}return this._config.strokeStyle==="dashed"||this._config.strokeStyle==="dotted"},setStrokeColor:function(e){this.setOptions({strokeColor:e})},setStrokeLineCap:function(e){if(this._config){this._config.strokeLineCap=e}this._setDomAttribute("strokelinecap",e)},setStrokeLineJoin:function(e){if(this._config){this._config.strokeLineJoin=e}this._setDomAttribute("strokelinejoin",e)},setStrokeWeight:function(e){if(e>0){this._config.strokeWeight=e;if(!this.map){return}this._setDomAttribute("strokeweight",e)}},setStrokeOpacity:function(e){if(!e||e>1||e<0){return}this._config.strokeOpacity=e;if(!this.map){return}this._setDomAttribute("strokeopacity",e)},setFillOpacity:function(e){if(e>1||e<0){return}this._config.fillOpacity=e;this._setDomAttribute("fillopacity",e)},setStrokeStyle:function(e){if(e!="solid"&&e!="dashed"&&e!="dotted"){return}this._config.strokeStyle=e;this._setDomAttribute("strokestyle",e)},setFillColor:function(e){this._config.fillColor=e||"";this._setDomAttribute("fillcolor",e)},_setDomAttribute:function(i,T){if(!x.DOM_ATTRS[i]){return}if(this._drawer){if(T===false||T===null||typeof T==="undefined"){T=""}this._drawer.setAttribute(this.domElement,i,T,this._config)}var e=new bc("onlineupdate");e.overlay=this;this.dispatchEvent(e);if(i==="strokeweight"&&this.getStrokeStyle()==="dashed"&&bx.getDrawer(this.map)&&bx.getDrawer(this.map).getType()==="svg"){this._setDomAttribute("strokestyle","dashed")}},addVertexs:function(){var hX=this;if(hX.vertexMarkers.length){return}var hY=this.getVertexPoints();var hW;for(var hV=0,hT=hY.length;hV<hT;hV++){var e=hY[hV];if(e.t){hW=e4.imgPath+"nodeT.gif"}else{hW=e4.imgPath+"node.gif"}var T=new hd(hW,new ea(11,11),{offset:new ea(5,5)});var hU=new ds(e.p,{icon:T});hU.enableDragging(true);hU.addEventListener("ondragging",function(i){hX._onMarkerDragging(i)});hU.addEventListener("ondragstart",function(i){hX._onMarkerDragstart(i)});hU.addEventListener("ondragend",function(i){hX._onMarkerDragend(i)});hU.addEventListener("onmarkerdelvertex",function(i){hX._onMarkerDelVertex(i)});hU.index=hV;hU.t=e.t;this.vertexMarkers.push(hU);this.map?this.map.addOverlay(hU):""}},clearVertexs:function(){var e;while(e=this.vertexMarkers.pop()){this.map.removeOverlay(e);e=undefined}this.vertexMarkers.length=0},getVertexPoints:function(){var hV=[];for(var hU=0,T=this.points.length;hU<T;hU++){var hW=this.points[hU];hV.push({p:hW,t:0});if(hU<T-1){var e=this.points[hU+1];var hT=new hu((hW.lng+e.lng)/2,(hW.lat+e.lat)/2);hV.push({p:hT,t:1})}}this.vertexPoints=hV;return hV},delVertex:function(e){this.map.removeOverlay(this.vertexMarkers[e]);this.vertexPoints.splice(e,1);this.vertexMarkers.splice(e,1)},_onMarkerDragging:function(i){},_onMarkerDragstart:function(T){this._editstate=false;var i=new bc("oneditstart");i.pixel=T.pixel;i.point=T.point;i.latLng=T.latLng;i.overlay=this;this.dispatchEvent(i)},_onMarkerDragend:function(hX){this.vertexPoints.length=0;this._editstate=false;if(this._temp.dashedLine){this.map.removeOverlay(this._temp.dashedLine);delete this._temp.dashedLine}if(this._temp.preTNode){this.map.removeOverlay(this._temp.preTNode);delete this._temp.preTNode}if(this._temp.nexTNode){this.map.removeOverlay(this._temp.nexTNode);delete this._temp.nexTNode}var hW=hX.currentTarget;var hY=hX.point;var T=hW.index;var hV;if(T%2!=0){T=Math.ceil(T/2);hV=this.points.slice();var hU=this.points.length-T;var hT=hV.splice(T,hU);hV[hV.length]=hY;hV=hV.concat(hT)}else{T=T/2;this.points.splice(T,1,hY);if(this instanceof aS&&this.points.length-1==T){this.points.splice(0,1,hY)}hV=this.points}this.clearVertexs();this.setPoints(hV);this.addVertexs();var i=new bc("oneditend");i.pixel=hX.pixel;i.point=hX.point;i.latLng=hX.latLng;i.overlay=this;this.dispatchEvent(i);this._mouseEventPixels=null},_onMarkerDelVertex:function(hV){if(this.toString()!=="Polyline"&&this.toString()!=="Polygon"){return}if(hV.target.type===0||hV.target.t===0){var hU=[];if(this.vertexPoints.length<4&&this.toString()==="Polyline"){return}if(this.vertexPoints.length<8&&this.toString()==="Polygon"){return}if(this.toString()==="Polygon"&&(hV.target.index===0||hV.target.index===(this.vertexPoints.length-1))){this.delVertex(this.vertexPoints.length-1);this.delVertex(0)}else{this.delVertex(hV.target.index)}for(var hT=0;hT<this.vertexPoints.length;hT++){if(this.vertexPoints[hT].t===0){hU.push(this.vertexPoints[hT].p)}}this.points=hU;if(this.points[0].lng===this.points[this.points.length-1].lng&&this.points[0].lat===this.points[this.points.length-1].lat){this.points.splice(this.points.length-1,1)}this.clearVertexs();this.setPoints(this.points);this.addVertexs();var T=new bc("oneditend");T.pixel=hV.pixel;T.point=hV.point;T.latLng=hV.latLng;T.overlay=this;this.dispatchEvent(T);this._mouseEventPixels=null}},_getInPnpoly:function(T){var hT;var hX=[];var e=this.map.pointToOverlayPixelIn(T);if(this._mouseEventPixels){hX=this._mouseEventPixels}else{if(!(this.points[0] instanceof hu)){var hW=this._getDisplayPixels(this.points);for(var hV=0;hV<hW.length;hV++){hW[hV].push(hW[hV][0]);hX=hX.concat(hW[hV])}}else{hX=this._getDisplayPixels(this.points)[0]}this._mouseEventPixels=hX}var hU=this._pixelPnpoly(e,hX);hT=hU?0:1000;return{pixel:e,dist:hT}},_getProximity:function(h4){var T,hU,h5,hX,hW,h3,h2,h1=[];var h6=this.map.pointToOverlayPixelIn(h4);if(this._mouseEventPixels){h1=this._mouseEventPixels}else{h1=this._getDisplayPixels(this.points)[0];this._mouseEventPixels=h1}var h9=h1.length;if(h9>1){for(var h7=1;h7<h9;h7++){var hZ=h1[h7-1];var id=h1[h7];if(!hZ||!id){continue}if(hZ.x!=id.x){var ic=(id.y-hZ.y)/(id.x-hZ.x);var ia=id.y-ic*id.x;h2=Math.abs(ic*h6.x+ia-h6.y)/Math.sqrt(ic*ic+1)}else{h2=Math.abs(h6.x-id.x)}var h8=Math.pow(id.y-hZ.y,2)+Math.pow(id.x-hZ.x,2);var hT=Math.pow(id.y-h6.y,2)+Math.pow(id.x-h6.x,2);var ib=Math.pow(hZ.y-h6.y,2)+Math.pow(hZ.x-h6.x,2);var hV=Math.pow(h2,2);var e=hT-hV+ib-hV;if(e>h8){h2=Math.sqrt(Math.min(hT,ib))}if((T==null)||(T>h2)){hU=Math.sqrt(ib-hV)/Math.sqrt(h8);h5=Math.sqrt(hT-hV)/Math.sqrt(h8);T=h2;h3=h7}T=Math.min(T,h2)}if(hU>1){hU=1}if(h5>1){hU=0;h5=1}var h0=h1[h3-1].x-h1[h3].x;var hY=h1[h3-1].y-h1[h3].y;hX=h1[h3-1].x-(h0*hU);hW=h1[h3-1].y-(hY*hU)}return{pixel:new ek(hX,hW),dist:T}},_pixelPnpoly:function(hU,hW){var e=hW.length;var T=0;var hV=false;for(var hT=0;hT<e;hT++){T=(hT===e-1)?0:T+1;if((hW[hT].y!==hW[T].y)&&(((hU.y>=hW[hT].y)&&(hU.y<hW[T].y))||((hU.y>=hW[T].y)&&(hU.y<hW[hT].y)))&&(hU.x<(hW[T].x-hW[hT].x)*(hU.y-hW[hT].y)/(hW[T].y-hW[hT].y)+hW[hT].x)){hV=!hV}}return hV},getMinDistance:function(i){var e=this._getProximity(i);var T=this.map.overlayPixelToPointIn(e.pixel);return this.map.getDistanceIn(i,T)},buildVertex:function(hU,h0){var hX=[];var h1=[];var h3=this.points.slice(0);var h4=[];if(this.greatCirclePoints.length>0){h3[0]=this.greatCirclePoints}var T=x.JOININDEX[this._config.strokeLineJoin];var h2=x.CAPINDEX[this._config.strokeLineCap];var hT=this.getStrokeColorForGL();var e=this._config.strokeWeight/2;var hW=this.map.getZoom();if(h3.length>500&&h3[0] instanceof hu){if(!h0&&this._lastResult){return this._lastResult}var hZ=this._getDisplayPixelsGLWithCut(h3);for(var hV=0;hV<hZ.length;hV++){if(hZ[hV].length<2){continue}if(hX.length/6+hU.getVertexCount(hZ[hV].length)>65536){h4.push([hX,h1]);hX=[];h1=[]}hU.buildData(hZ[hV],T,h2,hX,h1,hT,e)}h4.push([hX,h1]);h4.inCache=false;this._lastResult=h4;return h4}var hY=this.getParseCacheIndex(this.map.getZoom());if(h0!==true&&this._parseCacheGL[hY]){this._parseCacheGL[hY].inCache=true;return this._parseCacheGL[hY]}var hZ=this._getDisplayPixelsGL(h3);for(var hV=0;hV<hZ.length;hV++){if(hZ[hV].length<2){continue}if(hX.length/6+hU.getVertexCount(hZ[hV].length)>65536){h4.push([hX,h1]);hX=[];h1=[]}hU.buildData(hZ[hV],T,h2,hX,h1,hT,e)}h4.push([hX,h1]);this._parseCacheGL[hY]=h4;this._parseCacheGL[hY].cacheIndex=hY;return h4},ifInMapView:function(){if(!this.map){return false}if(this.map.getZoom()<5){return true}if(this._config.clip===false){return true}var e=this.map.getBoundsIn();return !!e.intersects(this.getBoundsIn())},_getDisplayPixelsGLWithCut:function(e){return this._getDisplayPixelsGL(e)},_getDisplayPixelsGL:function(hT){var hV=this.map;var hU=[];var hX=[];hU.pointsArray=hX;if(hT.length==0||!this.isVisible()){return[hU]}var hW=hT;if(!this._config.enableEditing&&this._config.enableParse){hW=this._simplification(hT)}var T=[];if(!this.hasMultipleParts){T[0]=this._toOverlayPixelsGL(hW)}else{for(var e=0;e<hW.length;e++){T.push(this._toOverlayPixelsGL(hW[e]))}}return T},_toOverlayPixelsGL:function(h0){var T=this.map;var hZ=[];var hW=[];hZ.pointsArray=hW;var e=T._polyOverlayBasePoint;var hY=[h0[0].lng-e.lng,h0[0].lat-e.lat];hZ.push(hY);hW.push(hY[0],hY[1]);for(var hV=1,hU=1,hT=h0.length;hV<hT;hV++){var hX=[h0[hV].lng-e.lng,h0[hV].lat-e.lat];if(hX[0]!==hZ[hU-1][0]||hX[1]!==hZ[hU-1][1]){hZ.push(hX);hW.push(hX[0],hX[1]);hU++}}return hZ},getStrokeColorForGL:function(){var T=this._config.strokeColor.substr(1);var i=this._config.strokeOpacity;var e;if(T.length===3){e=[parseInt(T.substr(0,1)+T.substr(0,1),16),parseInt(T.substr(1,1)+T.substr(1,1),16),parseInt(T.substr(2,1)+T.substr(2,1),16),Math.floor(i*255)]}else{e=[parseInt(T.substr(0,2),16),parseInt(T.substr(2,2),16),parseInt(T.substr(4,2),16),Math.floor(i*255)]}return e},show:function(){cW.prototype.show.call(this);var e=new bc("onlineupdate");e.action="show";e.overlay=this;this.dispatchEvent(e);this.draw();if(this._config.enableEditing===true&&!this._config.geodesic){this.addVertexs()}},hide:function(){cW.prototype.hide.call(this);var e=new bc("onlineupdate");e.action="hide";e.overlay=this;this.dispatchEvent(e);if(this._config.enableEditing===true&&!this._config.geodesic){this.clearVertexs()}},remove:function(){if(this.map){this.map.removeEventListener("onmousemove",this._graphMouseEvent);this.map.removeEventListener("onclick",this._graphClickEvent);this.map.removeEventListener("ondblclick",this._graphClickEvent);this.map.removeEventListener("onrightclick",this._graphClickEvent);this.map.removeEventListener("onrightdblclick",this._graphClickEvent)}cW.prototype.remove.call(this);this._clearCache();var e=new bc("onlineupdate");e.action="remove";e.overlay=this;this.fire(e);if(this._config.enableEditing===true&&!this._config.geodesic){this.clearVertexs()}}});function c3(hV,hT,h2){var hZ=false,hX=false,h0=false,h4=new ek(hV.x,hV.y),h3=new ek(hT.x,hT.y),hU=fh(h4,h2),T=fh(h3,h2),h1;var h6,h5;var hY=h2.minX,hW=h2.minY,i=h2.maxX,e=h2.maxY;do{if(hU.all==0&&T.all==0){hZ=true;h0=true}else{if((hU.all&T.all)!=0){h0=true}else{if(hU.all!=0){h1=hU}else{h1=T}if(h1.top){h6=h4.x+(h3.x-h4.x)*(hW-h4.y)/(h3.y-h4.y);h5=hW}else{if(h1.bottom){h6=h4.x+(h3.x-h4.x)*(e-h4.y)/(h3.y-h4.y);h5=e}else{if(h1.right){h5=h4.y+(h3.y-h4.y)*(i-h4.x)/(h3.x-h4.x);h6=i}else{if(h1.left){h5=h4.y+(h3.y-h4.y)*(hY-h4.x)/(h3.x-h4.x);h6=hY}}}}hX=true;if(h1.all==hU.all){h4.x=Math.round(h6);h4.y=Math.round(h5);hU=fh(h4,h2)}else{h3.x=Math.round(h6);h3.y=Math.round(h5);T=fh(h3,h2)}}}}while(!h0);if(hZ){return{pixel0:new ek(h4.x,h4.y),pixel1:new ek(h3.x,h3.y),clip:hX?true:false}}}function fh(i,hU){var T={top:0,bottom:0,right:0,left:0,all:0};var e=i.x,hT=i.y;if(hT<hU.minY){T.top=8;T.all+=T.top}else{if(hT>hU.maxY){T.bottom=4;T.all+=T.bottom}}if(e>hU.maxX){T.right=2;T.all+=T.right}else{if(e<hU.minX){T.left=1;T.all+=T.left}}return T}D.extend(a.prototype,{initialize:function(i){x.prototype.initialize.call(this,i);var e=this._config;this.setOptions({fillColor:"",strokeColor:e.strokeColor,strokeWeight:e.strokeWeight,strokeStyle:e.strokeStyle,strokeLineCap:e.strokeLineCap,strokeLineJoin:e.strokeLineJoin,strokeOpacity:e.strokeOpacity});return this.domElement},setPoints:function(hT){this._clearCache();this.points=x.getGraphPoints(hT).slice(0);if(this._config.geodesic===true){this.greatCirclePoints.length=0;for(var T=0;T<this.points.length-1;T++){this.calcGreatCirclePoints(this.points[T],this.points[T+1])}}this._calcBounds();this.draw();var e=new bc("onlineupdate");e.overlay=this;this.dispatchEvent(e)},_getDisplayPixels:function(h5,e,ia){var ib=this.map;var hV=[];if(h5.length===0||!this.isVisible()){return[hV]}if(ib._renderType!=="webgl"&&!this.domElement){return[hV]}if(!((D.Platform.ipad||D.Platform.iphone||D.Platform.android)&&h5.length>5000)&&!this._config.enableEditing){var hW=this.getParseCacheIndex(ib.getZoom());if(this._parseCache[hW]){h5=this._parseCache[hW]}else{var T=hH(h5,this.getParseTolerance(ib.getZoom(),ib.config.coordType));h5=this._parseCache[hW]=T}}var h9;var ic=ib.pointToOverlayPixelIn(h5[0],{zoom:e,center:ia});hV.push(ic);if(ic.onBack){h9=true}for(var h6=1,h3=1,h2=h5.length;h6<h2;h6++){var hU=ib.pointToOverlayPixelIn(h5[h6],{zoom:e,center:ia});if(hU.onBack){h9=true}if(!hU.equals(hV[h3-1])){hV.push(hU);h3++}}var h8=[];var h0=Math.round(ib.offsetX);var hZ=Math.round(ib.offsetY);if(ib._renderType==="webgl"){h0=hZ=0}var hY=ib.config.drawMargin;var hX={minX:-h0-hY,minY:-hZ-hY,maxX:-h0+hY+ib.width,maxY:-hZ+hY+ib.height};for(h6=0,h2=hV.length-1;h6<h2;h6++){var h7=hV[h6];var h4=hV[h6+1];var hT=c3(h7,h4,hX);if(hT){h8.push(hT)}}var h1=[[]];for(h6=0,h2=h8.length;h6<h2;h6++){if(h8[h6].clip){h1[h1.length-1].push(h8[h6].pixel0);h1[h1.length-1].push(h8[h6].pixel1);if(h8[h6+1]&&h8[h6+1].clip){h1.push([])}}else{h1[h1.length-1].push(h8[h6].pixel0);if(h6===h8.length-1){h1[h1.length-1].push(h8[h6].pixel1)}}}h1.isOnBack=h9;return h1},_getDisplayPixelsGLWithCut:function(h3){var h8=this.map;var hV=[];if(h3.length===0||!this.isVisible()){return[hV]}if(!this._config.enableEditing){var hW=this.getParseCacheIndex(h8.getZoom());if(this._parseCache[hW]){h3=this._parseCache[hW]}else{var T=hH(h3,this.getParseTolerance(h8.getZoom(),h8.config.coordType));h3=this._parseCache[hW]=T}}var h9=h8._polyOverlayBasePoint;var e=h8.getZoomUnits();if(this._parseCacheGLRaw[hW]){hV=this._parseCacheGLRaw[hW]}else{var ia=new ek(h3[0].lng-h9.lng,h3[0].lat-h9.lat);hV.push(ia);for(var h4=1,h1=1,h0=h3.length;h4<h0;h4++){var hU=new ek(h3[h4].lng-h9.lng,h3[h4].lat-h9.lat);if(!hU.equals(hV[h1-1])){hV.push(hU);h1++}}this._parseCacheGLRaw[hW]=hV}var h7=h8.pixelToPointIn(new ek(0,h8.height));var h6=[];var hY=h8.config.drawMarginGL;var hX={minX:Math.round(-hY*e+(h7.lng-h9.lng)),minY:Math.round(-hY*e+(h7.lat-h9.lat)),maxX:Math.round((hY+h8.width)*e+(h7.lng-h9.lng)),maxY:Math.round((hY+h8.height)*e+(h7.lat-h9.lat))};for(h4=0,h0=hV.length-1;h4<h0;h4++){var h5=hV[h4];var h2=hV[h4+1];var hT=c3(h5,h2,hX);if(hT){h6.push(hT)}}var hZ=[[]];for(h4=0,h0=h6.length;h4<h0;h4++){if(h6[h4].clip){hZ[hZ.length-1].push([h6[h4].pixel0.x,h6[h4].pixel0.y]);hZ[hZ.length-1].push([h6[h4].pixel1.x,h6[h4].pixel1.y]);if(h6[h4+1]&&h6[h4+1].clip){hZ.push([])}}else{hZ[hZ.length-1].push([h6[h4].pixel0.x,h6[h4].pixel0.y]);if(h4===h6.length-1){hZ[hZ.length-1].push([h6[h4].pixel1.x,h6[h4].pixel1.y])}}}return hZ},_getDisplayPixelsGL:function(hZ){var T=this.map;var hY=[];if(hZ.length===0||!this.isVisible()){return[hY]}if(this.greatCirclePoints.length>0){hZ=this.greatCirclePoints}if(!this._config.enableEditing){var hX=this.getParseCacheIndex(T.getZoom());if(this._parseCache[hX]){hZ=this._parseCache[hX]}else{var h0=hH(hZ,this.getParseTolerance(T.getZoom(),T.config.coordType));hZ=this._parseCache[hX]=h0}}var e=T._polyOverlayBasePoint;hY.push([hZ[0].lng-e.lng,hZ[0].lat-e.lat]);for(var hV=1,hU=1,hT=hZ.length;hV<hT;hV++){var hW=[hZ[hV].lng-e.lng,hZ[hV].lat-e.lat];if(hW[0]!==hY[hU-1][0]||hW[1]!==hY[hU-1][1]){hY.push(hW);hU++}}hY=[hY];this._addMultipleDrawPath(hY);return hY},_addMultipleDrawPath:function(T,hV,i){if(this._config.clip===true){return}var hU=this.map;hV=hV||hU.getZoom();if(hV>12&&hU.getRenderType()!=="webgl"){return}var e=i?hU.worldSize(hV):c9.WORLD_SIZE_MC;var hT=T.slice(0);D.each(hT,function(hW){var hX=[];D.each(hW,function(hY){if(hY.x){hX.push(new ek(hY.x-e,hY.y))}else{hX.push([hY[0]-e,hY[1]])}});T.push(hX)});D.each(hT,function(hW){var hX=[];D.each(hW,function(hY){if(hY.x){hX.push(new ek(hY.x+e,hY.y))}else{hX.push([hY[0]+e,hY[1]])}});T.push(hX)})},getParsedPoints:function(){var hW=this.map;var i=this.points;var e=[];var T=this;var hV=i.slice(0);hV=[hV];if(this.greatCirclePoints.length>0){hV=[];hV[0]=this.greatCirclePoints}D.each(hV,function(hY){var hX=hH(hY,T.getParseTolerance(hW.getZoom(),hW.config.coordType));e.push(hX)});var hU=0;if(this._bounds.sw.lng<-c9.WORLD_SIZE_MC_HALF){hU=c9.WORLD_SIZE_MC}if(this._bounds.ne.lng>c9.WORLD_SIZE_MC_HALF){hU=-c9.WORLD_SIZE_MC}if(hU===0){return e}var hT=e.slice(0);D.each(hT,function(hX){var hY=[];D.each(hX,function(hZ){hY.push(new hu(hZ.lng+hU,hZ.lat))});e.push(hY)});return e},_onMarkerDragging:function(hZ){this._editstate=true;var T=hZ.currentTarget;var h1=hZ.point;var h0=T.index;var i=this.vertexPoints;var h2;var hX=null;var hT=null;if(h0===0){var hY=i[h0+2].p;h2=[h1,hY];hX=new hu((hY.lng+h1.lng)/2,(hY.lat+h1.lat)/2);if(this.vertexMarkers[h0+1]){this.vertexMarkers[h0+1].hide()}}else{if(h0===i.length-1){var hW=i[h0-2].p;h2=[hW,h1];hX=new hu((hW.lng+h1.lng)/2,(hW.lat+h1.lat)/2);if(this.vertexMarkers[h0-1]){this.vertexMarkers[h0-1].hide()}}else{var hW=i[h0-1].p;var hY=i[h0+1].p;h2=[hW,h1,hY];if(!T.t){hW=i[h0-2].p;hY=i[h0+2].p;h2=[hW,h1,hY];hX=new hu((hW.lng+h1.lng)/2,(hW.lat+h1.lat)/2);hT=new hu((hY.lng+h1.lng)/2,(hY.lat+h1.lat)/2);if(this.vertexMarkers[h0-1]){this.vertexMarkers[h0-1].hide()}if(this.vertexMarkers[h0+1]){this.vertexMarkers[h0+1].hide()}}}}if(!this._temp.dashedLine){var hV=new a(h2,{strokeStyle:"dashed",strokeColor:this._config.strokeColor,strokeWeight:this._config.strokeWeight,strokeOpacity:this._config.strokeOpacity});this.map.addOverlay(hV);hV.hide();this._temp.dashedLine=hV}else{this._temp.dashedLine.setPoints(h2);this._temp.dashedLine.show()}var hU=new hd(e4.imgPath+"nodeT.gif",new ea(11,11),{offset:new ea(5,5)});if(!this._temp.preTNode&&hX){this._temp.preTNode=new ds(hX,{icon:hU});this.map.addOverlay(this._temp.preTNode)}else{if(hX){this._temp.preTNode.setPoint(hX)}}if(!this._temp.nexTNode&&hT){this._temp.nexTNode=new ds(hT,{icon:hU});this.map.addOverlay(this._temp.nexTNode)}else{if(hT){this._temp.nexTNode.setPoint(hT)}}}});D.extend(eq.prototype,{initialize:function(i){x.prototype.initialize.call(this,i);var e=this._config;this.setOptions({fillColor:"",strokeColor:e.strokeColor,strokeWeight:e.strokeWeight,strokeStyle:e.strokeStyle,strokeLineCap:e.strokeLineCap,strokeLineJoin:e.strokeLineJoin,strokeOpacity:e.strokeOpacity});return this.domElement},setPoints:function(i){this._clearCache();this.points=x.getGraphPoints(i).slice(0);this.points=this.calcBezierPoints(this.points,this._cps);this._calcBounds();this.draw();var e=new bc("onlineupdate");e.overlay=this;this.dispatchEvent(e)},_getDisplayPixels:function(h5,e,ia){var ib=this.map;var hV=[];if(h5.length===0||!this.isVisible()){return[hV]}if(ib._renderType!=="webgl"&&!this.domElement){return[hV]}if(!((D.Platform.ipad||D.Platform.iphone||D.Platform.android)&&h5.length>5000)&&!this._config.enableEditing){var hW=this.getParseCacheIndex(ib.getZoom());if(this._parseCache[hW]){h5=this._parseCache[hW]}else{var T=hH(h5,this.getParseTolerance(ib.getZoom(),ib.config.coordType));h5=this._parseCache[hW]=T}}var h9;var ic=ib.pointToOverlayPixelIn(h5[0],{zoom:e,center:ia});hV.push(ic);if(ic.onBack){h9=true}for(var h6=1,h3=1,h2=h5.length;h6<h2;h6++){var hU=ib.pointToOverlayPixelIn(h5[h6],{zoom:e,center:ia});if(hU.onBack){h9=true}if(!hU.equals(hV[h3-1])){hV.push(hU);h3++}}var h8=[];var h0=Math.round(ib.offsetX);var hZ=Math.round(ib.offsetY);if(ib._renderType==="webgl"){h0=hZ=0}var hY=ib.config.drawMargin;var hX={minX:-h0-hY,minY:-hZ-hY,maxX:-h0+hY+ib.width,maxY:-hZ+hY+ib.height};for(h6=0,h2=hV.length-1;h6<h2;h6++){var h7=hV[h6];var h4=hV[h6+1];var hT=c3(h7,h4,hX);if(hT){h8.push(hT)}}var h1=[[]];for(h6=0,h2=h8.length;h6<h2;h6++){if(h8[h6].clip){h1[h1.length-1].push(h8[h6].pixel0);h1[h1.length-1].push(h8[h6].pixel1);if(h8[h6+1]&&h8[h6+1].clip){h1.push([])}}else{h1[h1.length-1].push(h8[h6].pixel0);if(h6===h8.length-1){h1[h1.length-1].push(h8[h6].pixel1)}}}h1.isOnBack=h9;return h1},_getDisplayPixelsGLWithCut:function(h3){var h8=this.map;var hV=[];if(h3.length===0||!this.isVisible()){return[hV]}if(!this._config.enableEditing){var hW=this.getParseCacheIndex(h8.getZoom());if(this._parseCache[hW]){h3=this._parseCache[hW]}else{var T=hH(h3,this.getParseTolerance(h8.getZoom(),h8.config.coordType));h3=this._parseCache[hW]=T}}var h9=h8._polyOverlayBasePoint;var e=h8.getZoomUnits();if(this._parseCacheGLRaw[hW]){hV=this._parseCacheGLRaw[hW]}else{var ia=new ek(h3[0].lng-h9.lng,h3[0].lat-h9.lat);hV.push(ia);for(var h4=1,h1=1,h0=h3.length;h4<h0;h4++){var hU=new ek(h3[h4].lng-h9.lng,h3[h4].lat-h9.lat);if(!hU.equals(hV[h1-1])){hV.push(hU);h1++}}this._parseCacheGLRaw[hW]=hV}var h7=h8.pixelToPointIn(new ek(0,h8.height));var h6=[];var hY=h8.config.drawMarginGL;var hX={minX:Math.round(-hY*e+(h7.lng-h9.lng)),minY:Math.round(-hY*e+(h7.lat-h9.lat)),maxX:Math.round((hY+h8.width)*e+(h7.lng-h9.lng)),maxY:Math.round((hY+h8.height)*e+(h7.lat-h9.lat))};for(h4=0,h0=hV.length-1;h4<h0;h4++){var h5=hV[h4];var h2=hV[h4+1];var hT=c3(h5,h2,hX);if(hT){h6.push(hT)}}var hZ=[[]];for(h4=0,h0=h6.length;h4<h0;h4++){if(h6[h4].clip){hZ[hZ.length-1].push([h6[h4].pixel0.x,h6[h4].pixel0.y]);hZ[hZ.length-1].push([h6[h4].pixel1.x,h6[h4].pixel1.y]);if(h6[h4+1]&&h6[h4+1].clip){hZ.push([])}}else{hZ[hZ.length-1].push([h6[h4].pixel0.x,h6[h4].pixel0.y]);if(h4===h6.length-1){hZ[hZ.length-1].push([h6[h4].pixel1.x,h6[h4].pixel1.y])}}}return hZ},_getDisplayPixelsGL:function(hZ){var T=this.map;var hY=[];if(hZ.length===0||!this.isVisible()){return[hY]}if(this.greatCirclePoints.length>0){hZ=this.greatCirclePoints}if(!this._config.enableEditing){var hX=this.getParseCacheIndex(T.getZoom());if(this._parseCache[hX]){hZ=this._parseCache[hX]}else{var h0=hH(hZ,this.getParseTolerance(T.getZoom(),T.config.coordType));hZ=this._parseCache[hX]=h0}}var e=T._polyOverlayBasePoint;hY.push([hZ[0].lng-e.lng,hZ[0].lat-e.lat]);for(var hV=1,hU=1,hT=hZ.length;hV<hT;hV++){var hW=[hZ[hV].lng-e.lng,hZ[hV].lat-e.lat];if(hW[0]!==hY[hU-1][0]||hW[1]!==hY[hU-1][1]){hY.push(hW);hU++}}hY=[hY];this._addMultipleDrawPath(hY);return hY},_addMultipleDrawPath:function(T,hV,i){if(this._config.clip===true){return}var hU=this.map;hV=hV||hU.getZoom();if(hV>12&&hU.getRenderType()!=="webgl"){return}var e=i?hU.worldSize(hV):c9.WORLD_SIZE_MC;var hT=T.slice(0);D.each(hT,function(hW){var hX=[];D.each(hW,function(hY){if(hY.x){hX.push(new ek(hY.x-e,hY.y))}else{hX.push([hY[0]-e,hY[1]])}});T.push(hX)});D.each(hT,function(hW){var hX=[];D.each(hW,function(hY){if(hY.x){hX.push(new ek(hY.x+e,hY.y))}else{hX.push([hY[0]+e,hY[1]])}});T.push(hX)})},});D.extend(fm.prototype,{setPoints:function(e){if(!e){return}this._clearCache();this.points=this._unifyArgs(e);if(this._config.geodesic===true){this.calcGreatCirclePoints(eo.convertMC2LL(this.points[0][0]),eo.convertMC2LL(this.points[0][1]))}this._calcBounds()},_getDisplayPixels:function(e,hW,hT){var hV=this.map;var T=[];var i=this;var hU=e.slice(0);if(this.greatCirclePoints.length>0){hU[0]=this.greatCirclePoints}D.each(hU,function(hY,hX){var hZ=i._getEachDisplayPixels(hY,hX,hW,hT);D.each(hZ,function(h0){T.push(h0)})});this._addMultipleDrawPath(T,hW,true);return T},_addMultipleDrawPath:function(T,hV,i){if(this._config.clip===true){return}var hU=this.map;hV=hV||hU.getZoom();if(hV>12&&hU.getRenderType()!=="webgl"){return}var e=i?hU.worldSize(hV):c9.WORLD_SIZE_MC;var hT=T.slice(0);D.each(hT,function(hW){var hX=[];D.each(hW,function(hY){if(hY.x){hX.push(new ek(hY.x-e,hY.y))}else{hX.push([hY[0]-e,hY[1]])}});T.push(hX)});D.each(hT,function(hW){var hX=[];D.each(hW,function(hY){if(hY.x){hX.push(new ek(hY.x+e,hY.y))}else{hX.push([hY[0]+e,hY[1]])}});T.push(hX)})},_getDisplayPixelsGL:function(e){var T=[];var i=this;var hT=e.slice(0);if(this.greatCirclePoints.length>0){hT[0]=this.greatCirclePoints}D.each(hT,function(hV,hU){var hW=i._getEachDisplayPixelsGL(hV,hU);D.each(hW,function(hX){T.push(hX)})});this._addMultipleDrawPath(T);return T},_getEachDisplayPixels:function(h3,hX,hW,h0){var e=this.map;var h2=[];if(h3.length===0||!this.domElement||!this.isVisible()){return[h2]}h3=this._simplification(h3,hX);var h1;var hZ=e.pointToOverlayPixelIn(h3[0],{zoom:hW,center:h0});h2.push(hZ);if(hZ.onBack){h1=true}for(var hV=1,hT=1,T=h3.length;hV<T;hV++){var hY=e.pointToOverlayPixelIn(h3[hV],{zoom:hW,center:h0});if(hY.onBack){h1=true}if(!hY.equals(h2[hT-1])){h2.push(hY);hT++}}if(e.getZoom()<5||this._config.clip===false){return[h2]}var hU=this._clipLine(h2);hU.isOnBack=h1;return hU},_simplification:function(T,i){if(this._config.enableEditing){return T}var hU=this.map;var hT=this.getParseCacheIndex(hU.getZoom());if(this._parseCache[hT]&&this._parseCache[hT][i]){return this._parseCache[hT][i]}else{var e=hH(T,this.getParseTolerance(hU.getZoom(),hU.config.coordType));if(!this._parseCache[hT]){this._parseCache[hT]=[]}this._parseCache[hT][i]=e;return e}},_clipLine:function(hT){var e=this.map;var hZ=[];var h2=Math.round(e.offsetX);var h1=Math.round(e.offsetY);var h3=e.config.drawMargin;var hV={minX:-h2-h3,minY:-h1-h3,maxX:-h2+h3+e.width,maxY:-h1+h3+e.height};for(var hW=0,T=hT.length-1;hW<T;hW++){var hY=hT[hW];var hX=hT[hW+1];var h0=c3(hY,hX,hV);if(h0){hZ.push(h0)}}var hU=[[]];for(var hW=0,T=hZ.length;hW<T;hW++){if(hZ[hW].clip){hU[hU.length-1].push(hZ[hW].pixel0);hU[hU.length-1].push(hZ[hW].pixel1);if(hZ[hW+1]&&hZ[hW+1].clip){hU.push([])}}else{hU[hU.length-1].push(hZ[hW].pixel0);if(hW===hZ.length-1){hU[hU.length-1].push(hZ[hW].pixel1)}}}return hU},_getEachDisplayPixelsGL:function(hZ,hW){var T=this.map;var hY=[];if(hZ.length===0||!this.isVisible()){return[hY]}hZ=this._simplification(hZ,hW);if(this._config.clip===true){return this._clipLineGL(hZ,hW)}var e=T._polyOverlayBasePoint;hY.push([hZ[0].lng-e.lng,hZ[0].lat-e.lat]);for(var hV=1,hU=1,hT=hZ.length;hV<hT;hV++){var hX=[hZ[hV].lng-e.lng,hZ[hV].lat-e.lat];if(hX[0]!==hY[hU-1][0]||hX[1]!==hY[hU-1][1]){hY.push(hX);hU++}}return[hY]},_clipLineGL:function(h3,hW){var h8=this.map;var hV=this.getParseCacheIndex(h8.getZoom());var h9=h8._polyOverlayBasePoint;var hU=[];if(this._parseCacheGLRaw[hV]&&this._parseCacheGLRaw[hV][hW]){hU=this._parseCacheGLRaw[hV][hW]}else{var ia=new ek(h3[0].lng-h9.lng,h3[0].lat-h9.lat);hU.push(ia);for(var h4=1,h1=1,h0=h3.length;h4<h0;h4++){var hT=new ek(h3[h4].lng-h9.lng,h3[h4].lat-h9.lat);if(!hT.equals(hU[h1-1])){hU.push(hT);h1++}}if(!this._parseCacheGLRaw[hV]){this._parseCacheGLRaw[hV]=[]}this._parseCacheGLRaw[hV][hW]=hU}var e=h8.getZoomUnits();var h7=h8.pixelToPointIn(new ek(0,h8.height));var h6=[];var hY=h8.config.drawMarginGL;var hX={minX:Math.round(-hY*e+(h7.lng-h9.lng)),minY:Math.round(-hY*e+(h7.lat-h9.lat)),maxX:Math.round((hY+h8.width)*e+(h7.lng-h9.lng)),maxY:Math.round((hY+h8.height)*e+(h7.lat-h9.lat))};for(h4=0,h0=hU.length-1;h4<h0;h4++){var h5=hU[h4];var h2=hU[h4+1];var T=c3(h5,h2,hX);if(T){h6.push(T)}}var hZ=[[]];for(h4=0,h0=h6.length;h4<h0;h4++){if(h6[h4].clip){hZ[hZ.length-1].push([h6[h4].pixel0.x,h6[h4].pixel0.y]);hZ[hZ.length-1].push([h6[h4].pixel1.x,h6[h4].pixel1.y]);if(h6[h4+1]&&h6[h4+1].clip){hZ.push([])}}else{hZ[hZ.length-1].push([h6[h4].pixel0.x,h6[h4].pixel0.y]);if(h4===h6.length-1){hZ[hZ.length-1].push([h6[h4].pixel1.x,h6[h4].pixel1.y])}}}return hZ},getParsedPoints:function(){var hW=this.map;var i=this.points;var e=[];var T=this;var hV=i.slice(0);if(this.greatCirclePoints.length>0){hV[0]=this.greatCirclePoints}D.each(hV,function(hY){var hX=hH(hY,T.getParseTolerance(hW.getZoom(),hW.config.coordType));e.push(hX)});var hU=0;if(this._bounds.sw.lng<-c9.WORLD_SIZE_MC_HALF){hU=c9.WORLD_SIZE_MC}if(this._bounds.ne.lng>c9.WORLD_SIZE_MC_HALF){hU=-c9.WORLD_SIZE_MC}if(hU===0){return e}var hT=e.slice(0);D.each(hT,function(hX){var hY=[];D.each(hX,function(hZ){hY.push(new hu(hZ.lng+hU,hZ.lat))});e.push(hY)});console.log(e);return e},setPointAt:function(T,e,hT){hT=hT||0;if(!e||!this.points[hT][T]||!this.points[hT][T]){return}this._clearCache();this.points[hT][T]=new hu(e.lng,e.lat);if(this._config.geodesic===true){this.calcGreatCirclePoints(eo.convertMC2LL(this.points[hT][0]),eo.convertMC2LL(this.points[hT][1]))}this._calcBounds();this.draw();var i=new bc("onlineupdate");i.overlay=this;this.dispatchEvent(i)},calcGreatCirclePoints:function(hT,T){if(hT.equals(T)){return}var e=eo.getDistance(dL(hT.lng),dL(hT.lat),dL(T.lng),dL(T.lat));if(e<250000){return}this.greatCirclePoints.length=0;var hX=Math.round(e/150000);var h1=this.calcAngularDistance(hT,T);this.greatCirclePoints.push(this.points[0][0]);var h0=hT.lng;var hZ=this.points[0][0];for(var hU=0;hU<hX;hU++){var hW=this.calcMiddlePoint(hT,T,hU/hX,h1);var hY=eo.convertLL2MC(hW);var hV=hY.lng;var h2=bQ(hY,hZ);if(h2>30037726){if(hY.lng<hZ.lng){hY.lng+=c9.WORLD_SIZE_MC}else{hY.lng-=c9.WORLD_SIZE_MC}}this.greatCirclePoints.push(hY);hZ=hY}this.greatCirclePoints.push(this.points[0][1]);var h2=bQ(this.points[0][1],hZ);if(h2>30037726){if(this.points[0][1].lng<hZ.lng){this.points[0][1].lng+=c9.WORLD_SIZE_MC}else{this.points[0][1].lng-=c9.WORLD_SIZE_MC}}},calcMiddlePoint:function(h0,hZ,h1,h5){var hU=h0.lat;var hT=hZ.lat;var h4=h0.lng;var h2=hZ.lng;var h6=dL(hU);var h3=dL(hT);var i=dL(h4);var e=dL(h2);var h8=Math.sin((1-h1)*h5)/Math.sin(h5);var h7=Math.sin(h1*h5)/Math.sin(h5);var hX=h8*Math.cos(h6)*Math.cos(i)+h7*Math.cos(h3)*Math.cos(e);var hW=h8*Math.cos(h6)*Math.sin(i)+h7*Math.cos(h3)*Math.sin(e);var hV=h8*Math.sin(h6)+h7*Math.sin(h3);var T=Math.atan2(hV,Math.sqrt(Math.pow(hX,2)+Math.pow(hW,2)));var hY=Math.atan2(hW,hX);return new hu(df(hY),df(T))},calcAngularDistance:function(hU,i){var hV=dL(hU.lat);var hT=dL(i.lat);var T=dL(hU.lng);var e=dL(i.lng);return Math.acos(Math.sin(hV)*Math.sin(hT)+Math.cos(hV)*Math.cos(hT)*Math.cos(Math.abs(e-T)))}});D.extend(aS.prototype,{initialize:function(i){x.prototype.initialize.call(this,i);var e=this._config;this.setOptions({strokeColor:e.strokeColor,strokeWeight:e.strokeWeight,strokeStyle:e.strokeStyle,fillColor:e.fillColor,strokeOpacity:e.strokeOpacity,fillOpacity:e.fillOpacity});return this.domElement},setPointAt:function(T,e){if(!this._userPoints[T]){return}this._clearCache();this._userPoints[T]=new hu(e.lng,e.lat);this.points[T]=new hu(e.lng,e.lat);if(T===0&&!this.points[0].equals(this.points[this.points.length-1])){this.points[this.points.length-1]=new hu(e.lng,e.lat)}this._calcBounds();this.draw();var i=new bc("onlineupdate");i.overlay=this;this.dispatchEvent(i)},setPositionAt:function(i,e){if(!this._userPoints[i]){return}var T=eo.convertLL2MC(e);this.setPointAt(i,T);if(this._config.enableEditing===true&&!this._config.geodesic){this.clearVertexs();this.addVertexs()}},_onMarkerDragging:function(h0){this._editstate=true;var hT=h0.currentTarget;var h2=h0.point;var h1=hT.index;var i=this.vertexPoints;var h4;var hX=i[2].p;var h3=i[i.length-2].p;var hY=null;var T=null;if(h1===0){var hZ=i[h1+2].p;h4=[h3,h2,hZ];if(!hT.t){hY=new hu((h3.lng+h2.lng)/2,(h3.lat+h2.lat)/2);T=new hu((hZ.lng+h2.lng)/2,(hZ.lat+h2.lat)/2)}}else{if(h1===i.length-1){var hW=i[h1-2].p;h4=[hW,h2,hX];if(!hT.t){hY=new hu((hW.lng+h2.lng)/2,(hW.lat+h2.lat)/2);T=new hu((hX.lng+h2.lng)/2,(hX.lat+h2.lat)/2)}}else{var hW=i[h1-1].p;var hZ=i[h1+1].p;h4=[hW,h2,hZ];if(!hT.t){hW=i[h1-2].p;hZ=i[h1+2].p;h4=[hW,h2,hZ];hY=new hu((hW.lng+h2.lng)/2,(hW.lat+h2.lat)/2);T=new hu((hZ.lng+h2.lng)/2,(hZ.lat+h2.lat)/2);if(this.vertexMarkers[h1-1]){this.vertexMarkers[h1-1].hide()}if(this.vertexMarkers[h1+1]){this.vertexMarkers[h1+1].hide()}}}}if(!this._temp.dashedLine){var hV=new a(h4,{strokeStyle:"dashed",strokeColor:this._config.strokeColor,strokeWeight:this._config.strokeWeight,strokeOpacity:this._config.strokeOpacity});this.map.addOverlay(hV);this._temp.dashedLine=hV}else{this._temp.dashedLine.setPoints(h4)}var hU=new hd(e4.imgPath+"nodeT.gif",new ea(11,11),{offset:new ea(5,5)});if(!this._temp.preTNode&&hY){this._temp.preTNode=new ds(hY,{icon:hU});this.map.addOverlay(this._temp.preTNode)}else{if(hY){this._temp.preTNode.setPoint(hY)}}if(!this._temp.nexTNode&&T){this._temp.nexTNode=new ds(T,{icon:hU});this.map.addOverlay(this._temp.nexTNode)}else{if(T){this._temp.nexTNode.setPoint(T)}}},getFillStyleForGL:function(){var T=this._config.fillColor.substr(1);var e=this._config.fillOpacity;var i;if(T.length===3){i=[parseInt(T.substr(0,1)+T.substr(0,1),16),parseInt(T.substr(1,1)+T.substr(1,1),16),parseInt(T.substr(2,1)+T.substr(2,1),16),e]}else{i=[parseInt(T.substr(0,2),16),parseInt(T.substr(2,2),16),parseInt(T.substr(4,2),16),e]}this._fillStyleInfoForGL=i.join(",");return this._fillStyleInfoForGL},buildFillVertex:function(hW){var h0=[];var hY=this.getParseCacheIndex(this.map.getZoom());if(this._areaCacheGL[hY]){return this._areaCacheGL[hY]}var hZ=this._getDisplayPixelsGL(this.points);if(hZ.pointsArray&&hZ.pointsArray.length<3){this._areaCacheGL[hY]=[[],h0];return this._areaCacheGL[hY]}var hU;var hV=[];var hT=0;for(var T=0;T<hZ.length;T++){if(T>0){hT+=hZ[T-1].length}hU=hW(hZ[T].pointsArray,null,null,hT);for(var e=0,hX=hU.length;e<hX;e+=3){h0.push(hU[e],hU[e+1],hU[e+2])}hV=hV.concat(hZ[T].pointsArray)}var h1=[new Float32Array(hV),new Uint16Array(h0)];this._areaCacheGL[hY]=h1;return h1}});D.extend(f9.prototype,{initialize:function(e){aS.prototype.initialize.call(this,e);this.points=this._getPerimeterPoints(this.point,this.radius);this._calcBounds();return this.domElement},_addDom:function(){if(this.map._renderType==="webgl"){return}var e=this._drawer=bx.getDrawer(this.map);this.domElement=e.addStandardCircle()},draw:function(i){if(!this.domElement){return}i=i||{};var T=this.getDisplayGeometry(i.center,i.zoom);if(this._drawer){this._drawer.setStandardCircleGeometry(this.domElement,T)}},getDisplayGeometry:function(e,i){var T=this.map.pointToOverlayPixelIn(this.point,{zoom:i,center:e});var hU=Math.round(this._radiusMercator/this.map.getZoomUnits(i));var hT={cx:T.x,cy:T.y,radius:hU};return hT},setPoint:function(e,T){if(!e){return}this._clearCache();if(!T){this.vertexPoints=null}this.point=e;this.latLng=eo.convertMC2LL(e);this.points=this._getPerimeterPoints(e,this.radius);this._calcBounds();this.draw();var i=new bc("onlineupdate");i.overlay=this;this.dispatchEvent(i)},setRadius:function(e,T){this._clearCache();if(!T){this.vertexPoints=null}this.radius=Math.abs(e);this.points=this._getPerimeterPoints(this.point,this.radius);this._calcBounds();this.draw();var i=new bc("onlineupdate");i.overlay=this;this.dispatchEvent(i)},getParseTolerance:function(i,e){if(this._config.getParseTolerance){return this._config.getParseTolerance(i,e)}return f9.parseTolerance[e][this.getParseCacheIndex(i)]},_onMarkerDragging:function(hW){var hU;var hY;var hZ;var i=this.map;this._editstate=true;var hT=hW.currentTarget;var hX=hT.index;var T=this.vertexPoints;var hV=T[0].p;var h0=T[T.length-1].p;if(hX==0){hY=hT.point;hZ=h0}else{hY=hV;hZ=hT.point}hU=eo.getDistanceByMC(hY,hZ);this.setRadius(hU,true);this.setCenterIn(hY,true)},_onMarkerDragend:function(hU){this._editstate=false;var hT=hU.currentTarget;var T=hT.index;this.vertexPoints[0]={p:this.point,t:0};if(T==1){this.vertexPoints[1]={p:hT.point,t:0}}this.clearVertexs();this.addVertexs();var i=new bc("oneditend");i.pixel=hU.pixel;i.point=hU.point;i.latLng=hU.latLng;i.overlay=this;this.dispatchEvent(i)},getVertexPoints:function(){if(!this.vertexPoints){var e=[];e.push({p:this.point,t:0});e.push({p:this.points[Math.floor(this.points.length*3/4)],t:0});this.vertexPoints=e}return this.vertexPoints}});D.extend(bt.prototype,{initialize:function(i){x.prototype.initialize.call(this,i);var e=this._config;this.setOptions({topFillColor:e.topFillColor,topFillOpacity:e.topFillOpacity,sideFillColor:e.sideFillColor,sideFillOpacity:e.sideFillOpacity,altitude:e.altitude});return this.domElement},setPointAt:function(T,e){if(!this._userPoints[T]){return}this._clearCache();this._userPoints[T]=new hu(e.lng,e.lat);this.points[T]=new hu(e.lng,e.lat);if(T===0&&!this.points[0].equals(this.points[this.points.length-1])){this.points[this.points.length-1]=new hu(e.lng,e.lat)}this._calcBounds();this.draw();var i=new bc("onlineupdate");i.overlay=this;this.dispatchEvent(i)},getFillStyleForGL:function(){var i=this._config.topFillColor.substr(1);var hU=this._config.topFillOpacity;var T=this._config.sideFillColor.substr(1);var hT=this._config.sideFillOpacity;var e;var hV;if(i.length===3){e=[parseInt(i.substr(0,1)+i.substr(0,1),16),parseInt(i.substr(1,1)+i.substr(1,1),16),parseInt(i.substr(2,1)+i.substr(2,1),16),hU*255]}else{e=[parseInt(i.substr(0,2),16),parseInt(i.substr(2,2),16),parseInt(i.substr(4,2),16),hU*255]}if(T.length===3){hV=[parseInt(T.substr(0,1)+T.substr(0,1),16),parseInt(T.substr(1,1)+T.substr(1,1),16),parseInt(T.substr(2,1)+T.substr(2,1),16),hT*255]}else{hV=[parseInt(T.substr(0,2),16),parseInt(T.substr(2,2),16),parseInt(T.substr(4,2),16),hT*255]}return{top:e,side:hV}},buildFillVertex:function(hV,ig){var hU=this.getParseCacheIndex(this.map.getZoom());if(this._areaCacheGL[hU]&&!ig){return this._areaCacheGL[hU]}var ij=this._getDisplayPixelsGL(this.points);if(ij.pointsArray&&ij.pointsArray.length<3){this._areaCacheGL[hU]={vertex:[],index:[]};return this._areaCacheGL[hU]}var id=this.getFillStyleForGL();var h6=id.top;var ia=id.side;var hZ=this._config.altitude;var io=[0,0,1];var h1=[];var T=[];var ic=0;for(var ih=0;ih<ij.length;ih++){if(ih>0){ic+=(ij[ih-1].length-1)*5}var h9=ij[ih].pointsArray;h9.splice(-2,2);var ip=this.getClockwise(h9);if(ip){h9=this.rev(h9)}for(var ik=0;ik<h9.length;ik+=2){h1.push([h9[ik],h9[ik+1],hZ,io[0],io[1],io[2],h6[0],h6[1],h6[2],h6[3]])}var e=hV(h9,null,null,ic);for(var ik=0,h4=e.length;ik<h4;ik+=3){T.push(e[ik],e[ik+1],e[ik+2])}for(var ik=0,ib=h9.length;ik<ib;ik+=2){var h0=h9[ik];var hY=h9[ik+1];var h8=[h0,hY,0];var h7=[h0,hY,hZ];var hT=ik+2;var hX=ik+3;if(ik===ib-2){hT=0;hX=1}var im=h9[hT];var il=h9[hX];var h5=[im,il,0];var h3=[im,il,hZ];var ii=[h5[0]-h8[0],h5[1]-h8[1],h5[2]-h8[2]];var ie=[h7[0]-h8[0],h7[1]-h8[1],h7[2]-h8[2]];var io=[];vec3.cross(io,ii,ie);h8.push(io[0],io[1],io[2]);h7.push(io[0],io[1],io[2]);h5.push(io[0],io[1],io[2]);h3.push(io[0],io[1],io[2]);h8.push(ia[0],ia[1],ia[2],ia[3]);h7.push(ia[0],ia[1],ia[2],ia[3]);h5.push(ia[0],ia[1],ia[2],ia[3]);h3.push(ia[0],ia[1],ia[2],ia[3]);var hW=h1.length;h1.push(h8);h1.push(h7);h1.push(h5);h1.push(h3);T.push(hW,hW+2,hW+3,hW,hW+3,hW+1)}}var h2={vertex:this.convertBuilding3dToTypedArray(h1),index:new Uint16Array(T)};this._areaCacheGL[hU]=h2;return h2},getClockwise:function(hZ){var hV=hZ.length;if(hV<6){return false}var hT=hZ[hV-2];var hY=hZ[hV-1];var T=hZ[0];var hX=hZ[1];var e=hZ[2];var hW=hZ[3];for(var hU=2;hU<hV;hU+=2){if(hZ[hU]>T){hT=hZ[hU-2];hY=hZ[hU-1];T=hZ[hU];hX=hZ[hU+1];if(hU+2>=hV){e=hZ[0];hW=hZ[1]}else{e=hZ[hU+2];hW=hZ[hU+3]}}}return((T-hT)*(hW-hX)-(hX-hY)*(e-T)<0)},rev:function(hT){var e=[];for(var T=hT.length-1;T>=0;T-=2){e[hT.length-1-T]=hT[T-1];e[hT.length-1-T+1]=hT[T]}return e},convertBuilding3dToTypedArray:function(hW){var T=hW.length;var hT=new Float32Array(T*7);var hV=new DataView(hT.buffer);var e=0;for(var hU=0;hU<hW.length;hU++){e=hU*7;hT[e+0]=hW[hU][0];hT[e+1]=hW[hU][1];hT[e+2]=hW[hU][2];hT[e+3]=hW[hU][3];hT[e+4]=hW[hU][4];hT[e+5]=hW[hU][5];hV.setUint8(e*4+24,hW[hU][6]);hV.setUint8(e*4+25,hW[hU][7]);hV.setUint8(e*4+26,hW[hU][8]);hV.setUint8(e*4+27,hW[hU][9])}return hT}});D.extend(dX.prototype,{initialize:function(e){x.prototype.initialize.call(this,e);return this.domElement},getFillStyleForGL:function(){if(!this._config.url){return}switch(this._config.type){case"image":var e={type:"image",texture:this._config.url,opacity:this._config.opacity};this._fillStyleInfoForGL=e;break;case"video":var e={type:"video",texture:this._config.url,opacity:this._config.opacity};this._fillStyleInfoForGL=e;break;case"canvas":var e={type:"canvas",texture:this._config.url,opacity:this._config.opacity};this._fillStyleInfoForGL=e;break}return this._fillStyleInfoForGL},buildFillVertex:function(hW){var hZ=[];var hY=this._getDisplayPixelsGL(this.points);var hU;var hV=[];var hT=0;for(var T=0;T<hY.length;T++){if(T>0){hT+=hY[T-1].length}hU=hW(hY[T].pointsArray,null,null,hT);for(var e=0,hX=hU.length;e<hX;e+=3){hZ.push(hU[e],hU[e+1],hU[e+2])}hV=hV.concat(hY[T].pointsArray)}var h0=[new Float32Array(hV),new Uint16Array(hZ)];return h0}});function cX(e){this._map=e;this._canvasAttrName={strokeweight:"lineWidth",strokecolor:"strokeStyle",fillcolor:"fillStyle",strokeopacity:"globalAlpha",fillopacity:"globalAlpha"};this._type="canvas"}cX.prototype=new dW();var b2=cX.prototype;b2.addLine=function(){var i=U("canvas");this._map.getPanes().mapPane.appendChild(i);i.style.position="absolute";var e=i.getContext("2d");e.lineCap="round";e.lineJoin="round";e.save();return i};b2.setPath=function(T,i){if(!T){return}var e=T.getContext("2d");this._setCanvasPosition(T);this._clearCanvas(e);var hU=parseInt(T.style.top);var hT=parseInt(T.style.left);e.beginPath();D.each(i,function(hX){if(hX.length===0){return}e.moveTo(hX[0].x-hT,hX[0].y-hU);for(var hW=1,hV=hX.length;hW<hV;hW++){e.lineTo(hX[hW].x-hT,hX[hW].y-hU)}});this._drawCanvas(T)};b2.setAttribute=function(hT,i,hU){if(!hT){return}var e=hT.getContext("2d");var T=this._getAttributeName(i);if(T){e[T]=hU}hT.setAttribute("_"+i,hU||"");e.save();this._clearCanvas(e);this._drawCanvas(hT)};b2._getAttributeName=function(e){return this._canvasAttrName[e]||e};b2._setCanvasPosition=function(hU){var i=this._map;var hZ=i.config.drawMargin;var T=i.width+2*hZ;var hW=i.height+2*hZ;var hT=-i.offsetX-hZ;var hV=-i.offsetY-hZ;var hY=hU.getContext("2d");var hX={strokeStyle:hY.strokeStyle,fillStyle:hY.fillStyle,globalAlpha:hY.globalAlpha,lineWidth:hY.lineWidth,lineCap:"round",lineJoin:"round"};hU.setAttribute("width",T);hU.setAttribute("height",hW);for(var e in hX){hY[e]=hX[e]}hY.save();var h0=hU.style;h0.top=hV+"px";h0.left=hT+"px"};b2._clearCanvas=function(e){e.clearRect(0,0,9999,9999)};b2._drawCanvas=function(i){var e=i.getContext("2d");e.globalAlpha=i.getAttribute("_fillopacity");if(e.globalAlpha!=0&&i.getAttribute("_fillcolor")){e.fill()}e.globalAlpha=i.getAttribute("_strokeopacity");if(e.globalAlpha!==0&&i.getAttribute("_strokecolor")){e.stroke()}};b2.addStandardCircle=function(){var i=U("canvas");this._map.getPanes().mapPane.appendChild(i);i.style.position="absolute";var e=i.getContext("2d");e.lineCap="round";e.lineJoin="round";e.save();return i};b2.setStandardCircleGeometry=function(hT,hW){if(!hT){return}var T=hT.getContext("2d");this._setCanvasPosition(hT);this._clearCanvas(T);var hV=parseInt(hT.style.top);var hU=parseInt(hT.style.left);var i=hW.cx-hU;var hX=hW.cy-hV;var e=hW.radius;T.beginPath();T.arc(i,hX,e,0,Math.PI*2);this._drawCanvas(hT)};function dW(){}DrawerPrototype=dW.prototype;DrawerPrototype.setPalette=function(){};DrawerPrototype.addLine=function(){throw"addLine接口没有实现"};DrawerPrototype.setAttribute=function(){throw"setAttribute接口没有实现"};DrawerPrototype.setPath=function(){throw"setPath接口没有实现"};DrawerPrototype.getType=function(){return this._type};var bx={getDrawer:function(e){if(e._renderType==="webgl"){return null}if(!bx["_"+e.hashCode]){bx["_"+e.hashCode]={}}switch(e.config.drawer){case BMAP_SVG_DRAWER:return bx.getSvgDrawer(e);case BMAP_VML_DRAWER:return bx.getVmlDrawer(e);case BMAP_CANVAS_DRAWER:return bx.getCanvasDrawer(e);default:break}if(bx.isSupportSvg()){return bx.getSvgDrawer(e)}if(bx.isSupportVml()){return bx.getVmlDrawer(e)}if(bx.isSupportCanvas()){return bx.getCanvasDrawer(e)}},getSvgDrawer:function(e){if(!bx["_"+e.hashCode]._svgDrawer){bx["_"+e.hashCode]._svgDrawer=new fV(e)}return bx["_"+e.hashCode]._svgDrawer},getVmlDrawer:function(e){if(!bx["_"+e.hashCode]._vmlDrawer){bx["_"+e.hashCode]._vmlDrawer=new hz(e)}return bx["_"+e.hashCode]._vmlDrawer},getCanvasDrawer:function(e){if(!bx["_"+e.hashCode]._canvasDrawer){bx["_"+e.hashCode]._canvasDrawer=new cX(e)}return bx["_"+e.hashCode]._canvasDrawer},isSupportVml:function(){if(typeof bx.supportVml!="undefined"){return bx.supportVml}var T=document.body.appendChild(U("div"));T.innerHTML=\'<v:shape id="vml_tester1" adj="1" />\';var i=T.firstChild;if(!i.style){return false}i.style.behavior="url(#default#VML)";var e=i?typeof i.adj=="object":true;T.parentNode.removeChild(T);bx.supportVml=e;return e},isSupportSvg:function(){if(typeof bx.supportSvg=="undefined"){bx.supportSvg=!!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Shape","1.1")}return bx.supportSvg},isSupportCanvas:function(){if(typeof bx.supportCanvas=="undefined"){bx.supportCanvas=!!U("canvas").getContext}return bx.supportCanvas}};bp.DrawerSelector=bx;function fV(e){this._map=e;this.SVG_NS="http://www.w3.org/2000/svg";this._svgAttrName={strokeweight:"stroke-width",strokecolor:"stroke",fillcolor:"fill",strokeopacity:"stroke-opacity",fillopacity:"fill-opacity",strokestyle:"stroke-dasharray",strokelinecap:"stroke-linecap",strokelinejoin:"stroke-linejoin"};this._svg=this._createSvg();this._type="svg"}fV.prototype=new dW();var bE=fV.prototype;bE._createSvg=function(){var e=this._svg=U("svg",{},this.SVG_NS);e.setAttribute("version","1.1");e.setAttribute("type","system");var i=e.style;i.position="absolute";i.MozUserSelect="none";this.setPalette();this._map.getPanes().mapPane.appendChild(e);return e};bE.setPalette=function(){if(!this._svg){return}var T=this._svg;var hX=this._map;var i=hX.config.drawMargin;var hU=hX.width+2*i;var e=hX.height+2*i;var hW=-hX.offsetX-i;var hV=-hX.offsetY-i;this.setAttribute(T,"x",hU+"px");this.setAttribute(T,"y",e+"px");this.setAttribute(T,"viewBox",hW+" "+hV+" "+hU+" "+e);var hT=T.style;hT.top=hV+"px";hT.left=hW+"px";hT.width=hU+"px";hT.height=e+"px"};bE.getPalette=function(){return this._svg};bE.setAttribute=function(hU,T,hV,hT,i){if(!hU){return}if(T==="strokestyle"){i=i||{};var hT=i.strokeWeight||4;var e=i.dashArray||null;switch(hV){case"dashed":if(e){hV=e.join(",")}else{hV=hT*2}break;case"dotted":if(i.strokeLineCap==="round"){hV="1,"+2*hT}else{hV=hT}break;default:hV=0;break}}var hW=hV||"none";if(hV===0){hW=0}hU.setAttributeNS(null,this._getAttributeName(T),hW);return hU};bE._getAttributeName=function(e){return this._svgAttrName[e]||e};bE.addLine=function(){var e=U("path",{},this.SVG_NS);this.setAttribute(e,"fill-rule","evenodd");this._svg.appendChild(e);return e};bE.setPath=function(T,e){var i=this._getPathString(e)||"M -9999,-9999";this.setAttribute(T,"d",i)};bE._getPathString=function(e){if(e.length===0){return""}var i=[];D.each(e,function(hU){if(hU.length<2){return}i.push("M "+hU[0].x+" "+hU[0].y+" L");for(var hT=1,T=hU.length;hT<T;hT++){i.push(hU[hT].x);i.push(hU[hT].y)}});return i.join(" ")};bE.addStandardCircle=function(){var e=U("circle",{},this.SVG_NS);this._svg.appendChild(e);return e};bE.setStandardCircleGeometry=function(T,hT){var i=hT.cx;var hU=hT.cy;var e=hT.radius;this.setAttribute(T,"cx",i);this.setAttribute(T,"cy",hU);this.setAttribute(T,"r",e)};function hz(e){this._map=e;this._vmlAttrName={strokeweight:"weight",strokecolor:"color",fillcolor:"color",strokeopacity:"opacity",fillopacity:"opacity",strokestyle:"dashstyle"};this._type="vml"}hz.prototype=new dW();var bj=hz.prototype;bj.setAttribute=function(T,e,hT){if(T){if(e.indexOf("stroke")==0){T=T.getElementsByTagName("stroke")[0]}else{if(e.indexOf("fill")==0){T=T.getElementsByTagName("fill")[0]}}if(e.indexOf("color")>0){if(!hT){T.on=false}else{T.on=true}}if(e=="strokestyle"){switch(hT){case"dashed":hT="4 2 1 2";break;case"dotted":hT="1 1";break;default:hT="solid";break}}if(e=="strokeweight"){hT=hT+"px"}var i=this._getAttributeName(e);T[i]=hT||""}};bj._getAttributeName=function(e){return this._vmlAttrName[e]||e};bj.addLine=function(){var e=[\'<v:shape style="behavior:url(#default#VML);z-index:1;width:1px;height:1px;position:absolute;left:0;top:0;"\',\'coordsize="1,1" coordorigin="0,0" filled="t" fillcolor="white">\',\'<v:stroke style="behavior:url(#default#VML);" endcap="round" oned="true" />\',\'<v:fill style="behavior:url(#default#VML);" />\',"</v:shape>"].join("");return dJ(this._map.getPanes().mapPane,e)};bj.setPath=function(i,e){this.setAttribute(i,"path",this._getPathString(e));if(D.Browser.ie==6){i.style.display="none";i.style.display=""}};bj._getPathString=function(e){if(e.length==0){return""}var i=[];D.each(e,function(hU){if(hU.length<2){return}i.push("m "+hU[0].x+" "+hU[0].y+" l");for(var hT=1,T=hU.length;hT<T;hT++){i.push(hU[hT].x);i.push(hU[hT].y)}i.push("e")});return i.join(" ")||" "};bj.addStandardCircle=function(){var e=[\'<v:oval style="behavior:url(#default#VML);z-index:1;width:1px;height:1px;position:absolute;left:0;top:0;">\',\'<v:stroke style="behavior:url(#default#VML);" endcap="round" oned="true" />\',\'<v:fill style="behavior:url(#default#VML);" />\',"</v:oval>"].join("");return dJ(this._map.getPanes().mapPane,e)};bj.setStandardCircleGeometry=function(T,hT){var i=hT.cx;var hU=hT.cy;var e=hT.radius;T.style.left=(i-e)+"px";T.style.top=(hU-e)+"px";T.style.width=(e*2)+"px";T.style.height=(e*2)+"px";if(D.Browser.ie===6){T.style.display="none";T.style.display=""}};');
﻿_jsload&&_jsload('mapgl', 'bp.register(function(T){if(T._renderType!=="webgl"||T._destroyed){return}T._webglMapCamera=new gh(T);var e=new ck(T,T._webglMapCamera);T._webglPainter=e;T._webglMapScene=new y(T,e);var i=new n(T);if(T.config.showControls===true){this._navigationCtrl=new eV(T)}T.fire(new bc("onglmoduleloaded"))});function gh(i){this._map=i;this._fovy=35;this._fovyRadian=this._fovy*Math.PI/180;this._projectionMatrix=mat4.create();this._modelViewMatrix=mat4.create();this._projectionMatrix3D=mat4.create();this._projectionMatrix3DInverse=mat4.create();this._projectionMatrix3D64=mat4.create(Float64Array);this._projectionMatrix3DInverse64=mat4.create(Float64Array);this._projectionMatrixLabel3D64=mat4.create(Float64Array);this._modelViewMatrix3D=mat4.create();this._modelViewMatrixLineLabel=mat4.create();this._modelViewMatrixMCPlane64=mat4.create(Float64Array);this._modelViewMatrixMCPlaneInverse64=mat4.create(Float64Array);this._modelViewMatrixMCPlane=mat4.create();this._modelViewMatrixMC3D=mat4.create();this._modelViewMatrixPoly=mat4.create();this._ray=new cc.Ray();this._tempV4=vec4.create(Float64Array);this._tempRes=vec4.create();this._tempNdc=vec4.create();this._near=10;this._far=4000;this._farLabel=2800;if(!this._map.config.restrictCenter){this._far=3000;var e=this._map.getSize();if(e.height>1500){this._far=e.height*2}this._farLabel=2000}this._frustumSideLen=this._far/Math.cos(this._fovyRadian);this._init()}D.extend(gh.prototype,{_init:function(){var e=this;e._renderTilt=e._getRenderTilt();e._updateSize();e._updateProjectionMatrix();e._updatePolyMatrix();e._updatePlaneMatrix();this._map.on("updateoverlaymatrix",function(i){e._updatePolyMatrix()})},update:function(T){var i=this;i._renderTilt=i._getRenderTilt();if("onsize_changed" in T.changedStatus){i._updateSize();i._updateProjectionMatrix()}i._updatePolyMatrix();i._updatePlaneMatrix()},_getRenderTilt:function(){var T=this._map;var e=T.getTilt();var i=T.getZoom();if(e!==0&&i<T._enableTiltZoom){if(i>=T._enableTiltZoom-2){e=(1-(T._enableTiltZoom-i)/2)*e}else{e=0}}return e},_updateSize:function(){var e=this._map.getSize();this._width=e.width;this._height=e.height;this._widthHeightRatio=this._width/this._height;this._translateZ=Math.round(-this._height/(2*Math.tan(this._fovyRadian/2)));this._farLabel=Math.abs(this._translateZ)+1400},_updateProjectionMatrix:function(){var i=this._map;var e=i.getSize();mat4.ortho(this._projectionMatrix,0,e.width,0,e.height,this._near,this._far);mat4.perspective(this._projectionMatrix3D64,this._fovyRadian,this._widthHeightRatio,this._near,this._far);mat4.invert(this._projectionMatrix3DInverse64,this._projectionMatrix3D64);this._projectionMatrix3D=mat4.clone(this._projectionMatrix3D64);this._projectionMatrix3DInverse=mat4.clone(this._projectionMatrix3DInverse64);mat4.perspective(this._projectionMatrixLabel3D64,this._fovyRadian,this._widthHeightRatio,this._near,this._farLabel)},getProjectionMatrix:function(){return this._projectionMatrix},getProjectionMatrix3D:function(){return this._projectionMatrix3D},getMCPlaneMVMatrix:function(){return this._modelViewMatrixMCPlane},getMC3DMVMatrix:function(){return this._modelViewMatrixMC3D},getModelViewMatrix3D:function(hT){var e=hT.col;var h6=hT.row;var h3=hT.zoom;var hZ=hT.loopOffsetX;var h5=hT.baseTileSize;var T=this._map;var hX=T.getZoom();mat4.identity(this._modelViewMatrix3D);var h4=T.getCenterIn();var h1=Math.pow(2,h3-18);var hY=hZ*h1;var h2=h4.lng*h1;var h0=h4.lat*h1;var hU=Math.pow(2,hX-h3);var hV=new ek(e*h5,h6*h5);var hW=this._modelViewMatrix3D;var i=this._translateZ;if(this._renderTilt!==0){mat4.translate(hW,hW,[0,0,i]);mat4.rotate(hW,hW,dL(this._renderTilt),[-1,0,0]);mat4.translate(hW,hW,[0,0,-i])}if(T._heading%360!==0){mat4.rotate(hW,hW,dL(T._heading),[0,0,-1])}mat4.translate(hW,hW,[0,0,i]);mat4.scale(hW,hW,[hU,hU,hU]);mat4.translate(hW,hW,[0,0,-i]);mat4.translate(hW,hW,[hV.x-h2+hY,hV.y-h0,i]);return this._modelViewMatrix3D},getModelViewMatrixForLineLabel:function(hT){var i=this._map;if(!i.loaded){return}var hW=this._modelViewMatrixLineLabel;mat4.identity(hW);var T=this._translateZ;var hZ=i.centerPoint;var hY=i.zoomLevel;var h0=i.getZoomUnits();var e=hT.col;var h3=hT.row;var h2=hT.baseTileSize;var hU=Math.pow(2,hY-hT.zoom);var hV={x:e*h2*hU,y:h3*h2*hU};var hX=[hV.x-hZ.lng/h0,hV.y-hZ.lat/h0,T];if(this._renderTilt!==0){mat4.translate(hW,hW,[0,0,T]);mat4.rotate(hW,hW,dL(this._renderTilt),[-1,0,0]);mat4.translate(hW,hW,[0,0,-T])}if(i._heading%360!==0){mat4.rotate(hW,hW,dL(i._heading),[0,0,-1])}mat4.translate(hW,hW,hX);var h1=Math.pow(2,hY-18);mat4.scale(hW,hW,[h1,h1,Math.pow(2,hY-20)]);return this._modelViewMatrixLineLabel},_updatePlaneMatrix:function(){var hX=this._map;if(!hX.loaded){return}var hU=this._modelViewMatrixMCPlane64;mat4.identity(hU);var hT=this._translateZ;var T=hX.centerPoint;var hW=hX.zoomLevel;var hV=hX.getZoomUnits();var i=[-T.lng/hV,-T.lat/hV,hT];if(this._renderTilt!==0){mat4.translate(hU,hU,[0,0,hT]);mat4.rotate(hU,hU,dL(this._renderTilt),[-1,0,0]);mat4.translate(hU,hU,[0,0,-hT])}if(hX._heading%360!==0){mat4.rotate(hU,hU,dL(hX._heading),[0,0,-1])}mat4.translate(hU,hU,i);var e=Math.pow(2,hW-18);mat4.scale(hU,hU,[e,e,Math.pow(2,hW-20)]);mat4.invert(this._modelViewMatrixMCPlaneInverse64,hU);this._modelViewMatrixMCPlane=mat4.clone(this._modelViewMatrixMCPlane64)},_updatePolyMatrix:function(){if(!this._map._polyOverlayBasePoint){return}var hX=this._map;var hW=hX.getZoom();mat4.identity(this._modelViewMatrixPoly);var hV=hX.getCenterIn();var i=Math.pow(2,hW-18);var e=hV.sub(hX._polyOverlayBasePoint).mult(i);var hT=this._translateZ;var T=this._modelViewMatrixPoly;if(this._renderTilt!==0){mat4.translate(T,T,[0,0,hT]);mat4.rotate(T,T,dL(this._renderTilt),[-1,0,0]);mat4.translate(T,T,[0,0,-hT])}if(hX._heading%360!==0){mat4.rotate(T,T,dL(hX._heading),[0,0,-1])}mat4.translate(T,T,[-e.lng,-e.lat,hT]);var hU=i;mat4.scale(T,T,[hU,hU,hU])},getModelViewMatrixPoly:function(){return this._modelViewMatrixPoly},castRay:function(T,hU){var i=this._ray;var e=T.x;var hX=T.y;var hT=vec3.create(Float64Array);var hV=vec4.set(this._tempV4,e,hX,-1,1);this._calcV4InCastRay(hV,hU);vec3.scale(hT,hV,1/hV[3]);var hW=vec3.create(Float64Array);hV=vec4.fromValues(e,hX,1,1,Float64Array);this._calcV4InCastRay(hV,hU);vec3.scale(hV,hV,1/hV[3]);vec3.sub(hW,hV,hT);vec3.normalize(hW,hW);i.set(hT,hW);return i},_calcV4InCastRay:function(hV,T){if(!T||!T.matrixInfo){mat4.multiply(hV,this._projectionMatrix3DInverse64,hV);mat4.multiply(hV,this._modelViewMatrixMCPlaneInverse64,hV)}else{if(T.matrixInfo){var e=T.matrixInfo.projectionMatrix;var hT=mat4.create(Float64Array);if(e){mat4.invert(hT,e)}else{hT=this._projectionMatrix3DInverse64}var i=T.matrixInfo.modelViewMatrix;var hU=mat4.create(Float64Array);if(i){mat4.invert(hU,i)}else{hU=this._projectionMatrix3DInverse64}mat4.multiply(hV,hT,hV);mat4.multiply(hV,hU,hV)}}},fromXYZToNDC:function(hW,hU,T,hY){var hT=vec4.set(this._tempV4,hW,hU,T,1);var i=this._tempRes;hY=hY||{};var e=this._modelViewMatrixMCPlane64;var hV=this._projectionMatrix3D64;if(hY.matrixInfo){e=hY.matrixInfo.modelViewMatrix||e;hV=hY.matrixInfo.projectionMatrix||hV}mat4.multiply(i,e,hT);mat4.multiply(i,hV,i);var hX=vec4.set(this._tempNdc,i[0]/i[3],i[1]/i[3],i[2]/i[3],1);hX.outOfFrustum=false;if(hY.frustumTest){if(i[0]<-i[3]||i[0]>i[3]||i[1]<-i[3]||i[1]>i[3]||i[2]<-i[3]||i[2]>i[3]){hX.outOfFrustum=true}}hX.w=i[3];return hX},fromMCToScreenPixel:function(hU,hT,h0){h0=h0||{};var T={matrixInfo:{}};if(h0.center||h0.zoom||typeof h0.heading==="number"||typeof h0.tilt==="number"){var hX=h0.zoom||this._map.zoomLevel;var e=h0.center||this._map.centerPoint;var hZ=typeof h0.heading==="number"?h0.heading:this._map.getHeading();var hY=typeof h0.tilt==="number"?h0.tilt:this._renderTilt;T.matrixInfo.modelViewMatrix=this.generateMVMatrix(e,hX,hZ,hY)}T.frustumTest=h0.frustumTest;if(h0.forLabel){T.matrixInfo.projectionMatrix=this._projectionMatrixLabel3D64}var hW=h0.height||0;var hV=this.fromXYZToNDC(hU,hT,hW,T);if(!hV){return null}var i=new ek(((hV[0]+1)*this._map.width/2),((1-hV[1])*this._map.height/2));i.depth=(hV[2]+1)*0.5;i.w=hV.w;i.outOfFrustum=hV.outOfFrustum;return i},fromScreenPixelToMC:function(h0,hW,h6){var hZ=h0*2/this._map.width-1;var hX=1-hW*2/this._map.height;h6=h6||{};var T=null;if(h6.zoom||h6.center||typeof h6.heading==="number"||typeof h6.tilt==="number"){var i=this._map;var h3=h6.zoom||i.zoomLevel;var e=h6.center||i.centerPoint;var h5=typeof h6.heading==="number"?h6.heading:i.getHeading();var h2=typeof h6.tilt==="number"?h6.tilt:this._renderTilt;T={matrixInfo:{modelViewMatrix:this.generateMVMatrix(e,h3,h5,h2)}}}var hY=this.castRay(new ek(hZ,hX),T);var hT=vec3.fromValues(0,0,1,Float64Array);var hV=vec3.dot(hT,hY.origin);var hU=vec3.dot(hT,hY.direction);var h1=-hV/hU;var h4=vec3.create(Float64Array);vec3.scaleAndAdd(h4,hY.origin,hY.direction,h1);h4[0]=Math.round(h4[0]*100000)/100000;h4[1]=Math.round(h4[1]*100000)/100000;return new hu(h4[0],h4[1])},generateMVMatrix:function(e,hX,hZ,hY){var i=this._map;if(!i.loaded){return}e=e||i.centerPoint;hX=hX||i.zoomLevel;hZ=typeof hZ==="number"?hZ:i._heading;hY=typeof hY==="number"?hY:this._renderTilt;var hT=mat4.create(Float64Array);mat4.identity(hT);var T=this._translateZ;var hV=i.getZoomUnits(hX);var hU=[-e.lng/hV,-e.lat/hV,T];if(hY!==0){mat4.translate(hT,hT,[0,0,T]);mat4.rotate(hT,hT,dL(hY),[-1,0,0]);mat4.translate(hT,hT,[0,0,-T])}if(hZ%360!==0){mat4.rotate(hT,hT,dL(hZ),[0,0,-1])}mat4.translate(hT,hT,hU);var hW=Math.pow(2,hX-18);mat4.scale(hT,hT,[hW,hW,1]);return hT},getPosition:function(e){e=e||this._modelViewMatrixMCPlaneInverse64;return vec3.transformMat4(vec3.create(Float64Array),vec3.fromValues(0,0,0,Float64Array),e)}});function y(i,e){this._map=i;this._camera=i._webglMapCamera;this._painter=e;this._changedStatus={};this._statusChanged=false;this._rAFStarted=false;this._enabled=true;if(i.getMapType()==="B_EARTH_MAP"){this._enabled=false}this._onEachFrame=(function(T){return function(){T._updateFrame()}})(this);this._init()}D.extend(y.prototype,{_init:function(){this._fpsStarted=false;this._mapStatusIdle=true;this._bind();this._statusChanged=true;this.startRenderThread();var e=new ct();var T=this;var hT=this._map;hT.on("movestart",function(){if(T._fpsStarted){return}T._fpsStarted=true;e.startFPS()});hT.on("moveend",function(){if(!T._fpsStarted){return}T._fpsStarted=false;e.stopFPS()});hT.on("zoomstart",function(){if(T._fpsStarted){return}T._fpsStarted=true;e.startFPS()});hT.on("zoomend",function(){if(!T._fpsStarted){return}T._fpsStarted=false;e.stopFPS()});function i(){if(!e.fpsStarted){return}if(hT.getMapType()!=="B_NORMAL_MAP"){return}var hW=e.getAverageFPS();var hV=e.getHigherAverageFPS();var hU=new bc("onfpsdata_ready");hU.fps=hW;hU.fpsH=hV;hT.fire(hU);e.clearFPSData()}setTimeout(i,5000);setInterval(i,10000)},_bind:function(){var hT=this._map;var e=this;function hV(hW){e._changedStatus[hW.type]=hW||true;e._statusChanged=true;e.startRenderThread()}hT.on("zoom_changed",hV);hT.on("center_changed",hV);hT.on("heading_changed",hV);hT.on("tilt_changed",hV);hT.on("size_changed",hV);hT.on("displayoptions_changed",hV);hT.on("mapglidle_inner",function(){cancelAnimationFrame(e.renderTimer);e._rAFStarted=false;this.fire(new bc("onrenderthreadstop"));this.fire(new bc("onmapglidle"));e.renderTimer=null});var T=function(hW){e.startRenderThread()};hT.on("refresh",T);function hU(){if(this.mapType==="B_EARTH_MAP"){e._enabled=false;cancelAnimationFrame(e.renderTimer);e._rAFStarted=false;hT.fire(new bc("onrenderthreadstop"));e.renderTimer=null}else{e._enabled=true;e.startRenderThread()}}hT.on("maptypechange",hU);function i(){if(document.hidden){cancelAnimationFrame(e.renderTimer)}else{e.startRenderThread()}}document.addEventListener("visibilitychange",i,false);hT.on("destroy",function(){this.off("zoom_changed",hV);this.off("center_changed",hV);this.off("heading_changed",hV);this.off("tilt_changed",hV);this.off("size_changed",hV);this.off("displayoptions_changed",hV);this.off("refresh",T);this.off("maptypechange",hU);document.removeEventListener("visibilitychange",i,false);cancelAnimationFrame(this.renderTimer)})},startRenderThread:function(){if(!this._enabled){return}var T=this;if(T.idleTimer){clearTimeout(T.idleTimer)}T.idleTimer=setTimeout(function i(){T._map.fire(new bc("onmapglidle_inner"));T.idleTimer=null},200);if(T._statusChanged===true){if(T._mapStatusIdle===true){T._mapStatusIdle=false;T._map.fire(new bc("onmapstatusbusy_inner"))}if(T.statusIdleTimer){clearTimeout(T.statusIdleTimer)}T.statusIdleTimer=setTimeout(function e(){T._mapStatusIdle=true;T._map.fire(new bc("onmapstatusidle_inner"));T.statusIdleTimer=null},100)}if(this._rAFStarted===true){return}this._rAFStarted=true;this.renderTimer=requestAnimationFrame(this._onEachFrame)},_updateFrame:function(){this.renderTimer=requestAnimationFrame(this._onEachFrame);this._map.fire(new bc("onbeforeupdateframe"));if(this._rAFStarted===false){cancelAnimationFrame(this.renderTimer);return}var T=fC();if(this._statusChanged){this._statusChanged=false;var e=new bc("onupdate");e.changedStatus=this._changedStatus;if(this._changedStatus.onsize_changed){this._resizeMap(this._changedStatus.onsize_changed.oldSize)}this._camera.update(e);this._map.fire(e);this._changedStatus={}}this._painter.draw({idle:this._mapStatusIdle});var hT=fC()-T;var i=new bc("onupdateframe");i.frameTime=hT;this._map.fire(i)},_resizeMap:function(e){var T=this._map;var hT=T.getSize();var hY=(hT.width-e.width)/2;var hV=(hT.height-e.height)/2;var i=hY;var hW=hV;if(T._heading!==0){var h0=dL(T._heading);i=Math.abs(Math.cos(h0)*hY)+Math.abs(Math.sin(h0)*hV);hW=Math.abs(Math.sin(h0)*hY)+Math.abs(Math.cos(h0)*hV)}var hX=T.getZoomUnits();var hZ=T.centerPoint;if(hZ&&!T.config.enableResizeOnCenter){if(T._heading%360!==0||T._tilt>0){var hU=new ek(hT.width/2,hT.height/2);T.centerPoint=T.restrictCenter(T.pixelToPointIn(hU))}else{T.centerPoint=T.restrictCenter(new hu(hZ.lng+i*hX,hZ.lat-hW*hX))}}}});function ct(){this._fps=0;this.preFrameTimeStamp=Date.now();this.currentTime=null;this.fpsArr=[];this.averageFPS=0;this.higherAverageFPS=0;this.averageTimeInterval=20;this.fpsStarted=false}ct.prototype.startFPS=function(){this.fpsStarted=true;this.preFrameTimeStamp=Date.now();this.initFPS()};ct.prototype.initFPS=function(){this._fps++;this.currentTime=Date.now();if(this.currentTime-this.preFrameTimeStamp>500){var i=this._fps*2;i=i>60?60:i;this.fpsArr.push(i);if(this.fpsArr.length===this.averageTimeInterval){this._calcAverageFPS()}this._fps=0;this.preFrameTimeStamp=this.currentTime}var e=this;this.timer=requestAnimationFrame(function(){e.initFPS()})};ct.prototype._calcAverageFPS=function(){if(this.fpsArr.length===0){return}var hT=0;var e=0;this.fpsArr.sort(function(hV,i){return i-hV});var hU=Math.round(this.fpsArr.length*0.8);for(var T=0;T<this.fpsArr.length;T++){if(T===hU){e=hT}hT+=this.fpsArr[T]}this.averageFPS=Math.round(hT/this.fpsArr.length);this.higherAverageFPS=Math.round(e/hU);this.fpsArr=[]};ct.prototype.getAverageFPS=function(){if(this.averageFPS===0){this._calcAverageFPS()}return this.averageFPS};ct.prototype.getHigherAverageFPS=function(){if(this.higherAverageFPS===0){this._calcAverageFPS()}return this.higherAverageFPS};ct.prototype.stopFPS=function(){if(this.timer){cancelAnimationFrame(this.timer);this.timer=null;if(this._fps!==0){var e=this.currentTime-this.preFrameTimeStamp;var i=this._fps*1000/e;i=i>60?60:i;this.fpsArr.push(i);this._fps=0}}};ct.prototype.clearFPSData=function(){this.averageFPS=0;this.higherAverageFPS=0;this.fpsStarted=false};var hO=(function(){var e={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],\'"\':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],"$":[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],"0":[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],"1":[20,[6,17,8,18,11,21,11,0]],"2":[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],"3":[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],"4":[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],"5":[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],"6":[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],"7":[20,[17,21,7,0,-1,-1,3,21,17,21]],"8":[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],"9":[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]};return function(h4,T,h0,hU){hU=hU||1;var hW=[];var hY;var hZ;var hX;var hV;var h1;var h3;var h2;var hT;for(hY=0,hZ=h4.length;hY<hZ;hY++){h1=e[h4[hY]];if(!h1){continue}hT=null;for(hX=0,hV=h1[1].length;hX<hV;hX+=2){if(h1[1][hX]===-1&&h1[1][hX+1]===-1){hT=null}else{h3=T+h1[1][hX]*hU;h2=h0-h1[1][hX+1]*hU;if(hT){hW.push(hT.x,hT.y,h3,h2)}hT={x:h3,y:h2}}}T+=h1[0]*hU}return hW}})();var K={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Float32:"FLOAT"};var O={Int8:1,Uint8:1,Int16:2,Uint16:2,Float32:4};function fj(hT,hV,T,hU){this.arrayBuffer=hT;this.attributes=hV.members;this.bytesPerElement=0;if(this.attributes){for(var e=0;e<this.attributes.length;e++){this.bytesPerElement+=O[this.attributes[e].type]*this.attributes[e].components}}else{this.bytesPerElement=hT.BYTES_PER_ELEMENT*hV.components}this.length=hU||hT.byteLength/this.bytesPerElement;this.type=T;this.arrayType=hV}fj.prototype.bind=function(i){var e=i[this.type];if(!this.buffer){this.buffer=i.createBuffer();i.bindBuffer(e,this.buffer);i.bufferData(e,this.arrayBuffer,i.STATIC_DRAW);this.arrayBuffer=null}else{i.bindBuffer(e,this.buffer)}};fj.prototype.setVertexAttribPointers=function(hT,e){for(var i=0;i<this.attributes.length;i++){var hU=this.attributes[i];var T=e.attributes[hU.name];hT.vertexAttribPointer(T,hU.components,hT[K[hU.type]],hU.normalize,this.bytesPerElement,hU.offset)}};fj.prototype.updateVertexData=function(hT,i,T){this.arrayBuffer=i;if(!this.buffer){return this.bind(hT)}if(T<=this.length){var e=hT[this.type];hT.bindBuffer(e,this.buffer);hT.bufferData(e,this.arrayBuffer,hT.STATIC_DRAW)}else{this.destroy(hT);this.bind(hT)}this.length=T};fj.prototype.destroy=function(e){if(this.buffer){e.deleteBuffer(this.buffer);this.buffer=null}};fj.BufferType={VERTEX:"ARRAY_BUFFER",ELEMENT:"ELEMENT_ARRAY_BUFFER"};fj.ELEMENT_ATTRIBUTE_TYPE="Uint16";fj.VERTEX_ATTRIBUTE_ALIGNMENT=4;function ht(){this.boundProgram=null;this.boundVertexBuffer=null;this.boundElementBuffer=null;this.vao=null}ht.prototype.bind=function(hX,e,hT,hW){var hU=hX.extVertexArrayObject;if(hU===undefined){hU=hX.extVertexArrayObject=hX.getExtension("OES_vertex_array_object")}if(hU){if(!this.vao){this.vao=hU.createVertexArrayOES()}hU.bindVertexArrayOES(this.vao)}else{}if(!this.boundProgram){var hY=hU?0:(hX.currentNumAttributes||0);var hV=e.numAttributes;var T;for(T=hY;T<hV;T++){hX.enableVertexAttribArray(T)}if(!hU){for(T=hV;T<hY;T++){hX.disableVertexAttribArray(T)}hX.currentNumAttributes=hV}hT.bind(hX);hT.setVertexAttribPointers(hX,e);if(hW){hW.bind(hX)}if(hU){this.boundProgram=e;this.boundVertexBuffer=hT;this.boundElementBuffer=hW}}};ht.prototype.update=function(hX,hT,T,hW,e,i,hV){var hU=hX.extVertexArrayObject;if(hU===undefined){hU=hX.extVertexArrayObject=hX.getExtension("OES_vertex_array_object")}if(hU){hU.bindVertexArrayOES(this.vao);if(this.boundVertexBuffer){this.boundVertexBuffer.updateVertexData(hX,T,hW);this.boundVertexBuffer.setVertexAttribPointers(hX,this.boundProgram)}if(e&&this.boundElementBuffer){this.boundElementBuffer.updateVertexData(hX,i,hV)}}else{hT.updateVertexData(hX,T,hW);if(e){e.updateVertexData(hX,i,hV)}}};ht.prototype.unbind=function(i){var e=i.extVertexArrayObject;if(e){e.bindVertexArrayOES(null);this.boundProgram=null;this.boundVertexBuffer=null;this.boundElementBuffer=null}};ht.prototype.destroy=function(i){var e=i.extVertexArrayObject;if(e&&this.vao){e.deleteVertexArrayOES(this.vao);this.vao=null;this.boundProgram=null;this.boundVertexBuffer=null;this.boundElementBuffer=null}};function hC(i,hV,e,hU,hT){var hW=i.gl;var T=i.programMgr.useProgram("block");e.vao1.bind(hW,T,e.vertex,e.element1);hW.uniformMatrix4fv(T.uniforms.u_mv_matrix,false,hV.mvMatrix);if(hU){mat4.invert(i.normalMatrix,hV.mvMatrix);mat4.transpose(i.normalMatrix,i.normalMatrix)}hW.uniformMatrix4fv(T.uniforms.u_normal_matrix,false,i.normalMatrix);hW.drawElements(hW.TRIANGLES,e.element1.length,hW.UNSIGNED_SHORT,0)}function eh(e,T,hT){var hU=e.gl;var i=e.programMgr.useProgram("block");hU.uniform3fv(i.uniforms.u_side_light_dir,T);hU.uniform1i(i.uniforms.u_is_normal,hT);if(!i.lastState.projMatrix){hU.uniformMatrix4fv(i.uniforms.u_proj_matrix,false,e.projMatrix);i.lastState.projMatrix=true}var hV=e._camera._far||4000;if(i.lastState.cameraFar!==hV){hU.uniform1f(i.uniforms.u_camera_far,hV);i.lastState.cameraFar=hV}}function ab(hX,hW,e,hY){var hV=hX.gl;var hU=hX.programMgr.useProgram("shadow");hV.uniformMatrix4fv(hU.uniforms.u_mv_matrix,false,hW.mvMatrix);if(typeof e.length==="number"){for(var hT=0;hT<e.length;hT++){var hZ=e[hT];var T=hY[hT];if(T.type==="fill"){hZ.vao1.bind(hV,hU,hZ.vertex,hZ.element1);hV.drawElements(hV.TRIANGLES,hZ.element1.length,hV.UNSIGNED_SHORT,0)}}}else{e.vao1.bind(hV,hU,e.vertex,e.element1);hV.drawElements(hV.TRIANGLES,e.element1.length,hV.UNSIGNED_SHORT,0)}}function cB(i,e){var hT=i.gl;var T=i.programMgr.useProgram("shadow");hT.uniform3fv(T.uniforms.u_light_dir,e);if(!T.lastState.projMatrix){hT.uniformMatrix4fv(T.uniforms.u_proj_matrix,false,i.projMatrix);T.lastState.projMatrix=true}var hU=i._camera._far||4000;if(T.lastState.cameraFar!==hU){hT.uniform1f(T.uniforms.u_camera_far,hU);T.lastState.cameraFar=hU}}var cD=(function(){var i=new Image();var e=false;i.onload=function(){e=true};i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAUdJREFUeNrs2sENwyAQRcE4ckf0RBv04Z7ck30wFXBi/4wU5bScXhQk9hhj9B+xzu/7WjijvZ/b/Jbz/e83kE0AAkAACAABIAAEgAAQAAJAAAgAAVDYfA5ui+eY33R+BuA9PXO++QtwB0AACAABIAAEgAAQAAJAAAgAASAAqrIPED5vH8A+AO4ACAABIAAEgAAQAAJAAAgAASAABEBJ9gHC5+0D2AfAHQABIAAEgAAQAAJAAAgAASAABIAAKMk+QPi8fQD7ALgDIAAEgAAQAAJAAAgAASAABIAAEAAl2QcIn7cPYB8AdwAEgAAQAAJAAAgAASAABIAAEAACoCT7AOHz9gHsA+AOgAAQAAJAAAgAASAABIAAEAACQACUZB8gfN4+gH0A3AEQAAJAAAgAASAABIAAEAACQABUNV8D++I5nmM3nX8EGADa0U/2xPbBVwAAAABJRU5ErkJggg==";function T(hT,hU){if(!hT._gridTexture){hT._gridTexture=hU.createTexture();hU.bindTexture(hU.TEXTURE_2D,hT._gridTexture);hU.texParameteri(hU.TEXTURE_2D,hU.TEXTURE_WRAP_S,hU.REPEAT);hU.texParameteri(hU.TEXTURE_2D,hU.TEXTURE_WRAP_T,hU.REPEAT);hU.texParameteri(hU.TEXTURE_2D,hU.TEXTURE_MIN_FILTER,hU.LINEAR_MIPMAP_LINEAR);hU.texParameteri(hU.TEXTURE_2D,hU.TEXTURE_MAG_FILTER,hU.LINEAR);hU.texImage2D(hU.TEXTURE_2D,0,hU.RGBA,hU.RGBA,hU.UNSIGNED_BYTE,i);hU.generateMipmap(hU.TEXTURE_2D)}else{hU.bindTexture(hU.TEXTURE_2D,hT._gridTexture)}}return function(hT,hV,hW){if(!e){return}var hX=hT.gl;var hU=hT.programMgr.useProgram("grid");if(!hU.lastState.projMatrix){hX.uniformMatrix4fv(hU.uniforms.u_proj_matrix,false,hT.projMatrix);hU.lastState.projMatrix=true}hX.uniformMatrix4fv(hU.uniforms.u_mv_matrix,false,hV);hT._state.activeTexture(hX.TEXTURE0);T(hT,hX);if(hU.uniforms.lastSampler!==0){hX.uniform1i(hU.uniforms.u_image,0);hU.uniforms.lastSampler=0}if(hU.uniforms.lastTexScale!==hW){hX.uniform1f(hU.uniforms.u_tex_scale,hW);hU.uniforms.lastTexScale=hW}hT.gridVAO.bind(hX,hU,hT.gridBuffer);hX.drawArrays(hX.TRIANGLE_STRIP,0,hT.gridBuffer.length)}})();var cy=(function(){var hT={};function i(hV,hZ,hY,hU,hX){var h0=hV.gl;var hW=hV.programMgr.useProgram("overlayfill");h0.uniform4fv(hW.uniforms.u_color,hX);hU.vao1.bind(h0,hW,hU.vertex,hU.element1);if(!hW.lastState.projMatrix){h0.uniformMatrix4fv(hW.uniforms.u_proj_matrix,false,hV.projMatrix);hW.lastState.projMatrix=true}h0.uniformMatrix4fv(hW.uniforms.u_mv_matrix,false,hZ);h0.drawElements(h0.TRIANGLES,hU.element1.length,h0.UNSIGNED_SHORT,0);if(window.global_lines){h0.uniform4fv(hW.uniforms.u_color,[1,0,0,1]);h0.drawElements(h0.LINE_STRIP,hY[2].length,h0.UNSIGNED_SHORT,0)}}function e(hW,hZ,hY,hV,hU){var h0=hW.gl;var hX=hW.programMgr.useProgram("fill");hV.vao1.bind(h0,hX,hV.vertex,hV.element1);if(!hX.lastState.projMatrix){h0.uniformMatrix4fv(hX.uniforms.u_proj_matrix,false,hW.projMatrix);hX.lastState.projMatrix=true}if(hX.lastState.isFlat!==hW.isFlat){h0.uniform1i(hX.uniforms.u_flat,hW.isFlat);hX.lastState.isFlat=hW.isFlat}if(hX.lastState.drawPart!==hU){h0.uniform1i(hX.uniforms.u_draw_part,hU);hX.lastState.drawPart=hU}var h1=hW._camera._far||4000;if(hX.lastState.cameraFar!==h1){h0.uniform1f(hX.uniforms.u_camera_far,h1);hX.lastState.cameraFar=h1}h0.uniformMatrix4fv(hX.uniforms.u_mv_matrix,false,hZ);h0.drawElements(h0.TRIANGLES,hV.element1.length,h0.UNSIGNED_SHORT,0)}return function T(hZ,hY,hX,hV,h1,h3){h3=h3||{};if(!h1){var h0=h3.drawPart||0;e(hZ,hY.mvMatrix,hX,hV,h0);return}var hW=hZ.gl;var h2=hZ._state;if(h3.usePolygonStencil&&h3.drawPolygonPass===1){hU=[1,1,1,255];hW.clear(hW.STENCIL_BUFFER_BIT);hW.stencilFunc(hW.NEVER,0,255);h2.stencilOp(hW.INVERT,hW.INVERT,hW.INVERT);hW.stencilMask(255);h2.colorMask(false,false,false,false);i(hZ,hY.mvMatrix,hX,hV,hU);return}if(h3.usePolygonStencil&&h3.drawPolygonPass===2){hW.stencilFunc(hW.EQUAL,255,255);hW.stencilMask(0);h2.stencilOp(hW.KEEP,hW.KEEP,hW.KEEP);h2.colorMask(true,true,true,true)}var hU=hT[hX[0]];if(!hU){hU=hX[0].split(",");hU=[hU[0]/255,hU[1]/255,hU[2]/255,parseFloat(hU[3])];hT[hX[0]]=hU}i(hZ,hY.mvMatrix,hX,hV,hU);if(h3.usePolygonStencil){hW.clear(hW.STENCIL_BUFFER_BIT);hW.stencilMask(255);hW.stencilFunc(hW.ALWAYS,1,255)}}})();var bv=(function(){function i(hZ,hT,hY,h2,h0,h1){if(hT.element1&&hT.element1.length===0){return}var hV=hZ.gl;var hU=hZ.programMgr.useProgram("line");if(!hU.lastState.projMatrix){hV.uniformMatrix4fv(hU.uniforms.u_proj_matrix,false,hZ.projMatrix);hU.lastState.projMatrix=true}hV.uniformMatrix4fv(hU.uniforms.u_mv_matrix,false,hY);var T;if(h2){T=hZ.polyZoomRatio}else{T=hZ.tileScale}if(hU.lastState.scale!==T){hV.uniform1f(hU.uniforms.u_scale,T);hU.lastState.scale=T}var hW=h1?false:hZ.isFlat;if(hU.lastState.isFlat!==hW){hV.uniform1i(hU.uniforms.u_flat,hW);hU.lastState.isFlat=hW}if(hU.lastState.drawPart!==h0){hV.uniform1i(hU.uniforms.u_draw_part,h0);hU.lastState.drawPart=h0}var hX=hZ._camera._far||4000;if(hU.lastState.cameraFar!==hX){hV.uniform1f(hU.uniforms.u_camera_far,hX);hU.lastState.cameraFar=hX}hT.vao1.bind(hV,hU,hT.vertex,hT.element1);hV.drawElements(hV.TRIANGLES,hT.element1.length,hV.UNSIGNED_SHORT,0)}function e(id,ig,ih,h5,h6,h9,h7,ic,hY){var h8=id.gl;var hX=id.programMgr.useProgram("dash");var h4=ih.texture;if(!id._dashLineTextures){id._dashLineTextures={}}var h1;var hU=h8.REPEAT;var ia;if(h9&&ih.overlay){ia=ih.overlay}if(h4 instanceof HTMLCanvasElement){if(!ih.glTexture){if(ia&&ia._config.textureRepeat===false){hU=h8.CLAMP_TO_EDGE}ih.glTexture=cc.utils.createTexture(h8,h4,{flipY:false,wrap:hU,mipmap:true,unpackAlpha:true})}h1=ih.glTexture}else{var hT=id._dashLineTextures;if(!hT[h4]){hT[h4]={status:"init"};var ii=new Image();ii.crossOrigin="anonymous";if(ia&&ia._config.textureRepeat===false){hU=h8.CLAMP_TO_EDGE}ii.onload=function(){hT[h4].texture=cc.utils.createTexture(h8,this,{flipY:false,wrap:hU,mipmap:true,unpackAlpha:true});hT[h4].status="done";id._map.fire(new bc("onrefresh"))};if(!h9){ii.src=e4.getIconSetPath(id._map.config.style)+h4}else{ii.src=h4}}if(hT[h4].status!=="done"){return}h1=hT[h4].texture}if(!hX.lastState.projMatrix){h8.uniformMatrix4fv(hX.uniforms.u_proj_matrix,false,id.projMatrix);hX.lastState.projMatrix=true}var h0=ic?false:id.isFlat;if(hX.lastState.isFlat!==h0){h8.uniform1i(hX.uniforms.u_flat,h0);hX.lastState.isFlat=h0}h8.uniformMatrix4fv(hX.uniforms.u_mv_matrix,false,h6);id._state.activeTexture(h8.TEXTURE6);h8.bindTexture(h8.TEXTURE_2D,h1);if(hX.uniforms.lastSampler!==6){h8.uniform1i(hX.uniforms.u_image,6);hX.uniforms.lastSampler=6}var hV=ih.textureSize;var T=ih.lineWidth;var hW=ih.isSingle?true:false;var ie;if(hW){ie=1}else{var ib;id._state.blendFunc(h8.ONE,h8.ONE_MINUS_SRC_ALPHA);if((!ih.zoomWithMap&&!h9)||h9){ie=id.tileScale;var h2=1;if(/ditie/.test(h4)){h2=1}if(/shengjie/.test(h4)){h2=1.2;if(hY<=7){h2=0.8}}if(h9){id._state.blendFunc(h8.ONE,h8.ONE_MINUS_SRC_ALPHA);ie=id.polyZoomRatio;ib=ia._totalDashLen;var h3=18;if(!ih.zoomWithMap){h3=id._map.getZoom()}if(hX.lastState.stepZoom!==h3){h8.uniform1f(hX.uniforms.u_step_zoom,h3);hX.lastState.stepZoom=h3}}else{ie=id.tileScale;ib=hV[1]*h2/id.tileScaleFromStart;if(hX.lastState.stepZoom!==id.stepZoom){h8.uniform1f(hX.uniforms.u_step_zoom,id.stepZoom);hX.lastState.stepZoom=id.stepZoom}}}else{ie=0.5;ib=hV[1]/hV[0]*T/2;if(hX.lastState.stepZoom!==ig.tileInfo.useZoom){h8.uniform1f(hX.uniforms.u_step_zoom,ig.tileInfo.useZoom);hX.lastState.stepZoom=ig.tileInfo.useZoom}}if(hX.lastState.dash!==ib){h8.uniform1f(hX.uniforms.u_dash,ib);hX.lastState.dash=ib}if(!h9){if(hX.lastState.tileZoom!==ig.tileInfo.useZoom){h8.uniform1f(hX.uniforms.u_tile_zoom,ig.tileInfo.useZoom);hX.lastState.tileZoom=ig.tileInfo.useZoom}}else{if(hX.lastState.tileZoom!==18){h8.uniform1f(hX.uniforms.u_tile_zoom,18);hX.lastState.tileZoom=18}}}if(hX.lastState.scale!==ie){h8.uniform1f(hX.uniforms.u_scale,ie);hX.lastState.scale=ie}if(hX.lastState.isSingle!==hW){h8.uniform1f(hX.uniforms.u_is_single,hW);hX.lastState.isSingle=hW}if(hX.lastState.drawPart!==h7){h8.uniform1i(hX.uniforms.u_draw_part,h7);hX.lastState.drawPart=h7}var hZ=id._camera._far||4000;if(hX.lastState.cameraFar!==hZ){h8.uniform1f(hX.uniforms.u_camera_far,hZ);hX.lastState.cameraFar=hZ}h5.vao1.bind(h8,hX,h5.vertex,h5.element1);h8.drawElements(h8.TRIANGLES,h5.element1.length,h8.UNSIGNED_SHORT,0);id._state.blendFunc(h8.SRC_ALPHA,h8.ONE_MINUS_SRC_ALPHA,h8.ONE,h8.ONE_MINUS_SRC_ALPHA)}return function(hW,hV,hU,T,hZ,h0){if(!T){return}if(hZ){for(var hT=0;hT<T.length;hT++){if(hU[hT].texture){e(hW,hV,hU[hT],T[hT],hV.mvMatrix,true)}else{i(hW,T[hT],hV.mvMatrix,true)}}}else{h0=h0||{};var hX=h0.drawPart||0;var hY=h0.force3D||false;if(hU.texture){e(hW,hV,hU,T,hV.mvMatrix,false,hX,hY,hV.tileInfo.zoom)}else{i(hW,T,hV.mvMatrix,false,hX,hY)}}}})();var cb=(function(){var T=mat4.create();var i=vec3.create();function e(h9,h8,ic,h5,h1,hU,ib,hW,hT,h3,h2,hZ,h4,h6,hV,hY){var h7=h9.gl;var h0=h9.programMgr.useProgram("symbol");hW=hW||0;hT=hT||0;h2=h2||0;h6=h6||T;h7.uniformMatrix4fv(h0.uniforms.uOrthoPMatrix,false,h6);if(!h0.lastState.projMatrix){h7.uniformMatrix4fv(h0.uniforms.uPMatrix,false,ib);h7.uniform2fv(h0.uniforms.uMapHalfSize,h3);h0.lastState.projMatrix=true}h7.uniformMatrix4fv(h0.uniforms.uMVMatrix,false,h5);h7.uniform3fv(h0.uniforms.uCameraPosHigh,hZ);h7.uniform3fv(h0.uniforms.uCameraPosLow,h4);h7.uniform1f(h0.uniforms.uCameraFar,h9._camera._farLabel);if(hY){var ia=h9._map;var hX=aG(c9.WORLD_SIZE_MC);h7.uniform3fv(h0.uniforms.uFixPositionInfo,[1,hX[0],hX[1]])}else{h7.uniform3fv(h0.uniforms.uFixPositionInfo,i)}if(typeof hV!=="number"){hV=7}h9._state.activeTexture(h7.TEXTURE0+hV);h7.bindTexture(h7.TEXTURE_2D,h1);if(h0.uniforms.lastSamper!==hV){h7.uniform1i(h0.uniforms.uSampler,hV);h0.uniforms.lastSamper=hV}h7.uniform1i(h0.uniforms.uHighlight,hW);h7.uniform1i(h0.uniforms.uForRenderPNG8Text,hU);h7.uniform1i(h0.uniforms.uUseRound,hT);if(h0.uniforms.lastMapZoom!==h2){h7.uniform1f(h0.uniforms.uMapZoom,h2);h0.uniforms.lastMapZoom=h2}ic.bind(h7,h0,h8);h7.drawArrays(h7.TRIANGLES,0,h8.length)}return function(h5,hZ,hU,h4,h1,hY,h3,hV,h8,hT,hX,h2,hW,h6,h7,h0){e(h5,hZ,hU,h4,h1,hY,h3,hV,h8,hT,hX,h2,hW,h6,h7,h0)}})();var gd=(function(){var T=mat4.create();var e=vec3.create();function i(h3,hZ,hU,h2,h0,hY,h1,h6,hT,hX,h5,h4){var hW=h3.gl;var hV=h3.programMgr.useProgram("symbolline");h6=h6||0;hX=hX||0;if(!hV.lastState.projMatrix){hW.uniformMatrix4fv(hV.uniforms.uPMatrix,false,h1);hW.uniform2fv(hV.uniforms.uMapHalfSize,hT);hV.lastState.projMatrix=true}hW.uniformMatrix4fv(hV.uniforms.uMVMatrix,false,h2);hW.uniform1f(hV.uniforms.uCameraFar,h3._camera._farLabel);if(typeof h4!=="number"){h4=7}h3._state.activeTexture(hW.TEXTURE0+h4);hW.bindTexture(hW.TEXTURE_2D,h0);if(hV.uniforms.lastSamper!==h4){hW.uniform1i(hV.uniforms.uSampler,h4);hV.uniforms.lastSamper=h4}hW.uniform1i(hV.uniforms.uForRenderPNG8Text,hY);hW.uniform1i(hV.uniforms.uUseRound,h6);if(hV.lastState.isFlat!==h3.isFlat){hW.uniform1i(hV.uniforms.u_flat,h3.isFlat);hV.lastState.isFlat=h3.isFlat}if(hV.uniforms.lastMapZoom!==hX){hW.uniform1f(hV.uniforms.uMapZoom,hX);hV.uniforms.lastMapZoom=hX}hU.bind(hW,hV,hZ);hW.drawArrays(hW.TRIANGLES,0,hZ.length)}return function(h2,hX,hU,h1,hZ,hW,h0,h5,hT,hV,h4,h3,hY){i(h2,hX,hU,h1,hZ,hW,h0,h5,hT,hV,h4,h3,hY)}})();var hc=(function(){function e(i,hX,hV,hT,hU,hW){var hY=i.gl;var T=i.programMgr.useProgram("raster");hY.uniformMatrix4fv(T.uniforms.uPMatrix,false,hW);hY.uniformMatrix4fv(T.uniforms.uMVMatrix,false,hT);i._state.activeTexture(hY.TEXTURE7);hY.bindTexture(hY.TEXTURE_2D,hU);hY.uniform1i(T.uniforms.uSampler,7);hV.bind(hY,T,hX);hY.drawArrays(hY.TRIANGLES,0,hX.length)}return function(i,hW,hU,T,hT,hV){e(i,hW,hU,T,hT,hV)}})();var fv=(function(){var i=new Image();var e=false;i.onload=function(){e=true};i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ5JREFUeNrsllEKgCAMhp14rsqT1X08Q6VdbDmYLxGUoO5lg72J+9i/3wmIaCTDGuFQAAVQANfyshCCSkBx5pwlAZackUEmSQkIJH2BjJiBAnK8gQBtwzy9I1cidWTLeUm5wHNHduqIlXagEyhMDlmLBNDyR8QvIf4pPNIFkZ3gn8V7SxB52tOwZVRTuCeArzkM+i1XAAVQAGmAW4ABAOOjKXrLR4xWAAAAAElFTkSuQmCC";function T(hU,hT){if(!hT._arrowTexture){hT._arrowTexture=cc.utils.createTexture(hU,i,{wrap:hU.REPEAT})}else{hU.bindTexture(hU.TEXTURE_2D,hT._arrowTexture)}}return function(hZ,hY,hX,hU,h1,h2){if(!e){return}var h0=h2.drawPart||0;var hW=hZ.gl;var hV=hZ.programMgr.useProgram("arrow");if(!hV.lastState.projMatrix){hW.uniformMatrix4fv(hV.uniforms.u_proj_matrix,false,hZ.projMatrix);hV.lastState.projMatrix=true}if(hV.lastState.drawPart!==h0){hW.uniform1i(hV.uniforms.u_draw_part,h0);hV.lastState.drawPart=h0}if(hV.lastState.isFlat!==hZ.isFlat){hW.uniform1i(hV.uniforms.u_flat,hZ.isFlat);hV.lastState.isFlat=hZ.isFlat}hW.uniformMatrix4fv(hV.uniforms.u_mv_matrix,false,hY.mvMatrix);var hT=hZ.tileScale;if(hZ.mapZoom>=19){hT*=1.8}else{hT*=1.2}if(hV.lastState.scale!==hT){hW.uniform1f(hV.uniforms.u_scale,hT);hV.lastState.scale=hT}hZ._state.activeTexture(hW.TEXTURE4);T(hW,hZ);if(!hV.uniforms.lastSampler){hW.uniform1i(hV.uniforms.u_image,4);hV.uniforms.lastSampler=true}hU.vao1.bind(hW,hV,hU.vertex,hU.element1);hW.drawElements(hW.TRIANGLES,hU.element1.length,hW.UNSIGNED_SHORT,0)}})();var M=(function(){return function(e,hT,T,hW,hV){var hX=e.gl;var i=e.programMgr.useProgram("sky");hX.depthMask(false);hX.uniformMatrix4fv(i.uniforms.uPMatrix,false,e.projMatrix2D);hX.uniformMatrix4fv(i.uniforms.uMVMatrix,false,hT);hX.uniform4fv(i.uniforms.uGroundColor,hV[0]);hX.uniform4fv(i.uniforms.uSkyColor,hV[1]||hV[0]);var hU=hW-T;hU=hU<0?0:hU;hX.uniform1f(i.uniforms.uHorizonY,hU);e.skyVAO.bind(hX,i,e.skyBuffer);hX.drawArrays(hX.TRIANGLES,0,e.skyBuffer.length);hX.depthMask(true)}})();function bL(hX,hT){var T=hX.gl;var i=hX.programMgr.useProgram("debug");T.uniform4fv(i.uniforms.u_color,[1,0,0,1]);T.uniform1f(i.uniforms.u_opacity,1);T.uniformMatrix4fv(i.uniforms.u_proj_matrix,false,hX.projMatrix);T.uniformMatrix4fv(i.uniforms.u_mv_matrix,false,hT.mvMatrix);hX.debugVAO.bind(T,i,hX.debugBuffer);T.drawArrays(T.LINE_STRIP,0,hX.debugBuffer.length);hX.debugVAO.unbind(T);var hW=mat4.create();hW=mat4.scale(hW,hW,[1,-1,1]);hW=mat4.multiply(hW,hT.mvMatrix,hW);T.uniformMatrix4fv(i.uniforms.u_mv_matrix,false,hW);var e=hT.tileInfo;var hZ=hT.tileInfo.col+"-"+hT.tileInfo.row+"-"+hT.tileInfo.zoom;var hU=hO(hZ,10,-10,0.5);var hV=new fj(new Float32Array(hU),{alignment:1,components:2,members:[{name:"a_pos",components:2,offset:0,type:"Float32"}]},fj.BufferType.VERTEX);var hY=new ht();hY.bind(T,i,hV);T.drawArrays(T.LINES,0,hV.length)}var b5=(function(){function hU(h2,h0,h1,hZ,hV,hX,hW){var hY=h2.createTexture();h2.bindTexture(h2.TEXTURE_2D,hY);h2.pixelStorei(h2.UNPACK_FLIP_Y_WEBGL,true);h2.texImage2D(h2.TEXTURE_2D,0,h1||h2.RGBA,h1||h2.RGBA,h2.UNSIGNED_BYTE,h0);h2.texParameteri(h2.TEXTURE_2D,h2.TEXTURE_MAG_FILTER,hZ||h2.LINEAR);h2.texParameteri(h2.TEXTURE_2D,h2.TEXTURE_MIN_FILTER,hV||h2.LINEAR);h2.texParameteri(h2.TEXTURE_2D,h2.TEXTURE_WRAP_S,hX||h2.CLAMP_TO_EDGE);h2.texParameteri(h2.TEXTURE_2D,h2.TEXTURE_WRAP_T,hW||h2.CLAMP_TO_EDGE);h2.bindTexture(h2.TEXTURE_2D,null);return hY}function T(hW,hY){var hV=new Image();hV.onload=function(){hW._smaaInfo.areaTexture=hU(hY,this,hY.RGB,hY.LINEAR,hY.LINEAR,null,null);if(hW._smaaInfo.areaTexture&&hW._smaaInfo.searchTexture){hW._smaaInfo.glDrawSMAAReady=true}};hV.src=i();var hX=new Image();hX.onload=function(){hW._smaaInfo.searchTexture=hU(hY,this,null,hY.NEAREST,hY.NEAREST,null,null);if(hW._smaaInfo.areaTexture&&hW._smaaInfo.searchTexture){hW._smaaInfo.glDrawSMAAReady=true}};hX.src=e()}function hT(hV,hW){if(!hV._smaaInfo.textureBeginToLoad){T(hV,hW);hV._smaaInfo.textureBeginToLoad=true}}return{init:function(hV){hV._smaaInfo={areaTexture:null,searchTexture:null,textureBeginToLoad:false,glDrawSMAAReady:false}},loadTexture:hT,draw:function(hY,hX,h0,hW,h1,hV){var h2=hY.gl;if(hY._smaaInfo.glDrawSMAAReady===false){return}hY._state.disableCap("blend");h2.bindFramebuffer(h2.FRAMEBUFFER,hW[1].framebuffer);var hZ=hY.programMgr.useProgram("smaa1");hX.vao1.bind(h2,hZ,hX.vertex);h2.uniform2fv(hZ.uniforms.resolution,[1/h1,1/hV]);h2.uniformMatrix4fv(hZ.uniforms.projectionMatrix,false,hY.projMatrix2D);h2.uniformMatrix4fv(hZ.uniforms.modelViewMatrix,false,h0);hY._state.activeTexture(h2.TEXTURE1);h2.bindTexture(h2.TEXTURE_2D,hW[0].texture);h2.uniform1i(hZ.uniforms.tDiffuse,1);h2.drawArrays(h2.TRIANGLES,0,hX.vertex.length);h2.bindFramebuffer(h2.FRAMEBUFFER,null);h2.bindFramebuffer(h2.FRAMEBUFFER,hW[2].framebuffer);hZ=hY.programMgr.useProgram("smaa2");hX.vao2.bind(h2,hZ,hX.vertex);h2.uniform2fv(hZ.uniforms.resolution,[1/h1,1/hV]);h2.uniformMatrix4fv(hZ.uniforms.projectionMatrix,false,hY.projMatrix2D);h2.uniformMatrix4fv(hZ.uniforms.modelViewMatrix,false,h0);hY._state.activeTexture(h2.TEXTURE1);h2.bindTexture(h2.TEXTURE_2D,hW[1].texture);h2.uniform1i(hZ.uniforms.tDiffuse,1);hY._state.activeTexture(h2.TEXTURE2);h2.bindTexture(h2.TEXTURE_2D,hY._smaaInfo.areaTexture);h2.uniform1i(hZ.uniforms.tArea,2);hY._state.activeTexture(h2.TEXTURE3);h2.bindTexture(h2.TEXTURE_2D,hY._smaaInfo.searchTexture);h2.uniform1i(hZ.uniforms.tSearch,3);h2.drawArrays(h2.TRIANGLES,0,hX.vertex.length);h2.bindFramebuffer(h2.FRAMEBUFFER,null);hZ=hY.programMgr.useProgram("smaa3");hX.vao3.bind(h2,hZ,hX.vertex);h2.uniform2fv(hZ.uniforms.resolution,[1/h1,1/hV]);h2.uniformMatrix4fv(hZ.uniforms.projectionMatrix,false,hY.projMatrix2D);h2.uniformMatrix4fv(hZ.uniforms.modelViewMatrix,false,h0);hY._state.activeTexture(h2.TEXTURE1);h2.bindTexture(h2.TEXTURE_2D,hW[2].texture);h2.uniform1i(hZ.uniforms.tDiffuse,1);hY._state.activeTexture(h2.TEXTURE2);h2.bindTexture(h2.TEXTURE_2D,hW[0].texture);h2.uniform1i(hZ.uniforms.tColor,2);h2.drawArrays(h2.TRIANGLES,0,hX.vertex.length);hY._state.enableCap("blend")}};function i(){return"data:image/png;base64,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"}function e(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAIAAADiVupLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFZJREFUeNrs00EKgAAIRNEZ739mTQoiwmhRi4L/FiKiu9ERISkzbXdTVV3H4WhfOG6ehl1rNR7qDSF8hwkVcJXt+3A//I0Nv0GoCBUAAAAAAMA/LAIMAB+Dcg2OE2zsAAAAAElFTkSuQmCC"}})();var dm=(function(){function e(T,hU,i){var hV=T.gl;var hT=T.programMgr.useProgram("overlayblock");i.vao1.bind(hV,hT,i.vertex,i.element1);if(!hT.lastState.projMatrix){hV.uniformMatrix4fv(hT.uniforms.u_proj_matrix,false,T.projMatrix);hT.lastState.projMatrix=true}var hW=T._camera._far||4000;if(hT.lastState.cameraFar!==hW){hV.uniform1f(hT.uniforms.u_camera_far,hW);hT.lastState.cameraFar=hW}hV.uniformMatrix4fv(hT.uniforms.u_mv_matrix,false,hU);hV.uniformMatrix4fv(hT.uniforms.u_normal_matrix,false,T.normalMatrix);hV.drawElements(hV.TRIANGLES,i.element1.length,hV.UNSIGNED_SHORT,0)}return function(T,hU,i,hT){hT=hT||{};e(T,hU.mvMatrix,i)}})();var fx=(function(){function e(T,hU,hW,hY,i,hV){if(i.length<=0){return}var hX=T.gl;var hT=T.programMgr.useProgram("marker3d");i.vao.bind(hX,hT,i.vertex);if(!hT.lastState.projMatrix){hX.uniformMatrix4fv(hT.uniforms.u_proj_matrix,false,T.projMatrix);hT.lastState.projMatrix=true}hX.uniform1i(hT.uniforms.u_use_texture,!!i.texture);if(i.texture){T._state.activeTexture(hX.TEXTURE7);hX.bindTexture(hX.TEXTURE_2D,i.texture);if(hT.uniforms.lastSamper!==7){hX.uniform1i(hT.uniforms.u_Sampler,7);hT.uniforms.lastSamper=7}}hX.uniform3fv(hT.uniforms.u_camera_pos_high,hW);hX.uniform3fv(hT.uniforms.u_camera_pos_low,hY);hX.uniform3fv(hT.uniforms.u_camera_pos_low,hY);hX.uniformMatrix4fv(hT.uniforms.u_mv_matrix,false,hU);hX.drawArrays(hX.POINTS,0,i.vertex.length)}return function(T,hU,hV,hW,i,hT){hT=hT||{};e(T,hU.mvMatrix,hV,hW,i,hT)}})();var d8=(function(){function e(hT,hX,hV,T,hW){var hY=hT.gl;var hU=hT.programMgr.useProgram("groundoverlay");if(hU.lastState.opacity!==hV.opacity){hY.uniform1f(hU.uniforms.u_opacity,hV.opacity);hU.lastState.opacity=hV.opacity}if(!hU.lastState.projMatrix){hY.uniformMatrix4fv(hU.uniforms.u_proj_matrix,false,hT.projMatrix);hU.lastState.projMatrix=true}T.vao1.bind(hY,hU,T.vertex,T.element1);hT._state.activeTexture(hY.TEXTURE2);hY.bindTexture(hY.TEXTURE_2D,hW);if(hU.uniforms.lastSamper!==2){hY.uniform1i(hU.uniforms.u_Sampler,2);hU.uniforms.lastSamper=2}hY.uniformMatrix4fv(hU.uniforms.u_mv_matrix,false,hX);hY.drawElements(hY.TRIANGLES,T.element1.length,hY.UNSIGNED_SHORT,0)}return function i(hT,hX,hV,T,hW,hU){hU=hU||{};e(hT,hX.mvMatrix,hV,T,hW)}})();function eT(hY,h3,i8){var iA=new hY.Int8Array(i8);var iz=new hY.Int16Array(i8);var iy=new hY.Int32Array(i8);var ix=new hY.Uint8Array(i8);var iv=new hY.Uint16Array(i8);var iu=new hY.Uint32Array(i8);var it=new hY.Float32Array(i8);var ir=new hY.Float64Array(i8);var ip=h3.DYNAMICTOP_PTR|0;var io=h3.tempDoublePtr|0;var im=h3.ABORT|0;var il=h3.STACKTOP|0;var ik=h3.STACK_MAX|0;var ii=h3.gb|0;var ih=h3.fb|0;var ig=0;var ie=0;var id=0;var ic=0;var ib=hY.NaN,h9=hY.Infinity;var h8=0,h7=0,h6=0,h5=0,h4=0;var i5=0;var i4=hY.Math.floor;var i3=hY.Math.abs;var i2=hY.Math.sqrt;var i0=hY.Math.pow;var iZ=hY.Math.cos;var iY=hY.Math.sin;var iX=hY.Math.tan;var iW=hY.Math.acos;var iU=hY.Math.asin;var iT=hY.Math.atan;var iS=hY.Math.atan2;var iR=hY.Math.exp;var iQ=hY.Math.log;var iP=hY.Math.ceil;var iN=hY.Math.imul;var iM=hY.Math.min;var iL=hY.Math.max;var iK=hY.Math.clz32;var iJ=h3.abort;var iI=h3.assert;var iH=h3.enlargeMemory;var iG=h3.getTotalMemory;var iF=h3.abortOnCannotGrowMemory;var iE=h3.setTempRet0;var iD=h3.getTempRet0;var iC=0;function je(i){i=i|0;var e=0;e=il;il=il+i|0;il=il+15&-16;return e|0}function i9(){return il|0}function iO(e){e=e|0;il=e}function ij(i,e){i=i|0;e=e|0;il=i;ik=e}function hZ(i,e){i=i|0;e=e|0;if(!ig){ig=i;ie=e}}function hU(){return ii+1892368|0}function jh(){return ii+1990672|0}function jb(){return ii+0|0}function iV(){return ii+4374544|0}function iq(){return ii+1998864|0}function h0(){return ii+1998864+(iy[ii+32768>>2]<<1)|0}function hV(){return ii+2523152|0}function jj(){return ii+2523152+((iy[ii+32772>>2]|0)*20|0)|0}function jd(){return iy[ii+32772>>2]|0}function i1(){iy[ii+32768>>2]=0;iy[ii+32772>>2]=0;return}function iw(){return ii+32776|0}function h1(){return ii+3833872|0}function hW(){iy[ii+40968>>2]=0;iy[ii+40972>>2]=0;return}function jk(){return ii+3842064|0}function jf(){return ii+3842064+(iy[ii+40968>>2]<<1)|0}function i6(){return ii+40976|0}function iB(){return ii+40976+((iy[ii+40972>>2]|0)*28|0)|0}function h2(){return iy[ii+40972>>2]|0}function hX(){return ii+1875984|0}function hT(T,i){T=T|0;i=i|0;var jm=0,jl=0,ja=0,ia=0;jl=(i|0)>0;if(jl){jm=0;do{ja=ii+1875984+(jm<<2)|0;it[ja>>2]=+it[ja>>2]/100;jm=jm+1|0}while((jm|0)!=(i|0))}if((i|0)>=(T|0)|jl^1){return}else{jm=i}do{jl=0;do{ia=jl+jm|0;ja=ii+1875984+(ia<<2)|0;it[ja>>2]=+it[ii+1875984+(ia-i<<2)>>2]+ +it[ja>>2]/100;jl=jl+1|0}while((jl|0)!=(i|0));jm=jm+i|0}while((jm|0)<(T|0));return}function jg(jL,jK,jJ,jI,jH,jG,jF,jE,jD,jC,jB,jA,jy){jL=jL|0;jK=jK|0;jJ=jJ|0;jI=jI|0;jH=jH|0;jG=+jG;jF=jF|0;jE=jE|0;jD=jD|0;jC=jC|0;jB=jB|0;jA=jA|0;jy=jy|0;var jw=0,ju=0,jt=0,jr=0,jp=0,jn=0,jl=0,ia=0,T=0,jz=0,jx=0,jv=0,js=0,jq=0,jo=0,jm=0,ja=0;jq=(jL|0)/2|0;jo=jB<<24>>24==1;if(jo){iz[ii+4366352>>1]=0;if((jC|0)>2){jw=0;ju=2;do{ja=+(iy[ii+0+(ju<<2)>>2]|0);jm=+(iy[ii+0+((ju|1)<<2)>>2]|0);jw=(~~(+i2(+(ja*ja+jm*jm))/10)<<16>>16)+(jw<<16>>16)|0;iz[ii+4366352+(((ju|0)/2|0)<<1)>>1]=jw;ju=ju+2|0}while((ju|0)<(jC|0));jw=4}}else{jw=4}if((jw|0)==4?(jC|0)>2:0){jw=2;ju=iy[ii+0>>2]|0;do{jv=ii+0+(jw<<2)|0;ju=(iy[jv>>2]|0)+ju|0;iy[jv>>2]=ju;jv=jw|1;js=ii+0+(jv<<2)|0;iy[js>>2]=(iy[js>>2]|0)+(iy[ii+0+(jv+-2<<2)>>2]|0);jw=jw+2|0}while((jw|0)<(jC|0))}if(jD<<24>>24){iz[ii+1892368>>1]=iz[ii+1892368+8>>1]|0;iz[ii+1892368+2>>1]=iz[ii+1892368+10>>1]|0;iz[ii+1892368+4>>1]=iz[ii+1892368+12>>1]|0;iz[ii+1892368+6>>1]=iz[ii+1892368+14>>1]|0;js=jq<<1;iz[ii+1892368+(js+-2<<1)>>1]=iz[ii+1892368+(js+-6<<1)>>1]|0;iz[ii+1892368+(js+-1<<1)>>1]=iz[ii+1892368+(js+-5<<1)>>1]|0;iz[ii+1892368+(js+-4<<1)>>1]=iz[ii+1892368+(js+-8<<1)>>1]|0;iz[ii+1892368+(js+-3<<1)>>1]=iz[ii+1892368+(js+-7<<1)>>1]|0}jv=jy-jA|0;js=iy[ii+32772>>2]|0;if((jL|0)<=1){i7(jv,js);return}jz=(jF|0)==0;jx=jq+-2|0;jn=jB<<24>>24==2;jl=jq+-1|0;ia=jq+-4|0;T=jA+1|0;jp=jy+-1|0;jt=0;jw=0;jr=js;do{if((jt|0)>=4){if((ia|0)>(jt|0)){jC=T+((jt+-4|0)/5|0)|0}else{jC=jp}}else{jC=jA}if(!jz){jw=iz[ii+1990672+(jC<<1)>>1]|0}jL=jC<<1;jy=((iy[ii+0+(jL<<2)>>2]|0)/10|0)&65535;jL=((iy[ii+0+((jL|1)<<2)>>2]|0)/10|0)&65535;jB=jt<<1;jF=~~(+(iz[ii+1892368+(jB<<1)>>1]|0)*jG/10);jB=~~(+(iz[ii+1892368+((jB|1)<<1)>>1]|0)*jG/10);iA:do{if(!((jt|0)==0|(jt|0)==(jx|0))){if((jt|0)==1|(jt|0)==(jl|0)){jD=-1}else{ju=jt+-2|0;switch((ju|0)%5|0|2|0){case 2:jD=1;break iA;case 3:jD=-1;break iA;default:jD=iA[((ju|0)/5|0)+(ii+4374544)>>0]|0;break iA}}}else{jD=1}}while(0);if(jo){ju=iz[ii+4366352+(jC<<1)>>1]|0}else{ju=jn?((jC|0)==0?0:10):0}jC=jr;jr=jr+1|0;iz[ii+2523152+(jC*20|0)>>1]=jy;iz[ii+2523152+(jC*20|0)+2>>1]=jL;iz[ii+2523152+(jC*20|0)+4>>1]=jF;iz[ii+2523152+(jC*20|0)+6>>1]=jB;iA[ii+2523152+(jC*20|0)+8>>0]=jK;iA[ii+2523152+(jC*20|0)+9>>0]=jJ;iA[ii+2523152+(jC*20|0)+10>>0]=jI;iA[ii+2523152+(jC*20|0)+11>>0]=jH;iz[ii+2523152+(jC*20|0)+12>>1]=jD;iz[ii+2523152+(jC*20|0)+14>>1]=jw;iz[ii+2523152+(jC*20|0)+16>>1]=jE;iz[ii+2523152+(jC*20|0)+18>>1]=ju;jt=jt+1|0}while((jt|0)<(jq|0));iy[ii+32772>>2]=jr;i7(jv,js);return}function i7(jv,ju){jv=jv|0;ju=ju|0;var jt=0,js=0,jr=0,jq=0,jp=0,jo=0,jn=0,jm=0,jl=0,ja=0,ia=0,T=0;jm=jv+-1|0;jn=jv+-2|0;jo=0;jt=1;js=1;jp=iy[ii+32768>>2]|0;while(1){jv=jt+1|0;ja=jv+ju|0;jv=(jv&1|0)==0;jq=js<<24>>24!=0;ia=ja+-2|0;jl=jt+ju|0;jr=jq?ia:jl;ia=jq?jl:ia;iz[ii+1998864+(jp<<1)>>1]=jv?jr:ia;iz[ii+1998864+(jp+1<<1)>>1]=jv?ia:jr;iz[ii+1998864+(jp+2<<1)>>1]=ja;ja=jt+2|0;jr=ja+ju|0;ja=(ja&1|0)==0;ia=jr+-1|0;jv=jq?jl:ia;jl=jq?ia:jl;iz[ii+1998864+(jp+3<<1)>>1]=ja?jv:jl;iz[ii+1998864+(jp+4<<1)>>1]=ja?jl:jv;jv=jp+6|0;iz[ii+1998864+(jp+5<<1)>>1]=jr;if((jo|0)>=(jm|0)){break}ja=jt+3|0;jr=ja+ju|0;ja=(ja&1|0)==0;jl=jr+-2|0;T=jr+-1|0;ia=jq?jl:T;jl=jq?T:jl;iz[ii+1998864+(jv<<1)>>1]=ja?ia:jl;iz[ii+1998864+(jp+7<<1)>>1]=ja?jl:ia;iz[ii+1998864+(jp+8<<1)>>1]=jr;jr=jt+4|0;ia=jr+ju|0;jl=(jr&1|0)==0;ja=ia+-2|0;T=ia+-1|0;jv=jq?ja:T;ja=jq?T:ja;iz[ii+1998864+(jp+9<<1)>>1]=jl?jv:ja;iz[ii+1998864+(jp+10<<1)>>1]=jl?ja:jv;jv=jp+12|0;iz[ii+1998864+(jp+11<<1)>>1]=ia;if((jo|0)==(jn|0)){jt=jr}else{jt=jt+5|0;T=jt+ju|0;jl=(jt&1|0)==0;ja=T+-2|0;jr=T+-1|0;ia=jq?ja:jr;ja=jq?jr:ja;iz[ii+1998864+(jv<<1)>>1]=jl?ia:ja;iz[ii+1998864+(jp+13<<1)>>1]=jl?ja:ia;iz[ii+1998864+(jp+14<<1)>>1]=T;js=js<<24>>24==0&1;jv=jp+15|0}jo=jo+1|0;jp=jv}iy[ii+32768>>2]=jv;return}function ji(jG,jF,jE,jD,jC,jB,jA,jz,jy,jx,jv){jG=jG|0;jF=jF|0;jE=+jE;jD=jD|0;jC=jC|0;jB=jB|0;jA=jA|0;jz=jz|0;jy=jy|0;jx=jx|0;jv=jv|0;var jt=0,jr=0,jp=0,jn=0,jl=0,ja=0,ia=0,T=0,e=0,jw=0,ju=0,js=0,jq=0,jo=0,jm=0;if((jG|0)>2){jt=2;jr=iy[ii+32776>>2]|0;do{jn=ii+32776+(jt<<2)|0;jr=(iy[jn>>2]|0)+jr|0;iy[jn>>2]=jr;jn=jt|1;jl=ii+32776+(jn<<2)|0;iy[jl>>2]=(iy[jl>>2]|0)+(iy[ii+32776+(jn+-2<<2)>>2]|0);jt=jt+2|0}while((jt|0)<(jG|0))}jn=iy[ii+40972>>2]|0;jl=(jG|0)>0;if(jl){jr=jn+((jG+-1|0)>>>1)|0;jt=0;jp=jn;while(1){ja=+(iy[ii+32776+((jt|1)<<2)>>2]|0)/100;it[ii+40976+(jp*28|0)>>2]=+(iy[ii+32776+(jt<<2)>>2]|0)/100;it[ii+40976+(jp*28|0)+4>>2]=ja;it[ii+40976+(jp*28|0)+8>>2]=jE;it[ii+40976+(jp*28|0)+12>>2]=0;it[ii+40976+(jp*28|0)+16>>2]=0;it[ii+40976+(jp*28|0)+20>>2]=1;iA[ii+40976+(jp*28|0)+24>>0]=jD;iA[ii+40976+(jp*28|0)+25>>0]=jC;iA[ii+40976+(jp*28|0)+26>>0]=jB;iA[ii+40976+(jp*28|0)+27>>0]=jA;jt=jt+2|0;if((jt|0)>=(jG|0)){break}else{jp=jp+1|0}}jt=jr+1|0;iy[ii+40972>>2]=jt}else{jt=jn}if((jF|0)>0){jD=iy[ii+40968>>2]|0;jr=0;jp=jD;while(1){iz[ii+3842064+(jp<<1)>>1]=(iv[ii+3833872+(jr<<1)>>1]|0)+jn;jr=jr+1|0;if((jr|0)==(jF|0)){break}else{jp=jp+1|0}}iy[ii+40968>>2]=jD+jF}if(!jl){return}jD=jG+-2|0;jp=iy[ii+40968>>2]|0;jB=(jG+-1|0)>>>1;jC=jt+(jB<<2)|0;jB=jp+(jB*6|0)|0;jr=0;while(1){js=+(iy[ii+32776+(jr<<2)>>2]|0)/100;ju=+(iy[ii+32776+((jr|1)<<2)>>2]|0)/100;jF=jr;jr=jr+2|0;jA=(jF|0)==(jD|0);jw=+(iy[ii+32776+((jA?0:jr)<<2)>>2]|0)/100;e=+(iy[ii+32776+((jA?1:jF+3|0)<<2)>>2]|0)/100;jo=jw-js;ja=e-ju;jq=js-js;jm=ju-ju;T=ja*jE-jm*0;ia=jq*0-jo*jE;ja=jm*jo-jq*ja;jF=jt+1|0;it[ii+40976+(jt*28|0)>>2]=js;it[ii+40976+(jt*28|0)+4>>2]=ju;it[ii+40976+(jt*28|0)+8>>2]=0;it[ii+40976+(jt*28|0)+12>>2]=T;it[ii+40976+(jt*28|0)+16>>2]=ia;it[ii+40976+(jt*28|0)+20>>2]=ja;iA[ii+40976+(jt*28|0)+24>>0]=jz;iA[ii+40976+(jt*28|0)+25>>0]=jy;iA[ii+40976+(jt*28|0)+26>>0]=jx;iA[ii+40976+(jt*28|0)+27>>0]=jv;jA=jt+2|0;it[ii+40976+(jF*28|0)>>2]=js;it[ii+40976+(jF*28|0)+4>>2]=ju;it[ii+40976+(jF*28|0)+8>>2]=jE;it[ii+40976+(jF*28|0)+12>>2]=T;it[ii+40976+(jF*28|0)+16>>2]=ia;it[ii+40976+(jF*28|0)+20>>2]=ja;iA[ii+40976+(jF*28|0)+24>>0]=jz;iA[ii+40976+(jF*28|0)+25>>0]=jy;iA[ii+40976+(jF*28|0)+26>>0]=jx;iA[ii+40976+(jF*28|0)+27>>0]=jv;jl=jt+3|0;it[ii+40976+(jA*28|0)>>2]=jw;it[ii+40976+(jA*28|0)+4>>2]=e;it[ii+40976+(jA*28|0)+8>>2]=0;it[ii+40976+(jA*28|0)+12>>2]=T;it[ii+40976+(jA*28|0)+16>>2]=ia;it[ii+40976+(jA*28|0)+20>>2]=ja;iA[ii+40976+(jA*28|0)+24>>0]=jz;iA[ii+40976+(jA*28|0)+25>>0]=jy;iA[ii+40976+(jA*28|0)+26>>0]=jx;iA[ii+40976+(jA*28|0)+27>>0]=jv;it[ii+40976+(jl*28|0)>>2]=jw;it[ii+40976+(jl*28|0)+4>>2]=e;it[ii+40976+(jl*28|0)+8>>2]=jE;it[ii+40976+(jl*28|0)+12>>2]=T;it[ii+40976+(jl*28|0)+16>>2]=ia;it[ii+40976+(jl*28|0)+20>>2]=ja;iA[ii+40976+(jl*28|0)+24>>0]=jz;iA[ii+40976+(jl*28|0)+25>>0]=jy;iA[ii+40976+(jl*28|0)+26>>0]=jx;iA[ii+40976+(jl*28|0)+27>>0]=jv;jn=jt&65535;iz[ii+3842064+(jp<<1)>>1]=jn;iz[ii+3842064+(jp+1<<1)>>1]=jA;jl=jl&65535;iz[ii+3842064+(jp+2<<1)>>1]=jl;iz[ii+3842064+(jp+3<<1)>>1]=jn;iz[ii+3842064+(jp+4<<1)>>1]=jl;iz[ii+3842064+(jp+5<<1)>>1]=jF;if((jr|0)>=(jG|0)){break}else{jp=jp+6|0;jt=jt+4|0}}iy[ii+40972>>2]=jC+4;iy[ii+40968>>2]=jB+6;return}function jc(){}return{_reset_line:i1,_get_block_index_start:jk,setThrew:hZ,_get_line_turnings_address:iV,_get_block_triangle_indices_address:h1,_get_line_vertex_count:jd,stackAlloc:je,_get_block_vertex_count:h2,_get_block_vertex_start:i6,_get_line_vertex_end:jj,_get_feature_points_address:hX,stackRestore:iO,_get_block_index_end:jf,_get_line_altitudes_address:jh,_get_block_vertex_end:iB,stackSave:i9,runPostSets:jc,_get_line_vertex_start:hV,_parse_points:hT,_get_line_points_address:jb,establishStackSpace:ij,_get_line_index_end:h0,_append_line_data:jg,_get_line_index_start:iq,_append_block_data:ji,_get_block_points_address:iw,_reset_block:hW,_get_line_data_address:hU}}var b4;var fs;var gs;var hk;var eg;var eQ;var dt;var gT;var fY;var e6;var ex;var dC;var fN;var gE;var bG;var eP;var c0;var ep;if(!ArrayBuffer.prototype.slice){ArrayBuffer.prototype.slice=function(T,i){if(T===undefined){T=0}if(i===undefined){i=this.byteLength}T=Math.floor(T);i=Math.floor(i);if(T<0){T+=this.byteLength}if(i<0){i+=this.byteLength}T=Math.min(Math.max(0,T),this.byteLength);i=Math.min(Math.max(0,i),this.byteLength);if(i-T<=0){return new ArrayBuffer(0)}var e=new ArrayBuffer(i-T);var hU=new Uint8Array(e);var hT=new Uint8Array(this,T,i-T);hU.set(hT);return e}}function gZ(i){var e=70;if(b4){i&&i();return}b4=new ArrayBuffer(e*65536);gs=new Float32Array(b4);hk=new Int32Array(b4);fs=new Int8Array(b4);eg=new Int16Array(b4);eQ=new Uint16Array(b4);dt=self.createWasmModule(self,{DYNAMICTOP_PTR:0,tempDoublePtr:0,ABORT:0,STACKTOP:0,STACK_MAX:0,gb:0,fb:0},b4);i&&i()}function bl(e){if(!gT){gT=dt._get_line_data_address()>>1}eg.set(e,gT)}function N(e){if(!fY){fY=dt._get_line_altitudes_address()>>1}eg.set(e,fY)}function aL(e){if(!e6){e6=dt._get_line_points_address()>>2}hk.set(e,e6)}function hr(e){if(!ex){ex=dt._get_line_turnings_address()}fs.set(e,ex)}function gr(e){if(!gE){gE=dt._get_block_points_address()>>2}hk.set(e,gE)}function e8(e){if(!bG){bG=dt._get_block_triangle_indices_address()>>1}eQ.set(e,bG)}var fq={parseFeature:function(i,T){var e=i.length;T=T||2;if(!ep){ep=dt._get_feature_points_address()>>2}gs.set(i,ep);dt._parse_points(e,T);return new Float32Array(b4.slice(ep<<2,(ep+e)<<2))},getBlockVertices:function(){if(!c0){c0=dt._get_block_vertex_start()}return new Float32Array(b4.slice(c0,dt._get_block_vertex_end()))},getBlockIndices:function(){if(!eP){eP=dt._get_block_index_start()}return new Uint16Array(b4.slice(eP,dt._get_block_index_end()))},getBlockVertexCount:function(){return dt._get_block_vertex_count()},getLineVertices:function(){if(!fN){fN=dt._get_line_vertex_start()}return new Float32Array(b4.slice(fN,dt._get_line_vertex_end()))},getLineIndices:function(){if(!dC){dC=dt._get_line_index_start()}return new Uint16Array(b4.slice(dC,dt._get_line_index_end()))},getLineVertexCount:function(){return dt._get_line_vertex_count()},appendLineData:function(hW,hV,hT,i,hZ,e,h1,hX,h0,T,hU){var hY=0;if(i){hY=i.length;N(i)}if(hX&&hX.length){hr(hX)}hZ=hZ||0;T=T||0;hU=hU||h1.length/2;bl(hW);aL(h1);dt._append_line_data(hW.length,hV[0],hV[1],hV[2],hV[3],hT,hY,hZ,e?1:0,h1.length,h0,T,hU)},resetLine:function(){dt._reset_line()},appendBlockData:function(h0,hY,hW,hV,hZ,e,T,hX,i,hT,hU){gr(h0);e8(hY);return dt._append_block_data(h0.length,hY.length,hW,hV,hZ,e,T,hX,i,hT,hU)},resetBlock:function(){dt._reset_block()},initWasmModule:gZ};var bX={block:[["precision highp float;attribute vec4 a_pos;attribute vec4 a_normal;attribute vec4 a_color;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform mat4 u_normal_matrix;uniform vec3 u_side_light_dir;uniform bool u_is_normal;varying vec4 _;varying float a;const vec3 b=vec3(0.06,0.06,0.06);vec3 c=vec3(0.1,0.1,0.1);void main(){vec4 d=u_proj_matrix*u_mv_matrix*a_pos;gl_Position=d;a=-1./500.-a_pos.z/100.;gl_Position.z=gl_Position.z+a;if(!u_is_normal){c=vec3(0.2,0.2,0.2);}if(u_is_normal&&a_normal==vec4(0.,0.,1.,1.)){_=a_color;}else{vec3 e=a_color.rgb;vec3 f=normalize(vec3(u_normal_matrix*a_normal));vec4 g=u_mv_matrix*vec4(0,1,0,0);vec3 h=normalize(g.xyz);float i=max(0.,dot(f,-h));vec4 j=u_mv_matrix*vec4(u_side_light_dir,0);vec3 k=normalize(j.xyz);float l=max(0.,dot(f,-k));if(a_pos.z<2.){float m=(2.-a_pos.z)/5.;l=l-m;}_=vec4(e+e*c*l+e*b*i,a_color.a);}}",""].join("\\n"),["precision highp float;varying vec4 _;varying float a;uniform float u_camera_far;float b=500.0;void main(){float c=(gl_FragCoord.z/gl_FragCoord.w-a);float d=_.a;if(c>u_camera_far-b){d=d*(u_camera_far-c)/b;if(d<=0.){discard;}}gl_FragColor=vec4(_.rgb,d);}",""].join("\\n")],shadow:[["precision highp float;attribute vec3 a_pos;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform vec3 u_light_dir;varying vec4 _;varying float a;const vec4 b=vec4(153.0/255.0,157.0/255.0,170.0/255.0,.15);void main(){float c=u_light_dir.x/u_light_dir.z*a_pos.z;float d=u_light_dir.y/u_light_dir.z*a_pos.z;vec2 e=vec2(a_pos.x+c,a_pos.y+d);a=a_pos.z;gl_Position=u_proj_matrix*u_mv_matrix*vec4(e,0,1);_=b;}",""].join("\\n"),["precision highp float;varying vec4 _;varying float a;uniform float u_camera_far;float b=500.0;void main(){if(a<1.){discard;}else{float c=gl_FragCoord.z/gl_FragCoord.w;float d=_.a;if(c>u_camera_far-b){d=d*(u_camera_far-c)/b;if(d<=0.){discard;}}gl_FragColor=vec4(_.rgb,d);}}",""].join("\\n")],arrow:[["precision highp float;attribute vec3 a_pos;attribute vec2 a_diff;attribute vec2 a_normal;attribute vec2 a_tex;attribute float a_layer_index;varying vec2 _;varying float a;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform float u_scale;uniform bool u_flat;void main(){float b=a_pos.z;vec2 c=(a_pos.xy+a_diff*u_scale)+normalize(a_normal)*2.5*u_scale;float d=-a_layer_index/500.-b/100.;if(u_flat){a=0.;gl_Position=u_proj_matrix*u_mv_matrix*vec4(c,0.,1);vec4 e=u_proj_matrix*u_mv_matrix*vec4(c,b/10.,1);gl_Position.z=e.z+d;}else{a=b;gl_Position=u_proj_matrix*u_mv_matrix*vec4(c,b,1);gl_Position.z=gl_Position.z+d;}_=a_tex;}",""].join("\\n"),["precision mediump float;uniform sampler2D u_image;uniform int u_draw_part;varying vec2 _;varying float a;void main(){if(u_draw_part==1){if(a>0.){discard;}}else if(u_draw_part==2){if(a==0.){discard;}}gl_FragColor=texture2D(u_image,_);}",""].join("\\n")],grid:[["precision highp float;attribute vec2 a_pos;attribute vec2 a_tex;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform float u_tex_scale;varying vec2 _;void main(){vec4 a=u_proj_matrix*u_mv_matrix*vec4(a_pos,0,1);gl_Position=a;_=a_tex*u_tex_scale;}",""].join("\\n"),["precision mediump float;uniform sampler2D u_image;varying vec2 _;void main(){gl_FragColor=texture2D(u_image,_);}",""].join("\\n")],line:[["attribute vec2 a_pos;attribute vec2 a_normal;attribute vec4 a_color;attribute vec4 a_data;uniform mat4 u_mv_matrix;uniform mat4 u_proj_matrix;uniform float u_scale;uniform bool u_flat;varying float _;varying vec4 a;varying float b;varying float c;varying float d;const float e=0.5;void main(){vec2 f=a_normal/10.;_=a_data.x;float g=a_data.y/100.;float h=a_data.z;float i=length(f);float j=1.+e/i;b=1.-(2.*e/(i+e));a=a_color;d=-h/500.-g/100.;vec2 k=a_pos/10.+f*j*u_scale;if(u_flat){gl_Position=u_proj_matrix*u_mv_matrix*vec4(k,0.,1);vec4 l=u_proj_matrix*u_mv_matrix*vec4(k,g/10.,1);gl_Position.z=l.z+d;c=0.;}else{gl_Position=u_proj_matrix*u_mv_matrix*vec4(k,g,1.);gl_Position.z=gl_Position.z+d;c=g;}}",""].join("\\n"),["precision highp float;uniform int u_draw_part;varying float _;varying vec4 a;varying float b;varying float c;varying float d;uniform float u_camera_far;float e=500.0;void main(){if(u_draw_part==1){if(c>0.){discard;}}else if(u_draw_part==2){if(c==0.){discard;}}vec4 f;if(abs(_)>b){float g=1.-(abs(_)-b)/(1.-b);f=vec4(a.rgb,g*a.a);}else{f=a;}float g=(gl_FragCoord.z/gl_FragCoord.w-d);float h=f.a;if(g>u_camera_far-e){h=h*(u_camera_far-g)/e;if(h<=0.){discard;}}f.a=h;gl_FragColor=f;}",""].join("\\n")],dash:[["attribute vec2 a_pos;attribute vec2 a_normal;attribute vec4 a_color;attribute vec4 a_data;uniform mat4 u_mv_matrix;uniform mat4 u_proj_matrix;uniform float u_scale;uniform float u_dash;uniform float u_step_zoom;uniform float u_tile_zoom;uniform bool u_is_single;uniform bool u_flat;varying float _;varying vec2 a;varying vec4 b;varying float c;varying float d;varying float e;const float f=0.2;void main(){vec2 g=a_normal/10.;_=a_data.x;float h=a_data.y/100.;float i=a_data.z;float j=a_data.w/10.;float k=length(g);float l=1.+f/k;c=1.-(2.*f/(k+f));b=vec4(a_color.rgb,floor(a_color.a/10.));float m=0.;if(u_is_single){m=j;}else{m=j/u_dash/pow(2.,u_tile_zoom-u_step_zoom);}if(_==1.){a=vec2(1.,m);}else{a=vec2(0.,m);}e=-i/500.-h/100.;vec2 n=a_pos/10.+g*l*u_scale;if(u_flat){gl_Position=u_proj_matrix*u_mv_matrix*vec4(n,0.,1);vec4 o=u_proj_matrix*u_mv_matrix*vec4(n,h/10.,1);gl_Position.z=o.z+e;d=0.;}else{gl_Position=u_proj_matrix*u_mv_matrix*vec4(n,h,1.);gl_Position.z=gl_Position.z+e;d=h;}}",""].join("\\n"),["precision highp float;uniform sampler2D u_image;uniform float u_dash;uniform int u_draw_part;varying vec4 b;varying float _;varying vec2 a;varying float d;varying float e;varying float c;uniform float u_camera_far;float f=500.0;void main(){if(u_draw_part==1){if(d>0.){discard;}}else if(u_draw_part==2){if(d==0.){discard;}}vec4 g=texture2D(u_image,a);float h=g.a+b.a;vec4 i;if(abs(_)>c){float j=1.-(abs(_)-c)/(1.-c);i=vec4(g.rgb*j,j*h);}else{i=g;}float j=(gl_FragCoord.z/gl_FragCoord.w-e);float k=i.a;if(j>u_camera_far-f){k=k*(u_camera_far-j)/f;if(k<=0.){discard;}}i.a=k;gl_FragColor=i;}",""].join("\\n")],fill:[["precision highp float;attribute vec3 a_pos;attribute vec4 a_color;attribute float a_layer_index;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform bool u_flat;varying vec4 _;varying float a;varying float b;void main(){float c=a_pos.z;b=-a_layer_index/500.-c/100.;if(u_flat){gl_Position=u_proj_matrix*u_mv_matrix*vec4(a_pos.xy,0.,1);vec4 d=u_proj_matrix*u_mv_matrix*vec4(a_pos.xy,c/10.,1);gl_Position.z=d.z+b;a=0.;}else{gl_Position=u_proj_matrix*u_mv_matrix*vec4(a_pos.xy,c,1);gl_Position.z=gl_Position.z+b;a=c;}_=a_color;}",""].join("\\n"),["precision highp float;uniform int u_draw_part;varying vec4 _;varying float a;varying float b;uniform float u_camera_far;float c=500.0;void main(){if(u_draw_part==1){if(a>0.){discard;}}else if(u_draw_part==2){if(a==0.){discard;}}float d=(gl_FragCoord.z/gl_FragCoord.w-b);float e=_.a/255.;if(d>u_camera_far-c){e=e*(u_camera_far-d)/c;if(e<=0.){discard;}}gl_FragColor=vec4(_.r/255.,_.g/255.,_.b/255.,e);}",""].join("\\n")],debug:[["precision highp float;attribute vec2 a_pos;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;void main(){gl_Position=u_proj_matrix*u_mv_matrix*vec4(a_pos,step(32767.,a_pos.x),1);}",""].join("\\n"),["precision mediump float;uniform vec4 u_color;void main(){gl_FragColor=u_color;}",""].join("\\n")],symbol:[["precision highp float;attribute vec4 aPosition;attribute float aZLevel;attribute vec2 aExtend;attribute vec2 aLoopOffset;attribute vec2 aVertexTextureCoord;varying vec2 _;varying vec2 a;varying vec3 b;uniform bool uUseRound;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;uniform mat4 uOrthoPMatrix;uniform vec2 uMapHalfSize;uniform float uMapZoom;uniform vec3 uCameraPosHigh;uniform vec3 uCameraPosLow;uniform vec3 uFixPositionInfo;void main(){vec4 c;vec3 d=vec3(aPosition.xy,aZLevel);vec3 e=vec3(aPosition.zw,aZLevel);a=vec2(1.,1.);d.x+=aLoopOffset.x;e.x+=aLoopOffset.y;vec4 f=uPMatrix*uMVMatrix*vec4((d-uCameraPosHigh)+(e-uCameraPosLow),1.);float g=f[3]+100.;if((f[0]<-g||f[0]>g||f[1]<-g||f[1]>g||f[2]<-g||f[2]>g)&&uFixPositionInfo[0]!=1.){a=vec2(0.,0.);}vec3 h=vec3(f[0]/f[3],f[1]/f[3],f[2]/f[3]);vec3 i=vec3((h[0]+1.)*uMapHalfSize[0],(1.-h[1])*uMapHalfSize[1],0.5*h[2]+0.5);if(uFixPositionInfo[0]==1.){float j=uMapHalfSize[0]*2.;if(i[0]>j+20.){d.x-=uFixPositionInfo[1];e.x-=uFixPositionInfo[2];f=uPMatrix*uMVMatrix*vec4((d-uCameraPosHigh)+(e-uCameraPosLow),1.);h=vec3(f[0]/f[3],f[1]/f[3],f[2]/f[3]);i=vec3((h[0]+1.)*uMapHalfSize[0],(1.-h[1])*uMapHalfSize[1],0.5*h[2]+0.5);}else if(i[0]<-20.){d.x+=uFixPositionInfo[1];e.x+=uFixPositionInfo[2];f=uPMatrix*uMVMatrix*vec4((d-uCameraPosHigh)+(e-uCameraPosLow),1.);h=vec3(f[0]/f[3],f[1]/f[3],f[2]/f[3]);i=vec3((h[0]+1.)*uMapHalfSize[0],(1.-h[1])*uMapHalfSize[1],0.5*h[2]+0.5);}}c=vec4(i.xy,-100.,1.);c.y=uMapHalfSize[1]*2.-c.y;if(uUseRound==true){c.x=floor(c.x+.5);c.y=floor(c.y+.5);}c.x+=aExtend.x;c.y+=aExtend.y;b=vec3(1.,i.z,1./f[3]);gl_Position=uOrthoPMatrix*c;_=vec2(aVertexTextureCoord.xy);}",""].join("\\n"),["precision highp float;uniform sampler2D uSampler;uniform bool uForRenderPNG8Text;uniform bool uHighlight;uniform float uCameraFar;float c=500.0;varying vec2 _;varying vec2 a;varying vec3 b;void main(){if(a[0]==0.){discard;return;}vec4 d=texture2D(uSampler,_);if(uForRenderPNG8Text==true&&d.a<0.7){d.a=0.;}if(uHighlight==true){float e=d.a;if(e!=0.){float f=d.r;float g=d.g;float h=d.b;float i=floor((f*255.+g*255.+h*255.)/3.+0.5);float j=i-90.;if(j<0.){j=0.;}d.r=(51.+j*1.3)/255.;d.g=(133.+j*0.8)/255.;d.b=1.;}}float e=(b[1]/b[2]);float f=1.;if(e>uCameraFar-c){f=(uCameraFar-e)/c;if(f<=0.){discard;}}gl_FragColor=d*f;}",""].join("\\n")],symbolline:[["precision highp float;attribute vec2 aPosition;attribute float aZLevel;attribute vec2 aExtend;attribute vec2 aVertexTextureCoord;attribute vec2 aRotationCenter;attribute float aRotationAngle;varying vec2 _;varying vec2 a;uniform bool uUseRound;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;uniform vec2 uMapHalfSize;uniform float uMapZoom;uniform bool uIsFlat;float b(float b){return pow(2.,18.-b);}void main(){vec4 c;float d=aZLevel;if(uIsFlat){d=0.;}a=vec2(1.,1.);float e=b(uMapZoom);vec2 f=aPosition.xy+aExtend.xy*e;float g=sin(radians(-aRotationAngle));float h=cos(radians(-aRotationAngle));mat2 i=mat2(h,-g,g,h);vec3 j=vec3(aRotationCenter.xy+i*(f.xy-aRotationCenter.xy),d);c=uMVMatrix*vec4(j,1.);gl_Position=uPMatrix*c;_=vec2(aVertexTextureCoord.xy);}",""].join("\\n"),["precision highp float;uniform sampler2D uSampler;uniform bool uForRenderPNG8Text;uniform float uCameraFar;float b=500.0;varying vec2 _;varying vec2 a;void main(){if(a[0]==0.){discard;return;}vec4 c=texture2D(uSampler,_);if(uForRenderPNG8Text==true&&c.a<0.7){c.a=0.;}float d;bool e=false;d=(gl_FragCoord.z/gl_FragCoord.w);float f=c.a;if(d>uCameraFar-b){f=f*(uCameraFar-d)/b;if(f<1.){discard;}}gl_FragColor=vec4(c.rgb,f);}",""].join("\\n")],raster:[["precision highp float;attribute vec3 aVertexPosition;attribute vec2 aVertexTextureCoord;varying vec2 _;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;void main(){gl_Position=uPMatrix*uMVMatrix*vec4(aVertexPosition,1.);_=aVertexTextureCoord;}",""].join("\\n"),["precision highp float;uniform sampler2D uSampler;varying vec2 _;void main(){vec4 _=texture2D(uSampler,_);gl_FragColor=_;}",""].join("\\n")],sky:[["precision highp float;attribute vec3 aPos;uniform mat4 uPMatrix;uniform mat4 uMVMatrix;uniform float uHorizonY;uniform vec4 uGroundColor;uniform vec4 uSkyColor;varying vec4 _;void main(){vec2 a=aPos.xy;a.y+=uHorizonY;gl_Position=uPMatrix*uMVMatrix*vec4(a.xy,-2900.,1.);float b=aPos.z;if(b==0.){_=uGroundColor;}else{_=uSkyColor;}}",""].join("\\n"),["precision highp float;varying vec4 _;void main(){gl_FragColor=_;}",""].join("\\n")],smaa1:[["precision highp float;attribute vec3 position;attribute vec2 uv;uniform mat4 projectionMatrix;uniform mat4 modelViewMatrix;uniform vec2 resolution;varying vec2 _;varying vec4 a[3];void b(vec2 b){a[0]=b.xyxy+resolution.xyxy*vec4(-1.,0.,0.,1.);a[1]=b.xyxy+resolution.xyxy*vec4(1.,0.,0.,-1.);a[2]=b.xyxy+resolution.xyxy*vec4(-2.,0.,0.,2.);}void main(){_=uv;b(_);gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}",""].join("\\n"),["precision highp float;","#define A 0.1","uniform sampler2D tDiffuse;varying vec2 _;varying vec4 a[3];vec4 b(vec2 _,vec4 a[3],sampler2D b){vec2 c=vec2(A,A);vec4 d;vec3 e=texture2D(b,_).rgb;vec3 f=texture2D(b,a[0].xy).rgb;vec3 g=abs(e-f);d.x=max(max(g.r,g.g),g.b);vec3 h=texture2D(b,a[0].zw).rgb;g=abs(e-h);d.y=max(max(g.r,g.g),g.b);vec2 i=step(c,d.xy);if(dot(i,vec2(1.,1.))==0.)discard;vec3 j=texture2D(b,a[1].xy).rgb;g=abs(e-j);d.z=max(max(g.r,g.g),g.b);vec3 k=texture2D(b,a[1].zw).rgb;g=abs(e-k);d.w=max(max(g.r,g.g),g.b);float l=max(max(max(d.x,d.y),d.z),d.w);vec3 m=texture2D(b,a[2].xy).rgb;g=abs(e-m);d.z=max(max(g.r,g.g),g.b);vec3 n=texture2D(b,a[2].zw).rgb;g=abs(e-n);d.w=max(max(g.r,g.g),g.b);l=max(max(l,d.z),d.w);i.xy*=step(0.5*l,d.xy);return vec4(i,0.,0.);}void main(){gl_FragColor=b(_,a,tDiffuse);}",""].join("\\n")],smaa2:[["precision highp float;","#define A 8","#define B 16","#define C (1.0/vec2(160.0,560.0))","#define D (1.0/7.0)","attribute vec3 position;attribute vec2 uv;uniform vec2 resolution;uniform mat4 projectionMatrix;uniform mat4 modelViewMatrix;varying vec2 _;varying vec4 a[3];varying vec2 b;void c(vec2 c){b=c/resolution;a[0]=c.xyxy+resolution.xyxy*vec4(-0.25,0.125,1.25,0.125);a[1]=c.xyxy+resolution.xyxy*vec4(-0.125,0.25,-0.125,-1.25);a[2]=vec4(a[0].xz,a[1].yw)+vec4(-2.,2.,-2.,2.)*resolution.xxyy*float(A);}void main(){_=uv;c(_);gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}",""].join("\\n"),["precision highp float;","#define A 8","#define B 16","#define C (1.0/vec2(160.0,560.0))","#define D (1.0/7.0)","#define E(tex,coord,offset) texture2D(tex,coord+float(offset)*resolution,0.0)","uniform sampler2D tDiffuse;uniform sampler2D tArea;uniform sampler2D tSearch;uniform vec2 resolution;varying vec2 _;varying vec4 a[3];varying vec2 b;vec2 c(vec2 _){return sign(_)*floor(abs(_)+0.5);}float d(sampler2D d,vec2 e,float f,float g){e.r=f+e.r*g;return 255.*texture2D(d,e,0.).r;}float e(sampler2D e,sampler2D f,vec2 g,float h){vec2 i=vec2(0.,1.);for(int j=0;j<A;j++){i=texture2D(e,g,0.).rg;g-=vec2(2.,0.)*resolution;if(!(g.x>h&&i.g>0.8281&&i.r==0.))break;}g.x+=0.25*resolution.x;g.x+=resolution.x;g.x+=2.*resolution.x;g.x-=resolution.x*d(f,i,0.,0.5);return g.x;}float f(sampler2D f,sampler2D g,vec2 h,float i){vec2 j=vec2(0.,1.);for(int k=0;k<A;k++){j=texture2D(f,h,0.).rg;h+=vec2(2.,0.)*resolution;if(!(h.x<i&&j.g>0.8281&&j.r==0.))break;}h.x-=0.25*resolution.x;h.x-=resolution.x;h.x-=2.*resolution.x;h.x+=resolution.x*d(g,j,0.5,0.5);return h.x;}float g(sampler2D g,sampler2D h,vec2 i,float j){vec2 k=vec2(1.,0.);for(int l=0;l<A;l++){k=texture2D(g,i,0.).rg;i+=vec2(0.,2.)*resolution;if(!(i.y>j&&k.r>0.8281&&k.g==0.))break;}i.y-=0.25*resolution.y;i.y-=resolution.y;i.y-=2.*resolution.y;i.y+=resolution.y*d(h,k.gr,0.,0.5);return i.y;}float h(sampler2D h,sampler2D i,vec2 j,float k){vec2 l=vec2(1.,0.);for(int m=0;m<A;m++){l=texture2D(h,j,0.).rg;j-=vec2(0.,2.)*resolution;if(!(j.y<k&&l.r>0.8281&&l.g==0.))break;}j.y+=0.25*resolution.y;j.y+=resolution.y;j.y+=2.*resolution.y;j.y-=resolution.y*d(i,l.gr,0.5,0.5);return j.y;}vec2 i(sampler2D i,vec2 j,float k,float l,float m){vec2 n=float(B)*c(4.*vec2(k,l))+j;n=C*n+(0.5*C);n.y+=D*m;return texture2D(i,n,0.).rg;}vec4 j(vec2 j,vec2 k,vec4 l[3],sampler2D m,sampler2D n,sampler2D o,ivec4 p){vec4 q=vec4(0.,0.,0.,0.);vec2 r=texture2D(m,j).rg;if(r.g>0.){vec2 s;vec2 t;t.x=e(m,o,l[0].xy,l[2].x);t.y=l[1].y;s.x=t.x;float u=texture2D(m,t,0.).r;t.x=f(m,o,l[0].zw,l[2].y);s.y=t.x;s=s/resolution.x-k.x;vec2 v=sqrt(abs(s));t.y-=1.*resolution.y;float w=E(m,t,ivec2(1,0)).r;q.rg=i(n,v,u,w,float(p.y));}if(r.r>0.){vec2 s;vec2 t;t.y=g(m,o,l[1].xy,l[2].z);t.x=l[0].x;s.x=t.y;float u=texture2D(m,t,0.).g;t.y=h(m,o,l[1].zw,l[2].w);s.y=t.y;s=s/resolution.y-k.y;vec2 v=sqrt(abs(s));t.y-=1.*resolution.y;float w=E(m,t,ivec2(0,1)).g;q.ba=i(n,v,u,w,float(p.x));}return q;}void main(){gl_FragColor=j(_,b,a,tDiffuse,tArea,tSearch,ivec4(0.));}",""].join("\\n")],smaa3:[["precision highp float;uniform vec2 resolution;attribute vec3 position;attribute vec2 uv;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;varying vec2 _;varying vec4 a[2];void b(vec2 b){a[0]=b.xyxy+resolution.xyxy*vec4(-1.,0.,0.,1.);a[1]=b.xyxy+resolution.xyxy*vec4(1.,0.,0.,-1.);}void main(){_=uv;b(_);gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}",""].join("\\n"),["precision highp float;uniform sampler2D tDiffuse;uniform sampler2D tColor;uniform vec2 resolution;varying vec2 _;varying vec4 a[2];vec4 b(vec2 _,vec4 a[2],sampler2D b,sampler2D c){vec4 d;d.xz=texture2D(c,_).xz;d.y=texture2D(c,a[1].zw).g;d.w=texture2D(c,a[1].xy).a;if(dot(d,vec4(1.,1.,1.,1.))<1e-5){return texture2D(b,_,0.);}else{vec2 e;e.x=d.a>d.b?d.a:-d.b;e.y=d.g>d.r?-d.g:d.r;if(abs(e.x)>abs(e.y)){e.y=0.;}else{e.x=0.;}vec4 f=texture2D(b,_,0.);_+=sign(e)*resolution;vec4 g=texture2D(b,_,0.);float h=abs(e.x)>abs(e.y)?abs(e.x):abs(e.y);f.xyz=pow(f.xyz,vec3(2.2));g.xyz=pow(g.xyz,vec3(2.2));vec4 i=mix(f,g,h);i.xyz=pow(i.xyz,vec3(1./2.2));return i;}}void main(){gl_FragColor=b(_,a,tColor,tDiffuse);}",""].join("\\n")],overlayfill:[["precision highp float;attribute vec2 a_pos;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;void main(){gl_Position=u_proj_matrix*u_mv_matrix*vec4(a_pos,0,1);}",""].join("\\n"),["precision mediump float;uniform vec4 u_color;void main(){gl_FragColor=u_color;}",""].join("\\n")],overlayblock:[["precision highp float;attribute vec4 a_pos;attribute vec4 a_normal;attribute vec4 a_color;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform mat4 u_normal_matrix;uniform vec3 u_side_light_dir;uniform bool u_is_normal;varying vec4 _;varying float a;varying vec4 b;const vec3 c=vec3(0.06,0.06,0.06);vec3 d=vec3(0.1,0.1,0.1);void main(){vec4 e=u_proj_matrix*u_mv_matrix*a_pos;gl_Position=e;a=-1./500.-a_pos.z/100.;gl_Position.z=gl_Position.z+a;b=a_normal;_=a_color;vec3 f=a_color.rgb;vec3 g=normalize(vec3(u_normal_matrix*a_normal));vec4 h=u_mv_matrix*vec4(0.5,0.5,0,0);vec3 i=normalize(h.xyz);float j=max(0.,dot(g,-i));_=vec4(f+f*c*j,a_color.a);}",""].join("\\n"),["precision highp float;varying vec4 _;varying float a;uniform float u_camera_far;float c=500.0;void main(){float d=(gl_FragCoord.z/gl_FragCoord.w-a);float e=_.a;if(d>u_camera_far-c){e=e*(u_camera_far-d)/c;if(e<=0.){discard;}}gl_FragColor=vec4(_.rgb,e);}",""].join("\\n")],marker3d:[["attribute vec4 a_pos;attribute float a_height;attribute vec4 a_color;attribute float a_shape;attribute float a_size;attribute vec4 a_texture_coord;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform vec3 u_camera_pos_high;uniform vec3 u_camera_pos_low;varying vec4 _;varying vec4 a;varying float b;void main(){if(a_color.w>=0.&&a_color.w<=1.){_=a_color;}else{_=vec4(a_color.xyz,1.);}b=a_shape;a=a_texture_coord;vec3 c=vec3(a_pos.xy,a_height);vec3 d=vec3(a_pos.zw,a_height);vec4 e=u_proj_matrix*u_mv_matrix*vec4((c-u_camera_pos_high)+(d-u_camera_pos_low),1.);gl_Position=e;gl_PointSize=a_size;}",""].join("\\n"),["precision mediump float;varying vec4 _;varying float b;varying vec4 a;uniform bool u_use_texture;uniform sampler2D u_Sampler;void main(){vec4 _=_;if(b==1.){float a=distance(gl_PointCoord,vec2(0.5,0.5));if(a>0.5){discard;}float b=1.;b=1.-smoothstep(0.49,0.5,a);_.a*=b;}if(u_use_texture){vec4 a=a;float b=a.x;float c=a.z-a.x;float d=a.y;float e=a.w-a.y;_=texture2D(u_Sampler,vec2(b+gl_PointCoord.x*c,d+e*(1.-gl_PointCoord.y)));}gl_FragColor=_;}",""].join("\\n")],groundoverlay:[["precision highp float;attribute vec3 a_pos;attribute vec4 a_texture_coord;varying vec4 _;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;void main(){gl_Position=u_proj_matrix*u_mv_matrix*vec4(a_pos.xy,0.,1.);_=a_texture_coord;}",""].join("\\n"),["precision highp float;varying vec4 _;uniform sampler2D u_Sampler;uniform float u_opacity;void main(){vec4 _=texture2D(u_Sampler,vec2(_.s,_.t));_.a*=u_opacity;gl_FragColor=_;}",""].join("\\n")]};function ae(i,e){this.gl=i;this.map=e;this.cache={};this.bind()}ae.prototype.bind=function(){var e=this;this.map.on("update",function(T){var hT=T.changedStatus;if(hT.onsize_changed){for(var i in e.cache){e.cache[i].lastState.projMatrix=false}}})};ae.prototype._createProgram=function(e){var h0=this.gl;var hZ=h0.createProgram();var hV=bX[e];var hW=h0.createShader(h0.FRAGMENT_SHADER);h0.shaderSource(hW,hV[1]);h0.compileShader(hW);h0.attachShader(hZ,hW);var h4=h0.createShader(h0.VERTEX_SHADER);h0.shaderSource(h4,hV[0]);h0.compileShader(h4);h0.attachShader(hZ,h4);h0.linkProgram(hZ);var hX={};var h2=h0.getProgramParameter(hZ,h0.ACTIVE_ATTRIBUTES);for(var hY=0;hY<h2;hY++){var hU=h0.getActiveAttrib(hZ,hY);hX[hU.name]=h0.getAttribLocation(hZ,hU.name)}var h3={};var hT=h0.getProgramParameter(hZ,h0.ACTIVE_UNIFORMS);for(var h1=0;h1<hT;h1++){var T=h0.getActiveUniform(hZ,h1);h3[T.name]=h0.getUniformLocation(hZ,T.name)}return{program:hZ,attributes:hX,numAttributes:h2,uniforms:h3,lastState:{}}};ae.prototype._createProgramCached=function(e){if(!this.cache[e]){this.cache[e]=this._createProgram(e)}return this.cache[e]};ae.prototype.useProgram=function(hT){var T=this.gl;var i=this._createProgramCached(hT);var e=this.currentProgram;if(e!==i){T.useProgram(i.program);this.currentProgram=i}return i};var hw={};hw.symbol=[{name:"aPosition",components:4,offset:0,type:"Float32"},{name:"aZLevel",components:1,offset:16,type:"Float32"},{name:"aExtend",components:2,offset:20,type:"Float32"},{name:"aLoopOffset",components:2,offset:28,type:"Float32"},{name:"aVertexTextureCoord",components:2,offset:36,type:"Float32"}];hw.symbolline=[{name:"aPosition",components:2,offset:0,type:"Float32"},{name:"aZLevel",components:1,offset:8,type:"Float32"},{name:"aExtend",components:2,offset:12,type:"Float32"},{name:"aRotationCenter",components:2,offset:20,type:"Float32"},{name:"aRotationAngle",components:1,offset:28,type:"Float32"},{name:"aVertexTextureCoord",components:2,offset:32,type:"Float32"}];hw.arrowComponentsCount=10;hw.arrow=[{name:"a_pos",components:3,offset:0,type:"Float32"},{name:"a_diff",components:2,offset:12,type:"Float32"},{name:"a_normal",components:2,offset:20,type:"Float32"},{name:"a_tex",components:2,offset:28,type:"Float32"},{name:"a_layer_index",components:1,offset:36,type:"Float32"}];hw.fillComponentsCount=8;hw.fill=[{name:"a_pos",components:3,offset:0,type:"Float32"},{name:"a_color",components:4,offset:12,type:"Uint8"},{name:"a_layer_index",components:1,offset:16,type:"Float32"}];hw.overlayLineComponentsCount=12;hw.overlayLine=[{name:"a_pos",components:2,offset:0,type:"Float32"},{name:"a_normal",components:2,offset:8,type:"Float32"},{name:"a_color",components:4,offset:16,type:"Uint8",normalize:true},{name:"a_data",components:4,offset:20,type:"Float32"}];hw.lineComponentsCount=12;hw.line=[{name:"a_pos",components:2,offset:0,type:"Int16"},{name:"a_normal",components:2,offset:4,type:"Int16"},{name:"a_color",components:4,offset:8,type:"Uint8",normalize:true},{name:"a_data",components:4,offset:12,type:"Int16"}];var t=[0,0,0,256,512,512,512,512,512,512,256,512,512,512,512,512,1024,1024,1024,1024,1024,1024];var hN={grid:cD,line:bv,fill:cy,block:hC,shadow:ab,debug:bL,arrow:fv,symbol:cb,symbolline:gd,raster:hc,overlayBlock:dm,marker3d:fx,groundoverlay:d8};var J={3:{start:3},4:{start:4},5:{start:4},6:{start:6},7:{start:6},8:{start:8},9:{start:8},10:{start:10},11:{start:11},12:{start:11},13:{start:11},14:{start:14},15:{start:14},16:{start:16},17:{start:16},18:{start:18},19:{start:18},20:{start:18},21:{start:18},22:{start:18},23:{start:18},24:{start:18},25:{start:18}};var s=[245,245,245,255];var cu=127;var cH=128;var v=11;var dE=v*6;var eA=15;var af=6;var f7=10;var gV=f7*6;var hy=50;var fJ=41;var hm=0;var bk=1;var a3=2;function hg(i){i.preventDefault();setTimeout(function(){window.location.reload()},200)}function ck(hT,i){var T=this;this._map=hT;this._textRenderType=hT.config.textRenderType;this._gridBufferCache={};this._debugBufferCache={};this._shadowPosVec3=vec3.fromValues(2,1,1);this._sideLightDirVec3=vec3.fromValues(0,1,2);this._camera=i;this._canvas=this._initCanvas();this._useSMAA=!f6()&&!D.Browser.ie&&hT.config.smaa!==false;this._currentTextureIsFull=false;var hU=this.gl=this._getWebGLContext();this._float32ArrayForPolyline=new Float32Array(65535);this._uint16ArrayForPolyline=new Uint16Array(65535);this._textureCache=new e0((f6()||D.Browser.ie)?64:128,{clearCallback:function(hV){if(hV){hU.deleteTexture(hV)}}});this._labelTextureAtlasOffset={};var e=a9.params.maxTextureSize;if(a7()>1&&this._textRenderType==="image"){this._labelTextTextureSize=[4096,Math.min(4096+1024,e)]}else{this._labelTextTextureSize=[4096,4096]}if(this._textRenderType==="canvas"){this._renderPng8Text=false}else{this._renderPng8Text=true}this._lineLabelBuffer=null;this._fixedLabelBuffer=null;this._iconLabelBuffer=null;this._highlightLabelBuffer=null;this._marker3dVertexBuffer=null;this._markerVertexBuffer=null;this._polylineBufferArray=[{vertex:null,element1:null,vao1:null}];this._polygonBuffer=new Array(20);this._groundBuffer=new Array(20);this._groundoverlayBuffer=new Array(20);this._textTextureManager=new cc.TextTextureManager(hU,{width:this._labelTextTextureSize[0],height:this._labelTextTextureSize[1],unpackAlpha:true});this._iconTextureManager=new cc.TextTextureManager(hU,{width:1024,height:1024,unpackAlpha:true});this._iconTextureAtlas=this._iconTextureManager.getEmptyTexture();this._iconTextureAtlasOffset={};this._iconTextureAtlasCoords={};this._textureAddToJob={};this._isIdle=false;this._identityMatrix=mat4.create();this._initialize();this._handleContextStatus();this.draw()}D.extend(ck.prototype,{draw:function(hT){var ib=this.gl;var ik=this;var ii=ik._map;var h9=this.mapZoom=ii.getZoom();if(!this.stepZoom){this.stepZoom=h9}ii.beforeRender&&ii.beforeRender();this.createGridBuffer(Math.floor(h9));this._isIdle=hT?hT.idle:false;if(this._isIdle&&this._useSMAA){b5.loadTexture(this,ib);if(this._frameBufferSizeInvalid===true){this.clearPreviousSMAAFramebuffer();this.initSMAAFrameBuffers();this._frameBufferSizeInvalid=false}}else{this._frameBufferSizeInvalid=true}this.projMatrix=this._camera.getProjectionMatrix3D();this.projMatrix2D=this._camera.getProjectionMatrix();this.cameraPosition=this._camera.getPosition();var il=ii._featureMgr.getResult();var hU=il.bkData;var hW=il.eleData;var hX=ii.getSize();var h8=hX.width;var h6=hX.height;this.mapHalfSize=[h8/2,h6/2];this.polyZoomRatio=Math.pow(2,18-h9);this.gridTextureScale=dj.mapZoomTileSize[Math.floor(h9)]/128;var ig=ii._displayOptions;this.isFlat=ig.isFlat;if(this._isIdle&&this._smaaInfo.glDrawSMAAReady===true){ib.bindFramebuffer(ib.FRAMEBUFFER,this._smaaPasses[0].framebuffer)}this.tileClippintRefer=0;this.showIndoorContour=false;this.currentIndoorUid=null;if(ii._indoorMgr){this.currentIndoorUid=ii._indoorMgr.currentUid}if(this.currentIndoorUid&&h9>=17){this.showIndoorContour=true}ik.clearGLStatus({stencil:true,color:true,depth:true});this._state.enableCap("depthTest");this._state.blendFunc(ib.SRC_ALPHA,ib.ONE_MINUS_SRC_ALPHA,ib.ONE,ib.ONE_MINUS_SRC_ALPHA);this.calShadowPos();ik.clearGLStatus({depth:true});var hZ=0;for(var h0=0;h0<hU.length;h0++){if(!hU[h0]){continue}var ij=hU[h0];if(h0>0&&ig.layer===false){continue}if(ij.dataType===2){var ih=[0,0,0];for(var ic=0;ic<ij.length;ic++){var h7=undefined;for(var ia=0;ia<ij[ic].length;ia++){var T=ij[ic][ia];var e=T.tileInfo.useZoom;if(e!==h7){ih[ic]++;h7=e}}}for(var ic=0;ic<ij.length;ic++){var ie=1;if(ic===1){ie+=ih[0]+ih[2]}else{if(ic===2){ie+=ih[0]}}var h5=ie+hZ;h5=this.drawBase(ij[ic],h5,h9,h0,ic===2);var hV=false;for(var ia=0;ia<ij[ic].length;ia++){var T=ij[ic][ia];if(T.dataType===2||!T.dataType){if(T.renderData&&T.renderData.base3d){hV=true;this.drawTileBase3D(T,h9,h5,bk)}}}if(ig.indoor){for(var ia=0;ia<ij[ic].length;ia++){var T=ij[ic][ia];if(T.dataType===2||!T.dataType){if(T.renderData&&T.renderData.indoorBase){this.drawIndoorBase(T,h9)}}}}if(hV&&!this.isFlat){this.gl.stencilFunc(this.gl.ALWAYS,1<<7,cH);for(var ia=0;ia<ij[ic].length;ia++){var T=ij[ic][ia];if(T.dataType===2||!T.dataType){if(T.renderData&&T.renderData.base3d){this.drawTileBase3D(T,h9,h5,a3)}}}this.gl.stencilFunc(this.gl.ALWAYS,0,255)}for(var ia=0;ia<ij[ic].length;ia++){var T=ij[ic][ia];if(T.dataType===2||!T.dataType){if(T.renderData&&T.renderData.virtual){this.drawTileVirtual(T,h9)}}}}hZ+=ih[0]+ih[1]+ih[2]}else{this._state.disableCap("depthTest");if(ij.png8){this._state.blendFunc(ib.ONE,ib.ONE_MINUS_SRC_ALPHA)}else{this._state.blendFunc(ib.SRC_ALPHA,ib.ONE_MINUS_SRC_ALPHA,ib.ZERO,ib.ONE)}for(var ic=0;ic<ij[2].length;ic++){if(!ij[2][ic]){continue}this.drawRasterTile(ij[2][ic],h9)}this._state.enableCap("depthTest");if(ij.png8){this._state.blendFunc(ib.SRC_ALPHA,ib.ONE_MINUS_SRC_ALPHA,ib.ZERO,ib.ONE)}}}if(ig.overlay){if(hW[0].length>0){this._state.disableCap("depthTest");this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawPolygon(hW[0]);this._state.enableCap("depthTest")}if(hW[5].length>0){this._state.disableCap("depthTest");this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawGroundOverlay(hW[5]);this._state.enableCap("depthTest")}if(hW[1].length>0){this._state.disableCap("depthTest");this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawPolyline(hW[1]);this._state.enableCap("depthTest")}if(hW[6].length>0){this._state.disableCap("depthTest");this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawPrism(hW[6]);this._state.enableCap("depthTest")}}this._map.drawOverlay&&this._map.drawOverlay(ib);this.draw3D(hU);if(ii.getTilt()>10){var id=ii.pointToPixelIn(ii.getBoundsIn().pointTopLeft).y+100;if(id>0&&ii.config.showSky!==false){M(this,this._identityMatrix,id,ii.height,this._skyColor)}}ii.insertRender&&ii.insertRender();if(this._useSMAA&&this._isIdle&&this._smaaInfo.glDrawSMAAReady===true){this.drawSMAA()}this._state.disableCap("depthTest");this.mvMatrixMarker=this._camera.getMCPlaneMVMatrix();this.mvMatrixMarker[12]=this.mvMatrixMarker[13]=this.mvMatrixMarker[14]=0;this._checkTextureAtlasUsage();var h3=aG(this.cameraPosition[0]);var h2=aG(this.cameraPosition[1]);var h1=aG(this.cameraPosition[2]);this.cameraPosHigh=[h3[0],h2[0],h1[0]];this.cameraPosLow=[h3[1],h2[1],h1[1]];if(ig.poi){this._state.blendFunc(ib.ONE,ib.ONE_MINUS_SRC_ALPHA);if(ig.poiText&&hW[2].length>0){for(var ic=0;ic<hW[2].length;ic++){var h4=hW[2][ic];if(h4.lineLabels.length===0){continue}this.drawLineLabelSymbol(h4.lineLabels,this._camera.getModelViewMatrixForLineLabel(h4.tileInfo))}}if(hW[3].length>0){this.drawFixedLabelSymbol(hW[3])}if(ig.poiText&&hW[4].length>0){this.drawHighlightFixedLabelSymbol(hW[4])}}if(ig.overlay){this._state.blendFunc(ib.ONE,ib.ONE_MINUS_SRC_ALPHA);var hY=false;if(h9<12){hY=true}if(hW[8].length>0){this.drawSymbol(hW[8],{fixPosition:hY})}if(hW[7].length>0){this.drawMarker3D(hW[7])}}ii.afterRender&&ii.afterRender();this._map.dispatchEvent(new bc("ondraw"))},calShadowPos:function(){this.isDrawShadow=false;var i=this._map;var e=!(typeof i.config.style==="string");if(e||this.mapZoom<18){return}var T=i.getSolarInfo();if(df(T.solarAltitude)>1){this.isDrawShadow=true;this._shadowPosVec3[0]=Math.sin(T.solarAzimuth);this._shadowPosVec3[1]=Math.cos(T.solarAzimuth);if(T.centerPosition==="south"){this._shadowPosVec3[1]=-this._shadowPosVec3[1]}this._shadowPosVec3[2]=Math.tan(T.solarAltitude)*0.5+1.5;this._sideLightDirVec3[0]=this._shadowPosVec3[0];this._sideLightDirVec3[1]=this._shadowPosVec3[1];this._sideLightDirVec3[2]=-this._shadowPosVec3[2]}},clearPreviousSMAAFramebuffer:function(){var hT=this.gl;for(var e=0;e<this._smaaPasses.length;e++){hT.deleteFramebuffer(this._smaaPasses[e].framebuffer);hT.deleteTexture(this._smaaPasses[e].texture);hT.deleteRenderbuffer(this._smaaPasses[e].renderbuffer)}this._smaaPasses=[];if(this._smaaBuffer){var T=this._smaaBuffer;T.vao1&&T.vao1.destroy(hT);T.vao2&&T.vao2.destroy(hT);T.vao3&&T.vao3.destroy(hT);T.vertex&&T.vertex.destroy(hT);this._smaaBuffer=null}},initSMAAFrameBuffers:function(){this._smaaPasses=[];for(var e=0;e<3;e++){var T=this.createFramebuffer();this._smaaPasses.push({framebuffer:T[0],texture:T[1],renderbuffer:T[2]})}},createFramebuffer:function(){var hT=this.gl;var T=hT.createFramebuffer();hT.bindFramebuffer(hT.FRAMEBUFFER,T);T.width=hT.drawingBufferWidth;T.height=hT.drawingBufferHeight;var i=hT.createTexture();hT.bindTexture(hT.TEXTURE_2D,i);hT.texParameteri(hT.TEXTURE_2D,hT.TEXTURE_MAG_FILTER,hT.LINEAR);hT.texParameteri(hT.TEXTURE_2D,hT.TEXTURE_MIN_FILTER,hT.LINEAR);hT.texParameteri(hT.TEXTURE_2D,hT.TEXTURE_WRAP_S,hT.CLAMP_TO_EDGE);hT.texParameteri(hT.TEXTURE_2D,hT.TEXTURE_WRAP_T,hT.CLAMP_TO_EDGE);hT.texImage2D(hT.TEXTURE_2D,0,hT.RGBA,T.width,T.height,0,hT.RGBA,hT.UNSIGNED_BYTE,null);hT.framebufferTexture2D(hT.FRAMEBUFFER,hT.COLOR_ATTACHMENT0,hT.TEXTURE_2D,i,0);var e=hT.createRenderbuffer();hT.bindRenderbuffer(hT.RENDERBUFFER,e);hT.renderbufferStorage(hT.RENDERBUFFER,hT.DEPTH_STENCIL,T.width,T.height);hT.framebufferRenderbuffer(hT.FRAMEBUFFER,hT.DEPTH_STENCIL_ATTACHMENT,hT.RENDERBUFFER,e);hT.bindTexture(hT.TEXTURE_2D,null);hT.bindRenderbuffer(hT.RENDERBUFFER,null);hT.bindFramebuffer(hT.FRAMEBUFFER,null);return[T,i,e]},drawSMAA:function(){if(!this._smaaBuffer){var i=this._width;var T=this._height;var e=new Float32Array([0,0,-900,0,0,i,0,-900,1,0,i,T,-900,1,1,0,0,-900,0,0,i,T,-900,1,1,0,T,-900,0,1]);this._smaaBuffer={vertex:new fj(e,{components:5,members:[{name:"position",components:3,offset:0,type:"Float32"},{name:"uv",components:2,offset:12,type:"Float32"}]},fj.BufferType.VERTEX),vao1:new ht(),vao2:new ht(),vao3:new ht()}}b5.draw(this,this._smaaBuffer,this._identityMatrix,this._smaaPasses,this._width,this._height)},createBlockData:function(i){var e=new fj(i.vertex,{components:7,members:[{name:"a_pos",components:3,offset:0,type:"Float32"},{name:"a_normal",components:3,offset:12,type:"Float32"},{name:"a_color",components:4,offset:24,type:"Uint8",normalize:true}]},fj.BufferType.VERTEX);return{vao1:new ht(),vertex:e,element1:new fj(i.index,{components:1},fj.BufferType.ELEMENT)}},createOverlayBlockData:function(T,i){var e=new fj(T.vertex,{components:7,members:[{name:"a_pos",components:3,offset:0,type:"Float32"},{name:"a_normal",components:3,offset:12,type:"Float32"},{name:"a_color",components:4,offset:24,type:"Uint8",normalize:true}]},fj.BufferType.VERTEX);return{vao1:new ht(),vertex:e,element1:new fj(T.index,{components:1},fj.BufferType.ELEMENT)}},createArrowData:function(e){return{vao1:new ht(),element1:new fj(e[1],{components:1},fj.BufferType.ELEMENT),vertex:new fj(e[0],{components:hw.arrowComponentsCount,members:hw.arrow},fj.BufferType.VERTEX)}},createGroundOverlayData:function(hT,e){if(!hT){return null}var hV=[0,0,1,0,1,1,0,1];var hU=hT.vertex;var hX=[];for(var T=0;T<hU.length;T+=2){hX.push(hU[T]);hX.push(hU[T+1]);hX.push(hV[T]);hX.push(hV[T+1])}hT.finnalVertex=new Float32Array(hX);var hW=this._groundoverlayBuffer;this._groundoverlayBuffer=hW.vertex=new fj(hT.finnalVertex,{components:4,members:[{name:"a_pos",components:2,offset:0,type:"Float32"},{name:"a_texture_coord",components:2,offset:8,type:"Float32"}]},fj.BufferType.VERTEX);hW.vao1=new ht();hW.textureType=hT.textureSource;hW.element1=new fj(hT.index,{components:1},fj.BufferType.ELEMENT);return hW},createOverlayFillData:function(T,e,i){var hT=this._polygonBuffer[i];if(!hT){hT={};hT.vertex=new fj(T[1],{components:2,members:[{name:"a_pos",components:2,offset:0,type:e}]},fj.BufferType.VERTEX);hT.vao1=new ht();hT.element1=new fj(T[2],{components:1},fj.BufferType.ELEMENT)}else{hT.vao1.update(this.gl,hT.vertex,T[1],T[1].length,hT.element1,T[2],T[2].length)}return hT},createFillData:function(hU){if(!hU[0]){return null}var T=new fj(hU[0],{components:hw.fillComponentsCount,members:hw.fill},fj.BufferType.VERTEX);var e={vao1:new ht(),vertex:T,element1:new fj(hU[1],{components:1},fj.BufferType.ELEMENT)};if(hU[2]){e.border=[];for(var hT=0;hT<hU[2].length;hT++){e.border.push({element1:new fj(hU[2][hT].styleData[1],{components:1},fj.BufferType.ELEMENT),vao1:new ht(),vertex:this.createLineBuffer(null,hU[2][hT].styleData[0],false)})}}return e},createLineBuffer:function(e,T,i){if(T){if(e){if(e.length>T.length){T=new Float32Array(e.length)}T.set(e)}}if(i){return new fj(T,{components:hw.overlayLineComponentsCount,members:hw.overlayLine},fj.BufferType.VERTEX)}else{return new fj(T,{components:hw.lineComponentsCount,members:hw.line},fj.BufferType.VERTEX)}},createLineData:function(i){var e={};e.vertex=this.createLineBuffer(null,i[0],false);e.element1=new fj(i[1],{components:1},fj.BufferType.ELEMENT);e.vao1=new ht();return e},createPolylineData:function(hT){var hX=[];for(var T=0;T<hT.length;T++){var hU=hT[T].styleData[0];var e=hT[T].styleData[1];if(hU.length===0){continue}var hW={};if(!this._polylineBufferArray[T]){this._polylineBufferArray[T]={vertex:null,element1:null,vao1:null}}var hV=this._polylineBufferArray[T];if(!hV.vertex){hV.vertex=this.createLineBuffer(hU,this._float32ArrayForPolyline,true)}if(e.length>this._uint16ArrayForPolyline.length){this._uint16ArrayForPolyline=new Uint16Array(e.length)}this._uint16ArrayForPolyline.set(e);if(!hV.element1){hV.element1=new fj(this._uint16ArrayForPolyline,{components:1},fj.BufferType.ELEMENT,e.length)}if(!hV.vao1){hV.vao1=new ht()}else{if(hU.length>this._float32ArrayForPolyline.length){this._float32ArrayForPolyline=new Float32Array(hU)}else{this._float32ArrayForPolyline.set(hU)}hV.vao1.update(this.gl,hV.vertex,this._float32ArrayForPolyline,hU.length,hV.element1,this._uint16ArrayForPolyline,e.length)}hX.push(hV)}if(hX.length===0){return null}return hX},createLabelData:function(hW,ia,h9,hV){if(hW.length===0){return}var il=this._labelTextTextureSize;var h3=0;var hT=0;var ig=hW.length;var id=this.gl;var ij=this[h9];var h4=0;var im=dE;var ih=v;if(hV){im=gV;ih=f7}for(var ie=0;ie<ig;ie++){var h5=hW[ie];if(!h5||!h5.renderData){continue}var hU=h5.textureSource;if(!hU){continue}var T=h5.renderData.vertex;h4+=T.length/im}var h2=h4*im;if(h2>this._labelVertexBuffer.length){this._labelVertexBuffer=new Float32Array(h2);if(ij){ij.vao.destroy(id);ij.destroy(id);ij=this[h9]=null}}var hZ=this._iconLabelBuffer;if(h2>this._labelIconVertexBuffer.length){this._labelIconVertexBuffer=new Float32Array(h2);if(hZ){hZ.vao.destroy(id);hZ.destroy(id);hZ=this._iconLabelBuffer=null}}for(var ie=0;ie<ig;ie++){var h5=hW[ie];if(!h5){continue}if(!h5.renderData&&h5.iconRenderData){if(hT+im<this._labelIconVertexBuffer.length){this._labelIconVertexBuffer.set(h5.iconRenderData.vertex,hT);hT+=im}continue}var T=h5.renderData.vertex;var h6=h5.renderData.textureCoord;var hU=h5.textureSource;if(!hU){continue}var e=hU.width;var h8=h5.textureHeight||hU.height;var h1=this._labelTextureAtlasOffset[hU.id];if(!h1&&!this._textureAddToJob[hU.id]&&this._currentTextureIsFull===false){if(!this._labelTextTextureAtlas){this._labelTextTextureAtlas=this._textTextureManager.getEmptyTexture()}h1=this._labelTextTextureAtlas.addTexture(hU,h8);this._labelTextureAtlasOffset[hU.id]=h1}if(h1){var h7=ih/2;var hY=9;if(hV){hY=8}for(var ic=0,ib=T.length;ic<ib;ic+=ih){T[ic+hY]=h6[ic/h7]*e/il[0]+h1.width;T[ic+hY+1]=h6[ic/h7+1]*h8/il[1]+h1.height}this._labelVertexBuffer.set(T,h3);h3+=T.length;if(h5.iconRenderData){if(hT+im<this._labelIconVertexBuffer.length){this._labelIconVertexBuffer.set(h5.iconRenderData.vertex,hT);hT+=im}}}}if(h3===0&&hT===0){return}var ii=null;if(h3>0){if(!ij){var hX=hw.symbol;if(hV){hX=hw.symbolline}ij=this[h9]=new fj(this._labelVertexBuffer,{components:ih,members:hX},fj.BufferType.VERTEX,h3/ih);this[h9].vao=new ht()}else{this[h9].vao.update(this.gl,ij,this._labelVertexBuffer,h3/ih)}}var h0=null;if(hT>0){h0=new ht();if(!hZ){hZ=this._iconLabelBuffer=new fj(this._labelIconVertexBuffer,{components:v,members:hw.symbol},fj.BufferType.VERTEX,hT/v);hZ.vao=new ht()}else{hZ.vao.update(this.gl,hZ,this._labelIconVertexBuffer,hT/v)}}var ik=null;if(this._labelTextTextureAtlas){ik=this._labelTextTextureAtlas.getTexture()}return{vao:this[h9]?this[h9].vao:null,vaoIcon:this._iconLabelBuffer?this._iconLabelBuffer.vao:null,vertex:h3>0?ij:null,texture:ik,iconVertex:hT>0?hZ:null,iconTexture:this._iconTextureAtlas.getTexture()}},_addToAsyncJob:function(e){if(this._textureAddToJob[e.id]){return}var T=this;var i=(function(hT){return function(){delete T._textureAddToJob[hT.id];if(T._currentTextureIsFull){return}if(!T._labelTextTextureAtlas){T._labelTextTextureAtlas=T._textTextureManager.getEmptyTexture()}var hU=hT.height;var hV=T._labelTextTextureAtlas.addTexture(hT,hU);T._labelTextureAtlasOffset[hT.id]=hV;T._map.dispatchEvent(new bc("onrefresh"))}})(e);this._textureJobScheduler.addJob(i);this._textureAddToJob[e.id]=true},createMarker3dData:function(e){if(e.length===0){return null}var hU=e.length*eA;if(hU>this._labelVertexBuffer3D.length){this._labelVertexBuffer3D=new Float32Array(hU);if(this._marker3dVertexBuffer){this._marker3dVertexBuffer.vao.destroy(this.gl);this._marker3dVertexBuffer.destroy(this.gl);this._marker3dVertexBuffer=null}}var h8=0;for(var h4=0,h0=e.length;h4<h0;h4++){var hZ=e[h4].renderData;var hT=e[h4].textureSource;var hW=[0,0,0,0];var hY=e[h4].overlay;if(hZ.finalVertexData){this._labelVertexBuffer3D.set(hZ.finalVertexData,h8);h8+=eA;continue}hZ.finalVertexData=[];var hV=hZ.vertex;if(!hV){continue}if(hT){var h6=hY._config.icon;var h5=h6.imageUrl;if(h6.ratio>1&&h6.srcSetObject["2x"]){h5=h6.srcSetObject["2x"]}if(!h5&&h6.imageDom){h5=h6.imageDom.id}var T=hY.textureCoordGLMap;if(!T){var h1=this._imageMergedOffset[h5];if(!h1){hT.id=h5;h1=this.textureAtlasMarker.addTexture(hT);this._imageMergedOffset[h5]=h1}var hX=new ea(hT.width,hT.height);if(h6.imageSize){h6.ratio=hT.width/h6.imageSize.width}T=this._calcTextureCoords(hX,h6.size,h6.imageOffset,h1,h6.ratio);hY.textureCoordGLMap=T}hW=[T[0],T[1],T[4],T[5]]}for(var h3=0;h3<hV.length;h3++){for(var h2=0;h2<eA-4;h2++){hZ.finalVertexData.push(hV[h3][h2])}hZ.finalVertexData.push(hW[0],hW[1],hW[2],hW[3])}this._labelVertexBuffer3D.set(hZ.finalVertexData,h8);h8+=eA}var h7=this._marker3dVertexBuffer;if(!h7){this._marker3dVertexBuffer=h7=new fj(this._labelVertexBuffer3D,{components:15,members:[{name:"a_pos",components:4,offset:0,type:"Float32"},{name:"a_height",components:1,offset:16,type:"Float32"},{name:"a_color",components:4,offset:20,type:"Float32"},{name:"a_size",components:1,offset:36,type:"Float32"},{name:"a_shape",components:1,offset:40,type:"Float32"},{name:"a_texture_coord",components:4,offset:44,type:"Float32"}]},fj.BufferType.VERTEX,h8/eA);this._marker3dVertexBuffer.vao=new ht()}else{this._marker3dVertexBuffer.vao.update(this.gl,h7,this._labelVertexBuffer3D,h8/eA)}return{vao:this._marker3dVertexBuffer.vao,vertex:h7,texture:hT?this.textureAtlasMarker.getTexture():null}},createMarkerData:function(e){if(e.length===0){return null}var h0=e.length*dE;if(h0>this._labelVertexBuffer.length){this._labelVertexBuffer=new Float32Array(h0);if(this._markerVertexBuffer){this._markerVertexBuffer.vao.destroy(this.gl);this._markerVertexBuffer.destroy(this.gl);this._markerVertexBuffer=null}}var h2=0;for(var hW=0,hT=e.length;hW<hT;hW++){var hX=e[hW].overlay;if(hX._visible===false){continue}var h5=e[hW].renderData;if(h5.finalVertexData){this._labelVertexBuffer.set(h5.finalVertexData,h2);h2+=dE;continue}h5.finalVertexData=[];var h4=h5.vertex;if(!h4){continue}var h3=hX._config.icon;var T=e[hW].textureSource;var hV=h3.imageUrl;if(h3.ratio>1&&h3.srcSetObject["2x"]){hV=h3.srcSetObject["2x"]}if(!hV&&h3.imageDom){hV=h3.imageDom.id}var h6=hX.textureCoordGLMap;if(!h6){var hY=this._imageMergedOffset[hV];if(!hY){T.id=hV;hY=this.textureAtlasMarker.addTexture(T);this._imageMergedOffset[hV]=hY}var h1=new ea(T.width,T.height);if(h3.imageSize){h3.ratio=T.width/h3.imageSize.width}h6=this._calcTextureCoords(h1,h3.size,h3.imageOffset,hY,h3.ratio);hX.textureCoordGLMap=h6}for(var hU=0;hU<h4.length;hU++){h5.finalVertexData.push(h4[hU][0],h4[hU][1],h4[hU][2],h4[hU][3],0,h4[hU][4],h4[hU][5],0,0,h6[hU*2],h6[hU*2+1])}this._labelVertexBuffer.set(h5.finalVertexData,h2);h2+=dE}var hZ=this._markerVertexBuffer;if(!hZ){this._markerVertexBuffer=hZ=new fj(this._labelVertexBuffer,{components:v,members:hw.symbol},fj.BufferType.VERTEX,h2/v);this._markerVertexBuffer.vao=new ht()}else{this._markerVertexBuffer.vao.update(this.gl,hZ,this._labelVertexBuffer,h2/v)}return{vao:this._markerVertexBuffer.vao,vertex:hZ,texture:this.textureAtlasMarker.getTexture()}},_calcTextureCoords:function(hX,h0,h5,hZ,i){if(!hX||!h0||!h5||!hZ){}i=i||1;var T=this.textureAtlasMarker.getSize();var hY=-h5.width*i;var e=-h5.height*i;var h4=-hY/T.width+hZ.width;var hW=(hX.height+e-h0.height*i)/T.height+hZ.height;var h3=(-hY+h0.width*i)/T.width+hZ.width;var hV=hW;var h2=h3;var hU=(hX.height+e)/T.height+hZ.height;var h1=h4;var hT=hU;return[h4,hW,h3,hV,h2,hU,h4,hW,h2,hU,h1,hT]},createData:function(hV){var hX={};var hW=hV.renderData;var e=hV.tileInfo;if(hW.base){hX.base=[];for(var T=0;T<hW.base.length;T++){var hU=hW.base[T];var hT=hU.type;if(hT==="fill"){hX.base.push(this.createFillData(hU.data,e));bK.addDrawIntoAreaSpots(e,hU)}else{if(hT==="line"){hX.base.push(this.createLineData(hU.data))}}}}if(hW.base3d){hX.base3d=[];for(var T=0;T<hW.base3d.length;T++){var hU=hW.base3d[T];var hT=hU.type;if(hT==="fill"){bK.addDrawIntoAreaSpots(e,hU);hX.base3d.push(this.createFillData(hU.data))}else{if(hT==="line"){hX.base3d.push(this.createLineData(hU.data))}else{if(hT==="arrow"){hX.base3d.push(this.createArrowData(hU.data))}else{if(hT==="block"){hX.base3d.push(this.createBlockData(hU.data))}}}}}}if(hW.virtual){hX.virtual=[];for(var T=0;T<hW.virtual.length;T++){var hU=hW.virtual[T];var hT=hU.type;if(hT==="fill"){hX.virtual.push(this.createFillData(hU.data))}else{if(hT==="line"){hX.virtual.push(this.createLineData(hU.data))}}}}if(hW.building3d){bK.addDrawIntoAreaSpots(e,hW.building3d);hX.building3d=this.createBlockData(hW.building3d)}if(hW.building3dMesh){hX.building3dMesh=this.createBlockData(hW.building3dMesh)}if(hW.indoorBase){hX.indoorBase=[];for(var T=0;T<hW.indoorBase.length;T++){var hU=hW.indoorBase[T];var hT=hU.type;if(hT==="fill"){hX.indoorBase.push(this.createFillData(hU.data))}else{if(hT==="line"){hX.indoorBase.push(this.createLineData(hU.data))}}}}if(hW.indoorBaseContour){hX.indoorBaseContour=[];for(var T=0;T<hW.indoorBaseContour.length;T++){var hU=hW.indoorBaseContour[T];hX.indoorBaseContour.push(this.createLineData(hU.data))}}if(hW.indoorArea3D){hX.indoorArea3D=[];for(var T=0;T<hW.indoorArea3D.length;T++){hX.indoorArea3D.push(this.createBlockData(hW.indoorArea3D[T]))}}if(hW.indoorBorder3D){hX.indoorBorder3D=[];for(var T=0;T<hW.indoorBorder3D.length;T++){hX.indoorBorder3D.push(this.createLineData(hW.indoorBorder3D[T].data))}}return hX},destroyData:function(e){if(!e){return}var i=this.gl;e.vao1&&e.vao1.destroy(i);e.vertex&&e.vertex.destroy(i);e.element1&&e.element1.destroy(i)},destroyCache:function(hU){if(!hU){return}for(var T in hU){if(T!=="_key_"&&hU.hasOwnProperty(T)){if(T==="building3d"){this.destroyData(hU[T])}else{var hT=hU[T].length;for(var e=0;e<hT;e++){this.destroyData(hU[T][e])}}}}},createDataFromCache:function(i){var e=this.calcBufferKey(i);if(!this._cache.getData(e)){this._cache.setData(e,this.createData(i))}return this._cache.getData(e)},calcBufferKey:function(hU){var e=hU.tileInfo;var hT=hU.mapType+"_"+e.style+"_"+e.col+"_"+e.row+"_"+e.useZoom;if(hU.renderData&&hU.renderData.indoorData){var hV=hU.renderData.indoorData;var i=[];for(var T in hV){i.push(hV[T].currentFloor)}hT=hT+"_"+i.join("_")}return hT},draw3D:function(e){this.setLayerDepth(fJ);var i=this._map._displayOptions;if(this._map.getTilt()>0&&i.indoor){this.drawArea3D(e);this.drawArea3DBorder(e)}this.drawBuildings(e)},drawBuildings:function(T){var hW=this._map;if(hW._displayOptions.building===false){return}if(!T[0]){return}var e=false;var hV=T[0].length;for(var hU=0;hU<hV;hU++){for(var hT=0;hT<T[0][hU].length;hT++){if(T[0][hU][hT]&&T[0][hU][hT].renderData&&(T[0][hU][hT].renderData.building3d||T[0][hU][hT].renderData.building3dMesh)){e=true;break}}}if(!e){return}this._state.colorMask(false,false,false,false);eh(this,this._sideLightDirVec3,true);for(var hU=0;hU<T[0].length;hU++){this.drawBuildingsTile(T[0][hU],"building3d",false);this.drawBuildingsTile(T[0][hU],"building3dMesh",false)}this._state.colorMask(true,true,true,true);this.gl.stencilFunc(this.gl.ALWAYS,1<<7,cH);this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.REPLACE);for(var hU=0;hU<T[0].length;hU++){this.drawBuildingsTile(T[0][hU],"building3d",true)}eh(this,this._sideLightDirVec3,false);for(var hU=0;hU<T[0].length;hU++){this.drawBuildingsTile(T[0][hU],"building3dMesh",true)}if(this.isDrawShadow===true){this.gl.stencilFunc(this.gl.NOTEQUAL,1<<7,cH);this.setLayerDepth(fJ);this._state.disableCap("depthTest");cB(this,this._shadowPosVec3);for(var hU=0;hU<T[0].length;hU++){this.drawShadow(T[0][hU])}this._state.enableCap("depthTest")}this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.KEEP);this.gl.stencilFunc(this.gl.ALWAYS,0,255)},drawBuildingsTile:function(hW,hT,T){for(var hV=0;hV<hW.length;hV++){var hU=hW[hV];if(hU.status!=="ready"){continue}var e=this.createDataFromCache(hU);if(e[hT]){hU.mvMatrix=this._camera.getModelViewMatrix3D(hU.tileInfo);hN.block(this,hU,e[hT],T)}}},drawArea3D:function(T){var hW=this._map;if(!T[0]){return}var e=false;var hV=T[0].length;for(var hU=0;hU<hV;hU++){for(var hT=0;hT<T[0][hU].length;hT++){if(T[0][hU][hT]&&T[0][hU][hT].renderData&&T[0][hU][hT].renderData.indoorArea3D){e=true;break}}}if(!e){return}eh(this,this._sideLightDirVec3,true);for(var hU=0;hU<T[0].length;hU++){this.drawArea3DTile(T[0][hU],true)}},drawArea3DTile:function(hW,hT){for(var hV=0;hV<hW.length;hV++){var hU=hW[hV];if(hU.status!=="ready"){continue}var e=this.createDataFromCache(hU);if(!e.indoorArea3D){continue}hU.mvMatrix=this._camera.getModelViewMatrix3D(hU.tileInfo);for(var T=0;T<e.indoorArea3D.length;T++){hN.block(this,hU,e.indoorArea3D[T],hT)}}},drawArea3DBorder:function(hY,h0){var e=this._map;if(!hY[0]){return}var T=false;var h1=hY[0].length;for(var hW=0;hW<h1;hW++){for(var hV=0;hV<hY[0][hW].length;hV++){if(hY[0][hW][hV]&&hY[0][hW][hV].renderData&&hY[0][hW][hV].renderData.indoorBorder3D){T=true;break}}}if(!T){return}for(var hT=0;hT<hY[0].length;hT++){var hZ=hY[0][hT];for(var hW=0;hW<hZ.length;hW++){var hX=hZ[hW];if(hX.status!=="ready"){continue}var hU=this.createDataFromCache(hX);if(!hU.indoorBorder3D){continue}hX.mvMatrix=this._camera.getModelViewMatrix3D(hX.tileInfo);this.tileScale=Math.pow(2,hX.tileInfo.zoom-this.mapZoom);for(var hV=0;hV<hX.renderData.indoorBorder3D.length;hV++){if(hU.indoorBorder3D[hV]&&hU.indoorBorder3D[hV]){this.drawTileLayer(hX,hX.renderData.indoorBorder3D[hV],hU.indoorBorder3D[hV],"line",{force3D:true})}}}}},drawShadow:function(hU){for(var hT=0;hT<hU.length;hT++){var T=hU[hT];if(T.status!=="ready"){continue}var e=this.createDataFromCache(T);var hV=T.renderData;if(hV&&(hV.base3d||hV.building3d||hV.building3dMesh)){T.mvMatrix=this._camera.getModelViewMatrix3D(T.tileInfo);if(hV.building3d){hN.shadow(this,T,e.building3d)}if(hV.building3dMesh){hN.shadow(this,T,e.building3dMesh)}if(!this.isFlat&&hV.base3d){hN.shadow(this,T,e.base3d,hV.base3d)}}}},drawHighlightFixedLabelSymbol:function(i){var e=this.createLabelData(i,true,"_highlightLabelBuffer");if(e&&e.vertex&&e.texture){hN.symbol(this,e.vertex,e.vao,this.mvMatrixMarker,e.texture,this._renderPng8Text,this.projMatrix,true,this._map._labelProcessor._useRound,this.mapHalfSize,0,this.cameraPosHigh,this.cameraPosLow,this.projMatrix2D,1)}},drawFixedLabelSymbol:function(T){var i=this.createLabelData(T,true,"_fixedLabelBuffer");var e=this._map._displayOptions;if(e.poiText&&i&&i.vertex&&i.texture&&i.vao){hN.symbol(this,i.vertex,i.vao,this.mvMatrixMarker,i.texture,this._renderPng8Text,this.projMatrix,false,this._map._labelProcessor._useRound,this.mapHalfSize,0,this.cameraPosHigh,this.cameraPosLow,this.projMatrix2D,1)}if(e.poiIcon&&i&&i.iconVertex&&i.iconTexture&&i.vaoIcon){hN.symbol(this,i.iconVertex,i.vaoIcon,this.mvMatrixMarker,i.iconTexture,false,this.projMatrix,false,this._map._labelProcessor._useRound,this.mapHalfSize,0,this.cameraPosHigh,this.cameraPosLow,this.projMatrix2D,2)}},drawLineLabelSymbol:function(hT,T){var e=false;var i=this.createLabelData(hT,e,"_lineLabelBuffer",true);if(i&&i.vertex&&i.texture&&i.vao){hN.symbolline(this,i.vertex,i.vao,T,i.texture,this._renderPng8Text,this.projMatrix,this._map._labelProcessor._useRound,this.mapHalfSize,this.mapZoom,this.cameraPosition,1)}},drawSymbol:function(hT,T){var i=this.createMarkerData(hT);if(!i){return}T=T||{};var e=T.fixPosition||false;hN.symbol(this,i.vertex,i.vao,this.mvMatrixMarker,i.texture,false,this.projMatrix,false,this._map._overlayMgrGL._useRound,this.mapHalfSize,0,this.cameraPosHigh,this.cameraPosLow,this.projMatrix2D,null,e)},drawMarker3D:function(T){var e=this.createMarker3dData(T);if(!e){return}var i=T[0].overlay._config;hN.marker3d(this,{mvMatrix:this.mvMatrixMarker},this.cameraPosHigh,this.cameraPosLow,e,i)},drawPolyline:function(i){var e=this.createPolylineData(i);if(!e){return}hN.line(this,{mvMatrix:this.mvMatrixPoly},i,e,true)},drawPolygon:function(T){var e;for(var hT=0;hT<T.length;hT++){e=this.createOverlayFillData(T[hT],"Float32",hT);if(T[hT].hasMultipleParts){hN.fill(this,{mvMatrix:this.mvMatrixPoly},T[hT],e,true,{usePolygonStencil:true,drawPolygonPass:1});hN.fill(this,{mvMatrix:this.mvMatrixPoly},T[hT],e,true,{usePolygonStencil:true,drawPolygonPass:2})}else{hN.fill(this,{mvMatrix:this.mvMatrixPoly},T[hT],e,true)}}},drawGroundOverlay:function(hU){var e;for(var T=0;T<hU.length;T++){e=this.createGroundOverlayData(hU[T],T);var hT=this._textureCache.getData(hU[T].src);if(!hT){var hV=this.gl;hT=cc.utils.createTexture(hV,hU[T].textureSource);if(e.textureType.localName!=="video"){this._textureCache.setData(hU[T].src,hT)}}hN.groundoverlay(this,{mvMatrix:this.mvMatrixPoly},hU[T],e,hT)}},drawPrism:function(e){var T;for(var hT=0;hT<e.length;hT++){T=this.createOverlayBlockData(e[hT],hT);hN.overlayBlock(this,{mvMatrix:this.mvMatrixPoly},T)}},drawBase:function(h3,hU,hW,hZ,hX){var h2=undefined;var T=0;for(var hT=0;hT<h3.length;hT++){var hY=h3[hT];if(hY.dataType===2||!hY.dataType){var h5=hY.tileInfo.useZoom;if(h5!==h2){hU++;h2=h5}hY.baseLayerHeight=hU;if(hX&&hZ===0&&hY.status!=="ready"){hY.mvMatrix=this._camera.getModelViewMatrix3D(hY.tileInfo);this.renderGrid(hY)}if(hY.status==="ready"){T=Math.max(T,hY.renderData.base.length)}}}for(var e=0;e<T;e++){for(var hT=0;hT<h3.length;hT++){var hY=h3[hT];if(hY.dataType===2||!hY.dataType){if(hY.status!=="ready"){continue}if(!hY.renderData.base[e]){continue}hY.mvMatrix=this._camera.getModelViewMatrix3D(hY.tileInfo);var hV=Math.floor(hW);var i=this.createDataFromCache(hY);this.tileScale=Math.pow(2,hY.tileInfo.zoom-hW);this.tileScaleFromStart=Math.pow(2,hY.tileInfo.useZoom-J[hY.tileInfo.zoom].start);this.setLayerDepth(hY.baseLayerHeight);var h4=hY.renderData.base[e];var h0=h4.type;var h1=i.base[e];this.drawTileLayer(hY,h4,h1,h0,{withStencil:h0==="line"&&hY.tileInfo.zoom<10&&hX})}}}return ++hU},drawTileBase3D:function(hV,hZ,T,hY){hV.mvMatrix=this._camera.getModelViewMatrix3D(hV.tileInfo);if(hV.status!=="ready"){return}var hU=Math.floor(hZ);var e=this.createDataFromCache(hV);this.tileScale=Math.pow(2,hV.tileInfo.zoom-hZ);this.tileScaleFromStart=Math.pow(2,hV.tileInfo.useZoom-J[hV.tileInfo.zoom].start);if(!this.isFlat){this.setLayerDepth(fJ)}else{this.setLayerDepth(T)}for(var hT=0;hT<hV.renderData.base3d.length;hT++){var h0=hV.renderData.base3d[hT];var hW=h0.type;var hX=e.base3d[hT];if(hW!=="block"){if(!this.isFlat){if(hY===a3&&!h0.has3D){continue}else{if(hY===bk&&!h0.has2D){continue}}}if(hW==="fill"&&hY===a3){this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.REPLACE)}this.drawTileLayer(hV,h0,hX,hW,{drawPart:hY});if(hW==="fill"&&hY===a3){this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.KEEP)}}else{if(!this.isFlat&&hY===a3){this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.REPLACE);hN.block(this,hV,hX,true);this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.KEEP)}}}},drawIndoorBase:function(hY,hV){if(hY.status!=="ready"){return}hY.mvMatrix=this._camera.getModelViewMatrix3D(hY.tileInfo);var hT=Math.floor(hV);var T=this.createDataFromCache(hY);this.tileScale=Math.pow(2,hY.tileInfo.zoom-hV);this.tileScaleFromStart=Math.pow(2,hY.tileInfo.useZoom-J[hY.tileInfo.zoom].start);if(hY.renderData.indoorBaseContour&&this.showIndoorContour){for(var hU=0;hU<hY.renderData.indoorBaseContour.length;hU++){var hX=hY.renderData.indoorBaseContour[hU];if(hX.uid!==this.currentIndoorUid){continue}var hW=hX.type;var e=T.indoorBaseContour[hU];this.drawTileLayer(hY,hX,e,hW)}}if(hY.renderData.indoorBase){for(var hU=0;hU<hY.renderData.indoorBase.length;hU++){var hX=hY.renderData.indoorBase[hU];var hW=hX.type;var e=T.indoorBase[hU];this.drawTileLayer(hY,hX,e,hW)}}},drawTileVirtual:function(hY,hV){hY.mvMatrix=this._camera.getModelViewMatrix3D(hY.tileInfo);if(hY.status!=="ready"){return}var hT=Math.floor(hV);var T=this.createDataFromCache(hY);this.tileScale=Math.pow(2,hY.tileInfo.zoom-hV);this.tileScaleFromStart=Math.pow(2,hY.tileInfo.useZoom-J[hY.tileInfo.zoom].start);this.setLayerDepth(0);this._state.disableCap("depthTest");for(var hU=0;hU<hY.renderData.virtual.length;hU++){var hX=hY.renderData.virtual[hU];var hW=hX.type;var e=T.virtual[hU];this.drawTileLayer(hY,hX,e,hW)}this._state.enableCap("depthTest")},drawRasterTile:function(hT){var i=new fj(new Float32Array(hT.renderData.vertexAll),{components:5,members:[{name:"aVertexPosition",components:3,offset:0,type:"Float32"},{name:"aVertexTextureCoord",components:2,offset:12,type:"Float32"}]},fj.BufferType.VERTEX);var e={vao:new ht(),vertex:i};var T=this._textureCache.getData(hT.textureSource.src);if(!T){var hU=this.gl;T=cc.utils.createTexture(hU,hT.textureSource);this._textureCache.setData(hT.textureSource.src,T)}hT.mvMatrix=this._camera.getModelViewMatrix3D(hT.tileInfo);hN.raster(this,e.vertex,e.vao,hT.mvMatrix,T,this.projMatrix)},drawTileLayer:function(hT,hU,e,T,i){if(i&&i.withStencil){this.renderTileClippingMask(hT);this.enableTileClippingMask(hT)}hN[T](this,hT,hU,e,false,i);if(i&&i.withStencil){this.disableTileClippingMask()}},enableTileClippingMask:function(i,e){var T=this.gl;T.stencilFunc(T.EQUAL,i.clippingTileRefer,cu)},disableTileClippingMask:function(){var e=this.gl;e.stencilFunc(e.ALWAYS,0,255)},renderTileClippingMask:function(e){var i=this.gl;e.clippingTileRefer=++this.tileClippintRefer;this._state.stencilOp(i.KEEP,i.REPLACE,i.REPLACE);i.stencilFunc(i.ALWAYS,e.clippingTileRefer,cu);this._state.colorMask(false,false,false,false);hN.grid(this,e.mvMatrix,this.gridTextureScale);this._state.colorMask(true,true,true,true);this._state.stencilOp(i.KEEP,i.KEEP,i.KEEP)},clearGLStatus:function(e){var T=this.gl;var i=0;if(e.color){i|=T.COLOR_BUFFER_BIT}if(e.stencil){i|=T.STENCIL_BUFFER_BIT}if(e.depth){i|=T.DEPTH_BUFFER_BIT}this.updateBackground();T.clear(i)},renderGrid:function(e){this.setLayerDepth(hm);hN.grid(this,e.mvMatrix,this.gridTextureScale)},setLayerDepth:function(e){if(this._preCurrentLayer===e){return}var i=1-e*this._depthEpsilon;var T=i-this._depthRange;this._preCurrentLayer=e;this.gl.depthRange(T,i)},_initCanvas:function(){var hW=this._map;var hU=hW.getSize();var hT=hU.width;var e=hU.height;var i=hW.container;var hX=U("canvas");var hV=hX.style;var T=hW.config.ratio;this._width=hT;this._height=e;hV.cssText="position: absolute;left:0;top:0;width:"+hT+"px;height:"+e+"px;z-index:0;";hX.width=Math.round(hT*T);hX.height=Math.round(e*T);i.appendChild(hX);return hX},_getWebGLContext:function(){var i={alpha:true,premultipliedAlpha:false,antialias:!this._useSMAA,failIfMajorPerformanceCaveat:false,preserveDrawingBuffer:this._map.config.preserveDrawingBuffer,stencil:true};if(D.Browser.safari){i.alpha=true}var T=this._map;var e=T.config.webgl2;return this._canvas.getContext(e?"webgl2":"webgl",i)||this._canvas.getContext("experimental-webgl",i)},_checkTextureAtlasUsage:function(){if(this._labelTextTextureAtlas){var e=this._labelTextTextureAtlas.getUsage();if(e>0.85){this._currentTextureIsFull=true}}},_initialize:function(){var hY=this.gl;var hU=this;this._map.addEventListener("update",function(i){if(i.changedStatus.onsize_changed){hU._resizeHandler()}});var hX=this._map;this.tileScale=1;this.stepZoom=hX.getZoom();this.polyZoomRatio=1;this.normalMatrix=mat4.create();this.background=s;var hU=this;hU.updateBackground=function(){if(typeof hX.config.style==="string"){hU.background=s}else{if(bp.customStyleInfo){var i=bp.customStyleInfo.bmapLandColor;if(i){hU.background=g1.parseHexToRgbaArray(i)}else{hU.background=s}}}hU._state.clearColor(hU.background)};hX.addEventListener("style_loaded",function(){hU.updateBackground()});this._state=cc.WebGLState.get(hY,bp.getGUID("glmap_"));this._state.clearColor(this.background);this._state.enableCap("stencilTest");this._state.enableCap("depthTest");this._state.enableCap("cullFace");this._state.depthFunc(hY.LEQUAL);this._state.enableCap("blend");this._state.blendFunc(hY.SRC_ALPHA,hY.ONE_MINUS_SRC_ALPHA,hY.ONE,hY.ONE_MINUS_SRC_ALPHA);this._state.depthMask(true);this._needToDestroy=[];b5.init(this);if(this._useSMAA){this.initSMAAFrameBuffers()}this._cache=new e0(D.Browser.ie?64:128,{clearCallback:function(i){hU._needToDestroy.push(i)}});this._map.on("zoom_changed",function(hZ){var i=hZ.target.getZoom();hU.stepZoom=Math.floor(i/0.25)*0.25});this._map.on("mapglidle",function hW(){for(var h0=0,hZ=hU._needToDestroy.length;h0<hZ;h0++){hU.destroyCache(hU._needToDestroy[h0])}hU._needToDestroy.length=0;if(hU._currentTextureIsFull===true){hU._textTextureManager.free(hU._labelTextTextureAtlas);hU._labelTextureAtlasOffset={};hU._currentTextureIsFull=false;hU._textureAddToJob={};hU._labelTextTextureAtlas=hU._textTextureManager.getEmptyTexture();this.fire(new bc("onrefresh"))}});this._map.on("destroy",function(){hU._canvas.removeEventListener("webglcontextlost",hg,false);var i=hU.gl.getExtension("WEBGL_lose_context");if(i){i.loseContext()}});this._textureJobScheduler=this._map.jobScheduler;this._depthEpsilon=8/Math.pow(2,16);this._depthRange=1-this._depthEpsilon*hy;this.programMgr=new ae(hY,this._map);this._skyColor=this._getSkyColor();hX.addEventListener("displayoptions_changed",function(){hU._skyColor=hU._getSkyColor()});var e=this._map.height/2;var hV=hX.config.skyColorStop||[0,0.1,0.7,1];for(var hT=0;hT<hV.length;hT++){hV[hT]*=e}var T=new Float32Array([0,hV[0],0,10000,hV[0],0,10000,hV[1],0,0,hV[0],0,10000,hV[1],0,0,hV[1],0,0,hV[1],0,10000,hV[1],0,10000,hV[2],1,0,hV[1],0,10000,hV[2],1,0,hV[2],1,0,hV[2],1,10000,hV[2],1,10000,hV[3],1,0,hV[2],1,10000,hV[3],1,0,hV[3],1]);this.skyVAO=new ht();this.skyBuffer=new fj(T,{components:3,members:[{name:"aPos",components:3,offset:0,type:"Float32"}]},fj.BufferType.VERTEX);this.textureAtlasMarker=new cc.TextureAtlas(this.gl,{width:2048,height:2048,unpackAlpha:true});this._imageMergedOffset={};this._labelGroundVertexBuffer=new Float32Array(10000);this._labelVertexBuffer=new Float32Array(65000);this._labelVertexBuffer3D=new Float32Array(65000);this._labelIconVertexBuffer=new Float32Array(65000);this._map.on("style_willchange",function(){hU._textRenderType=this.config.textRenderType;if(hU._textRenderType==="canvas"){hU._renderPng8Text=false}else{hU._renderPng8Text=true}hU._iconTextureManager=new cc.TextTextureManager(hY,{width:1024,height:1024,unpackAlpha:true});hU._iconTextureAtlas=hU._iconTextureManager.getEmptyTexture()})},_getSkyColor:function(){var e=this._map._displayOptions.skyColors;var hT=[];for(var T=0;T<e.length;T++){var hV=g1.parseCSSColor(e[T]);hT.push([hV[0]/255,hV[1]/255,hV[2]/255,hV[3]/255])}var hU=this._map.config.skyColor;if(hU){hT=hU}return hT},_resizeHandler:function(hX){var hZ=this;var i=hZ._map;var hW=i.getSize();var T=hW.width;var h0=hW.height;var hY=i.config.ratio;var hT=this._canvas;var hU=hT.style;hU.width=T+"px";hU.height=h0+"px";hT.width=Math.round(T*hY);hT.height=Math.round(h0*hY);hZ._width=T;hZ._height=h0;var hV=this.gl;hV.viewport(0,0,hV.drawingBufferWidth,hV.drawingBufferHeight);this._frameBufferSizeInvalid=true},createDebugBuffer:function(T){var i=t[T];if(!this._debugBufferCache[i]){var e=[0,0,i,0,i,i,0,i];this._debugBufferCache[i]={vao:new ht(),buffer:new fj(new Uint16Array(e),{components:2,members:[{name:"a_pos",components:2,offset:0,type:"Uint16"}]},fj.BufferType.VERTEX)}}this.debugVAO=this._debugBufferCache[i].vao;this.debugBuffer=this._debugBufferCache[i].buffer},createGridBuffer:function(T){var i=t[T];if(!this._gridBufferCache[i]){var e=new Float32Array([0,0,0,0,i,0,1,0,0,i,0,1,i,i,1,1]);this._gridBufferCache[i]={vao:new ht(),buffer:new fj(e,{components:4,members:[{name:"a_pos",components:2,offset:0,type:"Float32"},{name:"a_tex",components:2,offset:8,type:"Float32"}]},fj.BufferType.VERTEX)}}this.gridVAO=this._gridBufferCache[i].vao;this.gridBuffer=this._gridBufferCache[i].buffer},_handleContextStatus:function(){var e=this._canvas;e.addEventListener("webglcontextlost",hg,false)}});function n(e){this._map=e;this._overlays=[[],[],[],[],[],[]];this._renderData=[[],[],[],[],[],[{styleData:[[],[]],texture:null,textureSize:null,zoomWithMap:null,overlay:null}]];this._polylineRenderData={};this._iconImage={};this._needRAF=0;this._customOverlays=[];this._useRound=true;this._ratio=1;if(a7()>1){this._ratio=2}e._overlayMgrGL=this;this._init()}D.extend(n.prototype,{_init:function(){this._bind()},_bind:function(){var i=this;var hT=this._map;function hV(hZ){var hX=hZ.overlay||this;var hY=hZ.action||"";var hW=true;i._updateGraph(hX,hY,false,hW);if(hY==="remove"){i._removeOverlay(hX,hV)}}function T(hZ){var hW=hZ.overlay||this;var hY=hZ.action||"";var hX=hZ.imageUrlChanged||false;i._updateMarker(hW,hY,hX);if(hY==="remove"){i._removeOverlay(hW,T)}}hT.on("beforeaddoverlay",function(hX){if(!(hX.overlay instanceof x)){return}var hW=hX.overlay;if(i._overlays[0].length===0&&i._overlays[1].length===0&&i._overlays[3].length===0&&i._overlays[5].length===0){i._map._polyOverlayBasePoint=hW.getBoundsIn().getCenter();i._map.fire(new bc("onupdateoverlaymatrix"))}});hT.on("addoverlay",function hU(hZ){if(!(hZ.overlay instanceof x)&&!(hZ.overlay instanceof ds)&&!(hZ.overlay instanceof be)){return}var hX=hZ.overlay;var hW=0;if(hZ.overlay instanceof a){hW=5}else{if(hZ.overlay instanceof ds){hW=2}else{if(hZ.overlay instanceof bt){hW=3}else{if(hZ.overlay instanceof be){hW=4}else{if(hZ.overlay instanceof dX){hW=1}}}}}for(var hY=0;hY<i._overlays[hW].length;hY++){if(i._overlays[hW][hY].hashCode===hX.hashCode){return}}if(hW!==2&&hW!==4&&i._overlays[0].length===0&&i._overlays[1].length===0&&i._overlays[3].length===0&&i._overlays[5].length===0){i._map._polyOverlayBasePoint=hX.getBoundsIn().getCenter();i._map.fire(new bc("onupdateoverlaymatrix"))}i._overlays[hW].push(hX);if(hW!==2&&hW!==4){hX.on("lineupdate",hV);i._updateGraph(hX,"add",false,true)}else{if(hW===2){hX.on("status_change",T);i._updateMarker(hX,"add")}else{if(hW===4){hX.on("status_change",T);hX.on("lineupdate",T);i._updateMarker(hX,"add")}}}});hT.on("update",function e(hZ){var hX=false;for(var hY=0;hY<i._overlays[0].length;hY++){if(i._updateGraph(i._overlays[0][hY],"",true,false)===true){hX=true}}for(hY=0;hY<i._overlays[1].length;hY++){if(i._updateGraph(i._overlays[1][hY],"",true,false)===true){hX=true}}for(hY=0;hY<i._overlays[3].length;hY++){if(i._updateGraph(i._overlays[3][hY],"",true,false)===true){hX=true}}for(hY=0;hY<i._overlays[5].length;hY++){if(i._updateGraph(i._overlays[5][hY],"",true,false)===true){hX=true}}if(hX){i._mergePolylineGraphData();i._map._featureMgr.setOverlayData(i._renderData[5],1)}var hW=new bc("onrefresh");hW.source="webgloverlaymgr";this.fire(hW)});hT.addEventListener("movestart",function(){if(this.getMapType()!=="B_NORMAL_MAP"){return}i._useRound=false});hT.addEventListener("moveend",function(hY){if(this.getMapType()!=="B_NORMAL_MAP"){return}if(hY.userData&&hY.userData.readyToMove===true){return}i._useRound=true;var hW=false;for(var hX=0;hX<i._overlays[0].length;hX++){if(i._updateGraph(i._overlays[0][hX],"",true,true)===true){hW=true}}for(hX=0;hX<i._overlays[1].length;hX++){if(i._updateGraph(i._overlays[1][hX],"",true,true)===true){hW=true}}for(hX=0;hX<i._overlays[3].length;hX++){if(i._updateGraph(i._overlays[3][hX],"",true,true)===true){hW=true}}for(var hX=0;hX<i._overlays[5].length;hX++){if(i._updateGraph(i._overlays[5][hX],"",true,true)===true){hW=true}}if(hW){i._mergePolylineGraphData();i._map._featureMgr.setOverlayData(i._renderData[5],1)}});hT.addEventListener("zoomstart",function(){if(this.getMapType()!=="B_NORMAL_MAP"){return}i._useRound=false});hT.addEventListener("zoomend",function(){if(this.getMapType()!=="B_NORMAL_MAP"){return}i._useRound=true;var hW=false;for(var hX=0;hX<i._overlays[0].length;hX++){if(i._updateGraph(i._overlays[0][hX],"",true,true)===true){hW=true}}for(hX=0;hX<i._overlays[1].length;hX++){if(i._updateGraph(i._overlays[1][hX],"",true,true)===true){hW=true}}for(hX=0;hX<i._overlays[3].length;hX++){if(i._updateGraph(i._overlays[3][hX],"",true,true)===true){hW=true}}for(hX=0;hX<i._overlays[5].length;hX++){if(i._updateGraph(i._overlays[5][hX],"",true,true)===true){hW=true}}if(hW){i._mergePolylineGraphData();i._map._featureMgr.setOverlayData(i._renderData[5],1)}});if(hT.temp.originMapType===BMAP_EARTH_MAP){return}this._syncOverlayFromMap(hV,T)},_removeOverlay:function(T,hU){if(!(T instanceof x)&&!(T instanceof ds)){return}var e=0;if(T instanceof a){e=5}else{if(T instanceof ds){e=2}else{if(T instanceof bt){e=3}else{if(T instanceof be){e=4}else{if(T instanceof dX){e=1}}}}}for(var hT=0;hT<this._overlays[e].length;hT++){if(this._overlays[e][hT].hashCode===T.hashCode){this._overlays[e].splice(hT,1);break}}if(this._map._polyOverlayBasePoint&&this._overlays[0].length===0&&this._overlays[1].length===0&&this._overlays[3].length===0&&this._overlays[5].length===0){this._map._polyOverlayBasePoint=null}T.off("lineupdate",hU)},_syncOverlayFromMap:function(hX,hW){var e=this._map._overlayArray;var hU=false;for(var hV=0;hV<e.length;hV++){var hT=e[hV];if(hT instanceof a===true||hT instanceof fm===true){if(this._overlays[0].length===0&&this._overlays[1].length===0&&this._overlays[3].length===0&&this._overlays[5].length===0){this._map._polyOverlayBasePoint=hT.getBoundsIn().getCenter();this._map.fire(new bc("onupdateoverlaymatrix"))}this._overlays[5].push(hT);hT.on("lineupdate",hX);if(this._updateGraph(hT,"add",true)===true){hU=true}}else{if(hT instanceof aS===true){if(this._overlays[0].length===0&&this._overlays[1].length===0&&this._overlays[3].length===0&&this._overlays[5].length===0){this._map._polyOverlayBasePoint=hT.getBoundsIn().getCenter();this._map.fire(new bc("onupdateoverlaymatrix"))}this._overlays[0].push(hT);hT.on("lineupdate",hX);if(this._updateGraph(hT,"add",true)===true){hU=true}}else{if(hT instanceof dX){if(this._overlays[0].length===0&&this._overlays[1].length===0&&this._overlays[3].length===0&&this._overlays[5].length===0){this._map._polyOverlayBasePoint=hT.getBoundsIn().getCenter();this._map.fire(new bc("onupdateoverlaymatrix"))}this._overlays[1].push(hT);hT.on("lineupdate",hX);if(this._updateGraph(hT,"add",true)===true){hU=true}}else{if(hT instanceof bt===true){if(this._overlays[0].length===0&&this._overlays[1].length===0&&this._overlays[3].length===0&&this._overlays[5].length===0){this._map._polyOverlayBasePoint=hT.getBoundsIn().getCenter();this._map.fire(new bc("onupdateoverlaymatrix"))}this._overlays[3].push(hT);hT.on("lineupdate",hX);if(this._updateGraph(hT,"add",true)===true){hU=true}}else{if(hT instanceof ds){this._overlays[2].push(hT);hT.on("status_change",hW);this._updateMarker(hT,"add")}else{if(hT instanceof be){this._overlays[4].push(hT);hT.on("status_change",hW);hT.on("lineupdate",hW);this._updateMarker(hT,"add")}}}}}}}if(hU){this._mergePolylineGraphData();this._map._featureMgr.setOverlayData(this._renderData[5],1)}var T=new bc("onrefresh");T.source="webgloverlaymgr";this._map.fire(T)},_updateMarkerRenderData:function(hW,hV,h0){if(!this._renderData[hW.hashCode]){return false}var h1=false;var T=hW instanceof be;var hZ=T?4:2;var e=T?7:8;for(var hY=0;hY<this._renderData[hZ].length;hY++){var hU=this._renderData[hZ][hY];if(hU.hashCode===hW.hashCode){h1=true;hU.renderData=hW.getVertexInfoForGL(this._useRound);var h2=hU.overlay._config.icon;var h3=h2.imageUrl;var hT=h2.imageDom;if(this._ratio>1&&h2.srcSetObject["2x"]){h3=h2.srcSetObject["2x"];h2.ratio=2}var hX;var h4;if(h3){h4=this._iconImage[h3]}else{if(hT){h4=this._iconImage[hT.id]}}if(h4){hX=h4.img}if(hX){hU.textureSource=hX;this._map._featureMgr.setOverlayData(this._renderData[hZ],e);return true}hU.textureSource=null;this._removeMarkerFromRenderData(hW);this._addMarkerToRenderData(hW);break}}if(!h1&&hV==="setIcon"&&h0){this._renderData[hW.hashCode]=null;this._addMarkerToRenderData(hW)}return false},_addMarkerToRenderData:function(hV){if(this._renderData[hV.hashCode]){return false}this._renderData[hV.hashCode]=true;var hY=this;function hU(h9,h6,h5,ib){var h4=h6 instanceof be;var h8=h4?4:2;var ia=h4?7:8;if(h6.map&&h6._visible===true&&((h6 instanceof ds&&h6.domElement!==null)||h6 instanceof be)){if(h5!==null){if(((hY._ratio===1||!hZ.srcSetObject["2x"])&&h6._config.icon.imageUrl!==h5)||(hY._ratio>1&&hZ.srcSetObject["2x"]&&hZ.srcSetObject["2x"]!==h5)){return}}else{if(ib!==null){if(h9!==ib){return}}}var h7=h6.getVertexInfoForGL(hY._useRound);hY._renderData[h8].push({overlay:h6,hashCode:h6.hashCode,textureSource:h9,renderData:h7});hY._renderData[h6.hashCode]=true}else{hY._renderData[h6.hashCode]=null}hY._renderData[h8].sort(function(id,ic){return id.overlay._zIndex-ic.overlay._zIndex});hY._map._featureMgr.setOverlayData(hY._renderData[h8],ia)}var hZ=hV._config.icon;if(hV instanceof be&&!hZ){var h1=hV.getVertexInfoForGL(hY._useRound);hY._renderData[4].push({overlay:hV,hashCode:hV.hashCode,textureSource:null,renderData:h1});hY._renderData[hV.hashCode]=true;hY._map._featureMgr.setOverlayData(hY._renderData[4],7);var h2=new bc("onrefresh");h2.source="webgloverlaymgr";hY._map.fire(h2);return true}var h0=hZ.imageUrl;var hT=hZ.imageDom;var hW;var h3;if(this._ratio>1&&hZ.srcSetObject["2x"]){h0=hZ.srcSetObject["2x"];hZ.ratio=2}if(h0){h3=this._iconImage[h0]}else{if(hT){h3=this._iconImage[hT.id]}}if(h3){hW=h3.img}if(hW){hU(hW,hV,h0,hT);return true}if(h3){h3.pendings.push(hV)}else{if(h0){hW=new Image();hW.crossOrigin="anonymous";hW.onload=function(){hY._iconImage[h0].loaded=true;hY._iconImage[h0].img=this;for(var h7=0;h7<hY._iconImage[h0].pendings.length;h7++){hU(this,hY._iconImage[h0].pendings[h7],h0)}hY._iconImage[h0].pendings=[];var h5=hV instanceof be;var h6=h5?4:2;var h8=h5?7:8;hY._map._featureMgr.setOverlayData(hY._renderData[h6],h8);var h4=new bc("onrefresh");h4.source="webgloverlaymgr";hY._map.fire(h4)};this._iconImage[h0]={pendings:[hV]};hW.src=h0}else{if(hT){var T=hT.id;hY._iconImage[T]={pendings:[],loaded:true,img:hT};hU(hT,hV,h0,hT);var i=hV instanceof be;var hX=i?4:2;var e=i?7:8;hY._map._featureMgr.setOverlayData(hY._renderData[hX],e);var h2=new bc("onrefresh");h2.source="webgloverlaymgr";hY._map.fire(h2)}}}return false},_removeMarkerFromRenderData:function(T){if(!this._renderData[T.hashCode]){return false}if(T instanceof be){for(var hT=0;hT<this._renderData[4].length;hT++){if(this._renderData[4][hT].hashCode===T.hashCode){this._renderData[4].splice(hT,1);break}}}else{if(T instanceof ds){var hV=T._config.icon;if(hV){var e=T._config.icon.imageUrl;if(this._ratio>1&&hV.srcSetObject["2x"]){e=hV.srcSetObject["2x"]}if(this._iconImage[e]&&this._iconImage[e].pendings){var hU=this._iconImage[e].pendings;for(var hT=hU.length-1;hT>=0;hT--){if(hU[hT]===T){hU.splice(hT,1)}}}}for(var hT=0;hT<this._renderData[2].length;hT++){if(this._renderData[2][hT].hashCode===T.hashCode){this._renderData[2].splice(hT,1);break}}}}this._renderData[T.hashCode]=null;return true},_updateGraph:function(hT,hU,hV,e){var T=false;var hW="";if(hT){hU=hU||"";if(!hT.ifInMapView()){if(this._removeGraphFromRenderData(hT)===true){T=true}hT._notInView=true}else{if(hU==="add"||hU==="show"||hT._notInView===true){hT._notInView=false;if(hT._visible===true){if(this._addGraphToRenderData(hT)===true){T=true}hW="add"}}else{if(hU==="remove"||hU==="hide"){if(this._removeGraphFromRenderData(hT)===true){T=true}}else{if(this._updateGraphRenderData(hT,e)===true){T=true}else{T=this._updateGraphRenderData(hT,hU)}}}}}if(!hV&&T){this._mergePolylineGraphData(hW);this._map._featureMgr.setOverlayData(this._renderData[5],1)}var i=new bc("onrefresh");i.source="webgloverlaymgr";this._map.fire(i);return T},_mergePolylineGraphData:function(hT){if(hT==="add"){var T=this._overlays[this._lastAddGraphIndex];if(!T[T.length-1]){return}var e=T[T.length-1].hashCode;var i=this._polylineRenderData[e];if(i){this._mergeOnePolylineData(i)}return}this._renderData[5].length=0;this._renderData[5][0]={style:[],styleData:[[],[]]};this._mergeGraphArrayData(this._overlays[0]);this._mergeGraphArrayData(this._overlays[5])},_mergeGraphArrayData:function(hT){for(var T=0;T<hT.length;T++){var e=hT[T].hashCode;if(!this._polylineRenderData[e]){continue}this._mergeOnePolylineData(this._polylineRenderData[e])}},_mergeOnePolylineData:function(h5){var h3=this._renderData[5].length-1;var hU=this._renderData[5][h3];var i=this._renderData[5][h3].styleData[0];var hZ=this._renderData[5][h3].styleData[1];var h0=9;for(var hT=0;hT<h5.styleData.length;hT++){var T=h5.styleData[hT];var h4=T[0];var hW=T[1];var hY=i.length/h0;var h2=h4.length/h0;var e=h5.overlay.canRenderDataBeMerged();var h1=true;if(hU.overlay&&!hU.overlay.canRenderDataBeMerged()){h1=false}if(hY+h2>65536||(hU.styleData[0].length>0&&e===false)||h1===false){h3++;hU=this._renderData[5][h3]={style:[],styleData:[[],[]],texture:null,textureSize:null,zoomWithMap:null,overlay:null};i=hU.styleData[0];hZ=hU.styleData[1];hY=0}if(hU.styleData[0].length===0&&e===false){hU.texture=h5.texture;hU.textureSize=h5.textureSize;hU.zoomWithMap=h5.zoomWithMap;hU.overlay=h5.overlay}for(var hX=0;hX<h2;hX++){i[i.length]=h4[hX*h0];i[i.length]=h4[hX*h0+1];i[i.length]=h4[hX*h0+2];i[i.length]=h4[hX*h0+3];i[i.length]=h4[hX*h0+4];i[i.length]=h4[hX*h0+5];i[i.length]=h4[hX*h0+6];i[i.length]=h4[hX*h0+7];i[i.length]=h4[hX*h0+8]}for(var hV=0;hV<hW.length;hV++){hZ[hZ.length]=hW[hV]+hY}}},_addGraphToRenderData:function(hT){if(this._renderData[hT.hashCode]){return false}var hZ;var hY;if(hT instanceof bt){this._lastAddGraphIndex=3;var i=hT.buildFillVertex(da);var T={vertex:i.vertex,index:i.index};T.hashCode=hT.hashCode;T.hasMultipleParts=hT.hasMultipleParts;this._renderData[3].push(T);this._map._featureMgr.setOverlayData(this._renderData[3],6)}else{if(hT instanceof dX){this._lastAddGraphIndex=1;hY=hT.getFillStyleForGL();var i=hT.buildFillVertex(da);var hX=hY.type;var hW=this;if(hX==="image"){var hU=new Image();hU.crossOrigin="anonymous";hU.onload=function hV(){var h0={opacity:hY.opacity,vertex:i[0],index:i[1],textureSource:this,src:this.src,overlay:hT};h0.hashCode=hT.hashCode;h0.hasMultipleParts=hT.hasMultipleParts;hW._renderData[1].push(h0);hW._map._featureMgr.setOverlayData(hW._renderData[1],5)};hU.src=hY.texture}else{if(hX==="canvas"){var T={textureSource:hY.texture,src:"canavs_"+new Date().valueOf(),opacity:hY.opacity,vertex:i[0],index:i[1],overlay:hT};T.hashCode=hT.hashCode;T.hasMultipleParts=hT.hasMultipleParts;hW._renderData[1].push(T);hW._map._featureMgr.setOverlayData(hW._renderData[1],5)}else{if(hX==="video"){var e=document.createElement("video");e.controls=false;e.autoplay=true;e.crossOrigin="anonymous";e.loop=true;e.style.width="256px;";e.style.height="256px;";e.oncanplay=function(){if(this._videoloaded){return}var h0={opacity:hY.opacity,vertex:i[0],index:i[1],textureSource:this,src:this.src,overlay:hT};h0.hashCode=hT.hashCode;h0.hasMultipleParts=hT.hasMultipleParts;hW._renderData[1].push(h0);hW._map._featureMgr.setOverlayData(hW._renderData[1],5);this._videoloaded=true};e.src=hY.texture;this._needRAF+=1}}}}else{if(hT instanceof aS){this._lastAddGraphIndex=0;hY=hT.getFillStyleForGL();var i=hT.buildFillVertex(da);var T=[hY,i[0],i[1]];T.hashCode=hT.hashCode;T.hasMultipleParts=hT.hasMultipleParts;this._renderData[0].push(T);this._map._featureMgr.setOverlayData(this._renderData[0],0);if(hT._config.strokeOpacity>0&&hT._config.strokeWeight>0){hZ=hT.buildVertex(fi,true);this._polylineRenderData[hT.hashCode]={cacheIndex:hZ.cacheIndex,hashCode:hT.hashCode,styleData:hZ,texture:hT._config.texture,textureSize:hT._config.textureSize,zoomWithMap:hT._config.textureZoomWithMap,overlay:hT}}}else{this._lastAddGraphIndex=5;hZ=hT.buildVertex(fi,true);this._polylineRenderData[hT.hashCode]={cacheIndex:hZ.cacheIndex,hashCode:hT.hashCode,styleData:hZ,texture:hT._config.texture,textureSize:hT._config.textureSize,zoomWithMap:hT._config.textureZoomWithMap,overlay:hT}}}}this._renderData[hT.hashCode]=true;this._updateOverlayLoopRender();return true},_removeGraphFromRenderData:function(T){if(!this._renderData[T.hashCode]){return false}if(T instanceof bt){for(var hT=0;hT<this._renderData[3].length;hT++){if(this._renderData[3][hT].hashCode===T.hashCode){this._renderData[3].splice(hT,1);break}}this._map._featureMgr.setOverlayData(this._renderData[3],6)}if(T instanceof aS){for(var hT=0;hT<this._renderData[0].length;hT++){if(this._renderData[0][hT].hashCode===T.hashCode){this._renderData[0].splice(hT,1);break}}this._map._featureMgr.setOverlayData(this._renderData[0],0)}if(T instanceof dX){for(var hT=0;hT<this._renderData[1].length;hT++){if(this._renderData[1][hT].hashCode===T.hashCode){var e=this._renderData[1].splice(hT,1);if(e[0].overlay._config.type==="video"){this._needRAF-=1}break}}this._map._featureMgr.setOverlayData(this._renderData[1],5)}this._polylineRenderData[T.hashCode]=null;this._renderData[T.hashCode]=null;this._updateOverlayLoopRender();return true},_updateOverlayLoopRender:function(){var e=this;if(this._needRAF>0){if(this._rafTimer){return}this._rafTimer=requestAnimationFrame(e._loopRender.bind(e))}else{cancelAnimationFrame(this._rafTimer);this._rafTimer=undefined}},_loopRender:function(){this._map._webglMapScene.startRenderThread();this._rafTimer=requestAnimationFrame(this._loopRender.bind(this))},_updateGraphRenderData:function(T,hZ){var hY;var hV=false;var hW;if(T instanceof bt){var e=T.buildFillVertex(da,hZ);for(var hU=0;hU<this._renderData[3].length;hU++){var h0=this._renderData[3][hU];if(h0.hashCode===T.hashCode){this._renderData[3][hU].vertex=e.vertex;this._renderData[3][hU].index=e.index;this._map._featureMgr.setOverlayData(this._renderData[3],6);this._removeGraphFromRenderData(T);this._addGraphToRenderData(T);break}}}if(T instanceof aS){hW=T.getFillStyleForGL();var e=T.buildFillVertex(da);for(var hU=0;hU<this._renderData[0].length;hU++){if(this._renderData[0][hU].hashCode===T.hashCode){this._renderData[0][hU][0]=hW;this._renderData[0][hU][1]=e[0];this._renderData[0][hU][2]=e[1];break}}this._map._featureMgr.setOverlayData(this._renderData[0],0)}hY=T.buildVertex(fi,hZ);var hX=T.hashCode;if(this._polylineRenderData[hX]){if(!hY.inCache||hY.cacheIndex!==this._polylineRenderData[hX].cacheIndex){hV=true;var hT=this._polylineRenderData[hX];hT.cacheIndex=hY.cacheIndex;hT.styleData=hY;hT.texture=T._config.texture;hT.textureSize=T._config.textureSize;hT.zoomWithMap=T._config.textureZoomWithMap;hT.overlay=T}}return hV},_updateMarker:function(i,hU,hT){var T=false;if(i){hU=hU||"";if(hU==="add"||hU==="show"){if(i._visible===true&&i.getPositionIn()!==null){T=this._addMarkerToRenderData(i)}}else{if(hU==="remove"||hU==="hide"){T=this._removeMarkerFromRenderData(i)}else{T=this._updateMarkerRenderData(i,hU,hT)}}}if(T){var e=new bc("onrefresh");e.source="webgloverlaymgr";this._map.fire(e)}}});function da(hY,h3,hZ,h0,h5){hZ=hZ||2;var h1=h3&&h3.length;var hW=h1?h3[0]*hZ:hY.length;var h2=fS(hY,0,hW,hZ,true);var hV=h5||[];if(!h2){return hV}var hU;var hT;var T;var e;var h6;var h4;var h7;h0=h0||0;if(h1){h2=gk(hY,h3,h2,hZ)}if(hY.length>80*hZ){hU=T=hY[0];hT=e=hY[1];for(var hX=hZ;hX<hW;hX+=hZ){h6=hY[hX];h4=hY[hX+1];if(h6<hU){hU=h6}if(h4<hT){hT=h4}if(h6>T){T=h6}if(h4>e){e=h4}}h7=Math.max(T-hU,e-hT)}f1(h2,hV,hZ,hU,hT,h7,null,h0);return hV}function fS(hV,hX,e,hW,T){var hT;var hU;if(T===(aV(hV,hX,e,hW)>0)){for(hT=hX;hT<e;hT+=hW){hU=bZ(hT,hV[hT],hV[hT+1],hU)}}else{for(hT=e-hW;hT>=hX;hT-=hW){hU=bZ(hT,hV[hT],hV[hT+1],hU)}}if(hU&&e5(hU,hU.next)){fH(hU);hU=hU.next}return hU}function z(hT,e){if(!hT){return hT}if(!e){e=hT}var T=hT;var i;do{i=false;if(!T.steiner&&(e5(T,T.next)||cx(T.prev,T,T.next)===0)){fH(T);T=e=T.prev;if(T===T.next){return null}i=true}else{T=T.next}}while(i||T!==e);return e}function f1(i,hT,hW,hU,e,h0,hZ,hX){if(!i){return}if(!hZ&&h0){B(i,hU,e,h0)}var hY=i;var T;var hV;while(i.prev!==i.next){T=i.prev;hV=i.next;if(h0?G(i,hU,e,h0):dD(i)){hT.push(T.i/hW+hX);hT.push(i.i/hW+hX);hT.push(hV.i/hW+hX);fH(i);i=hV.next;hY=hV.next;continue}i=hV;if(i===hY){if(!hZ){f1(z(i),hT,hW,hU,e,h0,1,hX)}else{if(hZ===1){i=eU(i,hT,hW,hX);f1(i,hT,hW,hU,e,h0,2,hX)}else{if(hZ===2){d7(i,hT,hW,hU,e,h0,hX)}}}break}}}function dD(T){var i=T.prev;var e=T;var hU=T.next;if(cx(i,e,hU)>=0){return false}var hT=T.next.next;while(hT!==T.prev){if(av(i.x,i.y,e.x,e.y,hU.x,hU.y,hT.x,hT.y)&&cx(hT.prev,hT,hT.next)>=0){return false}hT=hT.next}return true}function G(hV,hW,hU,h2){var hZ=hV.prev;var hY=hV;var hX=hV.next;if(cx(hZ,hY,hX)>=0){return false}var h3=hZ.x<hY.x?(hZ.x<hX.x?hZ.x:hX.x):(hY.x<hX.x?hY.x:hX.x);var h0=hZ.y<hY.y?(hZ.y<hX.y?hZ.y:hX.y):(hY.y<hX.y?hY.y:hX.y);var hT=hZ.x>hY.x?(hZ.x>hX.x?hZ.x:hX.x):(hY.x>hX.x?hY.x:hX.x);var T=hZ.y>hY.y?(hZ.y>hX.y?hZ.y:hX.y):(hY.y>hX.y?hY.y:hX.y);var i=am(h3,h0,hW,hU,h2);var h1=am(hT,T,hW,hU,h2);var e=hV.nextZ;while(e&&e.z<=h1){if(e!==hV.prev&&e!==hV.next&&av(hZ.x,hZ.y,hY.x,hY.y,hX.x,hX.y,e.x,e.y)&&cx(e.prev,e,e.next)>=0){return false}e=e.nextZ}e=hV.prevZ;while(e&&e.z>=i){if(e!==hV.prev&&e!==hV.next&&av(hZ.x,hZ.y,hY.x,hY.y,hX.x,hX.y,e.x,e.y)&&cx(e.prev,e,e.next)>=0){return false}e=e.prevZ}return true}function eU(hW,T,hV,hU){var hT=hW;do{var i=hT.prev;var e=hT.next.next;if(!e5(i,e)&&fI(i,hT,hT.next,e)&&e7(i,e)&&e7(e,i)){T.push(i.i/hV+hU);T.push(hT.i/hV+hU);T.push(e.i/hV+hU);fH(hT);fH(hT.next);hT=hW=e}hT=hT.next}while(hT!==hW);return hT}function d7(e,T,hU,hT,i,hZ,hV){var hY=e;do{var hX=hY.next.next;while(hX!==hY.prev){if(hY.i!==hX.i&&gL(hY,hX)){var hW=at(hY,hX);hY=z(hY,hY.next);hW=z(hW,hW.next);f1(hY,T,hU,hT,i,hZ,null,hV);f1(hW,T,hU,hT,i,hZ,null,hV);return}hX=hX.next}hY=hY.next}while(hY!==e)}function gk(hT,h0,hW,hV){var hX=[];var hU;var hY;var e;var T;var hZ;for(hU=0,hY=h0.length;hU<hY;hU++){e=h0[hU]*hV;T=hU<hY-1?h0[hU+1]*hV:hT.length;hZ=fS(hT,e,T,hV,false);if(hZ===hZ.next){hZ.steiner=true}hX.push(cZ(hZ))}hX.sort(dB);for(hU=0;hU<hX.length;hU++){gg(hX[hU],hW);hW=z(hW,hW.next)}return hW}function dB(i,e){return i.x-e.x}function gg(T,i){i=dy(T,i);if(i){var e=at(i,T);z(e,e.next)}}function dy(e,hU){var i=hU;var hW=e.x;var hV=e.y;var hT=-Infinity;var T;do{if(hV<=i.y&&hV>=i.next.y){var hZ=i.x+(hV-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(hZ<=hW&&hZ>hT){hT=hZ;if(hZ===hW){if(hV===i.y){return i}if(hV===i.next.y){return i.next}}T=i.x<i.next.x?i:i.next}}i=i.next}while(i!==hU);if(!T){return null}if(hW===hT){return T.prev}var hY=T;var h2=T.x;var h0=T.y;var h1=Infinity;var hX;i=T.next;while(i!==hY){if(hW>=i.x&&i.x>=h2&&av(hV<h0?hW:hT,hV,h2,h0,hV<h0?hT:hW,hV,i.x,i.y)){hX=Math.abs(hV-i.y)/(hW-i.x);if((hX<h1||(hX===h1&&i.x>T.x))&&e7(i,e)){T=i;h1=hX}}i=i.next}return T}function B(hU,e,hT,i){var T=hU;do{if(T.z===null){T.z=am(T.x,T.y,e,hT,i)}T.prevZ=T.prev;T.nextZ=T.next;T=T.next}while(T!==hU);T.prevZ.nextZ=null;T.prevZ=null;e3(T)}function e3(hY){var hV;var hU;var hT;var hX;var hZ;var T;var h0;var hW;var h1=1;do{hU=hY;hY=null;hZ=null;T=0;while(hU){T++;hT=hU;h0=0;for(hV=0;hV<h1;hV++){h0++;hT=hT.nextZ;if(!hT){break}}hW=h1;while(h0>0||(hW>0&&hT)){if(h0===0){hX=hT;hT=hT.nextZ;hW--}else{if(hW===0||!hT){hX=hU;hU=hU.nextZ;h0--}else{if(hU.z<=hT.z){hX=hU;hU=hU.nextZ;h0--}else{hX=hT;hT=hT.nextZ;hW--}}}if(hZ){hZ.nextZ=hX}else{hY=hX}hX.prevZ=hZ;hZ=hX}hU=hT}hZ.nextZ=null;h1*=2}while(T>1);return hY}function am(i,hU,e,hT,T){i=32767*(i-e)/T;hU=32767*(hU-hT)/T;i=(i|(i<<8))&16711935;i=(i|(i<<4))&252645135;i=(i|(i<<2))&858993459;i=(i|(i<<1))&1431655765;hU=(hU|(hU<<8))&16711935;hU=(hU|(hU<<4))&252645135;hU=(hU|(hU<<2))&858993459;hU=(hU|(hU<<1))&1431655765;return i|(hU<<1)}function cZ(T){var i=T;var e=T;do{if(i.x<e.x){e=i}i=i.next}while(i!==T);return e}function av(hU,hT,hW,hV,e,hX,T,i){return(e-T)*(hT-i)-(hU-T)*(hX-i)>=0&&(hU-T)*(hV-i)-(hW-T)*(hT-i)>=0&&(hW-T)*(hX-i)-(e-T)*(hV-i)>=0}function gL(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!cY(i,e)&&e7(i,e)&&e7(e,i)&&ef(i,e)}function cx(T,i,e){return(i.y-T.y)*(e.x-i.x)-(i.x-T.x)*(e.y-i.y)}function e5(i,e){return i.x===e.x&&i.y===e.y}function fI(T,e,i,hT){if((e5(T,e)&&e5(i,hT))||(e5(T,hT)&&e5(i,e))){return true}return cx(T,e,i)>0!==cx(T,e,hT)>0&&cx(i,hT,T)>0!==cx(i,hT,e)>0}function cY(i,e){var T=i;do{if(T.i!==i.i&&T.next.i!==i.i&&T.i!==e.i&&T.next.i!==e.i&&fI(T,T.next,i,e)){return true}T=T.next}while(T!==i);return false}function e7(i,e){return cx(i.prev,i,i.next)<0?cx(i,e,i.next)>=0&&cx(i,i.prev,e)>=0:cx(i,e,i.prev)<0||cx(i,i.next,e)<0}function ef(T,i){var hV=T;var e=false;var hU=(T.x+i.x)/2;var hT=(T.y+i.y)/2;do{if(((hV.y>hT)!==(hV.next.y>hT))&&(hU<(hV.next.x-hV.x)*(hT-hV.y)/(hV.next.y-hV.y)+hV.x)){e=!e}hV=hV.next}while(hV!==T);return e}function at(T,i){var e=new aH(T.i,T.x,T.y);var hT=new aH(i.i,i.x,i.y);var hV=T.next;var hU=i.prev;T.next=i;i.prev=T;e.next=hV;hV.prev=e;hT.next=e;e.prev=hT;hU.next=hT;hT.prev=hU;return hT}function bZ(T,e,hV,hT){var hU=new aH(T,e,hV);if(!hT){hU.prev=hU;hU.next=hU}else{hU.next=hT.next;hU.prev=hT;hT.next.prev=hU;hT.next=hU}return hU}function fH(e){e.next.prev=e.prev;e.prev.next=e.next;if(e.prevZ){e.prevZ.nextZ=e.nextZ}if(e.nextZ){e.nextZ.prevZ=e.prevZ}}function aH(T,e,hT){this.i=T;this.x=e;this.y=hT;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=false}da.deviation=function(hW,h1,hY,hT){var hZ=h1&&h1.length;var hV=hZ?h1[0]*hY:hW.length;var T=Math.abs(aV(hW,0,hV,hY));if(hZ){for(var hX=0,h0=h1.length;hX<h0;hX++){var e=h1[hX]*hY;var hU=hX<h0-1?h1[hX+1]*hY:hW.length;T-=Math.abs(aV(hW,e,hU,hY))}}var h5=0;for(hX=0;hX<hT.length;hX+=3){var h4=hT[hX]*hY;var h3=hT[hX+1]*hY;var h2=hT[hX+2]*hY;h5+=Math.abs((hW[h4]-hW[h2])*(hW[h3+1]-hW[h4+1])-(hW[h4]-hW[h3])*(hW[h2+1]-hW[h4+1]))}return T===0&&h5===0?0:Math.abs((h5-T)/T)};function aV(hV,hX,e,hW){var hU=0;for(var hT=hX,T=e-hW;hT<e;hT+=hW){hU+=(hV[T]-hV[hT])*(hV[hT+1]+hV[T+1]);T=hT}return hU}da.flatten=function(hV){var hW=hV[0][0].length;var e={vertices:[],holes:[],dimensions:hW};var hT=0;for(var hU=0;hU<hV.length;hU++){for(var T=0;T<hV[hU].length;T++){for(var hX=0;hX<hW;hX++){e.vertices.push(hV[hU][T][hX])}}if(hU>0){hT+=hV[hU-1].length;e.holes.push(hT)}}return e};');
﻿_jsload&&_jsload('oppcgl', 'function eO(){this._currentState="idle";this._currentTouchCount=0;this._firstPointerId=-1;this._secondPointerId=-1}eO.prototype.takeAction=function(e,i){if(this["_on"+e]){this["_on"+e](i)}return this.getState()};eO.prototype._onmousedown=function(e){if(this._currentTouchCount===0){this._firstPointerId=e}else{if(this._currentTouchCount===1){this._secondPointerId=e}}this._currentTouchCount++;if(this._currentState==="idle"){this._currentState="readyToDrag"}else{if(this._currentState==="dragging"||this._currentState==="readyToDrag"){this._currentState="readyToPinch"}else{if(this._currentState==="pinching"){this._currentState="freeze"}else{this._currentState="freeze"}}}};eO.prototype._onmousemove=function(){if(this._currentState==="readyToDrag"||this._currentState==="dragging"){this._currentState="dragging"}else{if(this._currentState==="readyToPinch"){this._currentState="pinching"}}};eO.prototype._onmouseup=function(e){if(this._currentState==="idle"){return}this._currentTouchCount--;if(this._currentState==="readyToDrag"||this._currentState==="dragging"){this._currentState="idle";this._firstPointerId=-1;this._secondPointerId=-1}else{if(this._currentState==="readyToPinch"||this._currentState==="pinching"){this._clearId(e);this._currentState="freeze"}else{if(this._currentState==="freeze"){if(this._currentTouchCount===0){this._currentState="idle";this._firstPointerId=-1;this._secondPointerId=-1;return}if(this._currentTouchCount===2){if(e!==this._firstPointerId&&e!==this._secondPointerId){this._currentState="pinching"}}if(e===this._firstPointerId||e===this._secondPointerId){this._clearId(e);this._currentState="freeze"}}}}};eO.prototype._ongesturestart=function(){if(window.TouchEvent||!window.GestureEvent){return}if(this._currentState==="idle"||this._currentState==="readyToDrag"){this._currentState="readyToPinch"}};eO.prototype._ongesturechange=function(){if(window.TouchEvent||!window.GestureEvent){return}if(this._currentState==="readyToPinch"){this._currentState="pinching"}};eO.prototype._ongestureend=function(){if(window.TouchEvent||!window.GestureEvent){return}if(this._currentState==="readyToPinch"||this._currentState==="pinching"||this._currentState==="freeze"){this._currentState="idle"}};eO.prototype.getState=function(){return dV[this._currentState]||0};eO.prototype.reset=function(){this._currentState="idle";this._currentTouchCount=0;this._firstPointerId=-1;this._secondPointerId=-1};eO.prototype._clearId=function(e){if(e===this._firstPointerId){this._firstPointerId=-1}else{if(e===this._secondPointerId){this._secondPointerId=-1}}};eO.prototype.setState=function(e){this._currentState=e};bp.register(function(e){if(e._mouse){return}e._mouse=new hp(e);if(!e._mouse._drag){e._mouse=null}if(e._renderType==="webgl"){e.addEventListener("dblclick",function(i){if(!e.config.enableDblclickZoom){return}this.zoomIn(i.point)});e.addEventListener("rightdblclick",function(i){if(!e.config.enableDblclickZoom){return}this.zoomOut(i.point)});e.addEventListener("minuspress",function(i){this.zoomOut()});e.addEventListener("pluspress",function(i){this.zoomIn()})}});function aI(hT,T){var i={};i.id=hT.pointerId||0;i.clientPos={x:hT.clientX||hT.pageX||0,y:hT.clientY||hT.pageY||0};i.clientPos.x=hT.clientX-hT.layerX+hT.offsetX;i.clientPos.y=hT.clientY-hT.layerY+hT.offsetY;i.offsetPos={x:hT.layerX||hT.offsetX||0,y:hT.layerY||hT.offsetY||0};i.target=hT.target;i.button=hT.button||0;i.ctrlKey=hT.ctrlKey||false;i.metaKey=hT.metaKey||false;var hU=dF(i,T);D.extend(i,hU);i.offsetPosMap=new ek(hU.x,hU.y);i.timeStamp=hT.timeStamp;i.domEvent=hT;if(hT.type&&hT.type.indexOf("wheel")>-1){i.wheelDelta=hT.wheelDelta;i.detail=hT.detail;i.deltaX=hT.deltaX;i.deltaY=hT.deltaY;i.deltaMode=hT.deltaMode}i.offsetX=i.offsetPosMap.x;i.offsetY=i.offsetPosMap.y;i.layerX=hT.layerX;i.layerY=hT.layerY;return i}function dF(hT,T){var hV=hT.target;var h1=hT.clientPos.x;var h0=hT.clientPos.y;var hY=null;var hX=null;if(hV.nodeType!==1){hV=hV.parentNode}var hW=T.getContainer();var hU=hW;while(hU){h1-=hU.offsetLeft;h0-=hU.offsetTop;hU=hU.offsetParent}if(typeof window.scrollY==="number"){h0+=window.scrollY}if(typeof window.scrollX==="number"){h1+=window.scrollX}var i=T.getPanes();var e=null;while(hV&&hV!==hW){if(hV.hashCode){if(D.instance(hV.hashCode) instanceof cW){hY=D.instance(hV.hashCode)}if(D.instance(hV.hashCode) instanceof ao||D.instance(hV.hashCode) instanceof hJ){hX=D.instance(hV.hashCode)}}var h2=hV.parentNode;if(h2===i.floatPane||h2===i.markerMouseTarget||h2===i.floatShadow||h2===i.labelPane||h2===i.markerPane||h2===i.mapPane){e=hV}hV=h2}var hZ=null;if(e&&!hY&&!hX){hZ=e}return{x:h1,y:h0,overlay:hY,infoWindow:hX,customOverlayDom:hZ,pixel:new ek(h1,h0),point:T.pixelToPointIn(new ek(h1,h0)),latlng:T.pixelToPoint(new ek(h1,h0))}}function gl(hU,hT){var hV=hU.changedTouches[0];var i=hU.changedTouches.length;var T={target:hU.target,timeStamp:hU.timeStamp,ctrlKey:hU.ctrlKey||false,webkitForce:hU.webkitForce,metaKey:hU.metaKey||false,touchesCount:hU.touches.length,targetTouchesCount:hU.targetTouches.length};if(hU.changedTouches){T.changedTouchesCount=hU.changedTouches.length}else{T.changedTouchesCount=1}eK(hV,T,hT);if(i>1){T.secondTouchInfo={};D.extend(T.secondTouchInfo,T);eK(hU.changedTouches[1],T.secondTouchInfo,hT)}return T}function eK(hV,hW,e){if(!hV){return}var hY=hV.clientX;var hX=hV.clientY;hW.id=hV.identifier||0;hW.clientPos={x:hY,y:hX};var hT=0;var T=0;var i=e.container;while(i.offsetParent){hT+=i.offsetLeft;T+=i.offsetTop;i=i.offsetParent}hW.offsetPos={x:hY-hT,y:hX-T};hW.button=0;hW.offsetPosMap=new ek(hW.offsetPos.x,hW.offsetPos.y);var hU=dF(hW,e);D.extend(hW,hU)}function C(hX,hW){var i=hX.clientX;var hY=hX.clientY;if(typeof window.scrollY==="number"){hY+=window.scrollY}var hV={};hV.id=0;hV.clientPos={x:i,y:hY};hV.target=hX.target;var hT=0;var T=0;var hU=hW.container;while(hU.offsetParent){hT+=hU.offsetLeft;T+=hU.offsetTop;hU=hU.offsetParent}hV.offsetPos={x:i-hT,y:hY-T};hV.timeStamp=hX.timeStamp;hV.offsetPosMap=new ek(hV.offsetPos.x,hV.offsetPos.y);hV.scale=hX.scale;hV.rotation=hX.rotation;return hV}function hp(e){this._map=e;if(e._renderType==="webgl"){this._drag=new ce(e)}else{if(typeof g5==="undefined"){return}this._drag=new g5(e)}this._earthDrag=null;this._earthWheel=null;this._dragStarted=false;this._touchStarted=false;this._waitForSecondTouch=false;this._firstTouchInfo={};this._secondTouchInfo={};this._currentTouchCount=0;this._prevGestureScale=1;this._useGesture=!!((f6()&&window.GestureEvent)||(!window.TouchEvent&&window.GestureEvent));this._opButton=-1;this._rotationFix=0;this._pinchRotationThreshold=20;this._pinchZoomThreshold=0.2;this._gestureStatus={zoom:false,rotate:false,tilt:false,dragZoom:false};this._diffX=0;this._diffY=0;this._enableRightDrag=true;if(typeof navigator.userAgent==="string"&&navigator.userAgent.indexOf("QQBrowser")>0){this._enableRightDrag=false}this._lastWheelTime=new Date();this._isModernBrowser=e.config.isModernBrowser;if(e.getRenderType()==="webgl"){e.deepZoom=new aq(e)}else{if(this._isModernBrowser){e.deepZoom=new bF(e)}}this._stateMachine=new eO();this._init();this._bind();if(this._useGesture){this._bindGesture()}this._bindRightButton();this._bindMouseWheel();this._operationVelocity=0;this._lastDiffDistance=0;this._zoomVelocity=0;this._lastDiffZoom=0;this._rotationVelocity=0;this._initRotation=0;this._trackVelocityTimer=null;this._trackTimeStamp=0;this._lastDragPoint={x:0,y:0};this._penultimateDragPoint={x:0,y:0};this._touchInMap=false}hp.prototype._init=function(){this._supportPointerEvent=(window.PointerEvent||window.MSPointerEvent)&&(navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);var e={mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup"};if(this._supportPointerEvent){if(window.PointerEvent){e.mousedown="pointerdown";e.mousemove="pointermove";e.mouseup="pointerup"}else{if(window.MSPointerEvent){e.mousedown="MSPointerDown";e.mousemove="MSPointerMove";e.mouseup="MSPointerUp"}}}this._eventMapping=e};hp.prototype._bind=function(){var hU=this._map;var T=hU.temp;var i=this._eventMapping;var hT=this;var e=hU.platform;D.on(e,i.mousedown,function(hW){if(f6()){return}hT._mousedown=true;var hV=aI(hW,hU);hT._mouseButton=hW.button;hU.dispatchEvent(D.extend(new bc("onmousedown"),hV));hT._processMouseDown(hV)});D.on(e,"touchstart",function(hW){if(hT._mousedown===true){return}hT._touchStarted=true;var hV=gl(hW,hU);hT._processMouseDown(hV);hT._touchInMap=true;if(!hV.customOverlayDom){hW.preventDefault()}});D.on(document,i.mousemove,function(hW){if(hT._touchStarted){return}var hV=aI(hW,hU);hV.button=hT._mouseButton;if(hU.currentOperation===dV.idle){hU.dispatchEvent(D.extend(new bc("onmousemove"),hV))}hT._processMouseMove(hV)});D.on(document,"touchmove",function(hV){if(!hT._touchInMap){return}hT._processMouseMove(gl(hV,hU));hV.preventDefault});D.on(document,i.mouseup,function(hV){if(hT._touchStarted){return}hT._mousedown=false;hT._processMouseUp(aI(hV,hU))});D.on(document,"touchend",function(hZ){if(!hT._touchInMap){return}if(!hT._firstTouchInfo||!hT._firstTouchInfo.offsetPos){hT._processMouseUp(aI(hZ,hU));return}if(hZ.targetTouches.length===0){var hX=Math.abs(hT._diffX)>5||Math.abs(hT._diffY)>5;hT._touchStarted=false;if(!hT._twoFingerTouched&&!hX){var hV=new bc("onclick");D.extend(hV,hT._firstTouchInfo);hV.icon=hU.getIconByClickPosition(hT._firstTouchInfo.offsetPos);hU.dispatchEvent(hV);if(hT._waitForSecondTouch===false){hT._waitForSecondTouch=true;hT._firstTouchPos={x:hT._firstTouchInfo.offsetPos.x,y:hT._firstTouchInfo.offsetPos.y};hT._doubleTouchTimer=setTimeout(function hW(){hT._waitForSecondTouch=false;hT._doubleTouchTimer=null},hU.config.clickInterval)}else{if(Math.abs(hT._firstTouchInfo.offsetPos.x-hT._firstTouchPos.x)<20&&Math.abs(hT._firstTouchInfo.offsetPos.y-hT._firstTouchPos.y)<20){var hY=new bc("ondblclick");D.extend(hY,hT._firstTouchInfo);hU.dispatchEvent(hY)}hT._waitForSecondTouch=false;clearTimeout(hT._doubleTouchTimer);hT._doubleTouchTimer=null}}hT._twoFingerTouched=false;hT._touchInMap=false}hT._processMouseUp(gl(hZ,hU))});D.on(e,"click",function(hY){if(window.TouchEvent&&f6()){return}if(hU.getLock()===true){return}if(hU.currentOperation===dV.idle){var hX=hT._diffX===0&&hT._diffY===0;var hW=aI(hY,hU);if(hX){var hV=new bc("onclick");D.extend(hV,hW);hV.icon=hU.getIconByClickPosition(hV.offsetPosMap);hU.dispatchEvent(hV)}if(!T._clickTimer){T._clickTimer=setTimeout(function(){T._clickTimer=null;if(hX){var hZ=new bc("onclickex");D.extend(hZ,hW);hU.dispatchEvent(hZ)}},hU.config.clickInterval)}}hT._diffX=0;hT._diffY=0});hU.container.onselectstart=function(){return false};D.on(hU.container,"contextmenu",function(hV){hV.cancelBubble=true;bV(hV)});D.on(e,"dblclick",function(hV){if(hU.getLock()===true){return}if(hU.currentOperation===dV.idle){if(D.Browser.ie){hU.dispatchEvent(D.extend(new bc("onclick"),aI(hV,hU)))}if(T._clickTimer){clearTimeout(T._clickTimer);T._clickTimer=null}hU.dispatchEvent(D.extend(new bc("ondblclick"),aI(hV,hU)))}});D.on(document,"mousedown",function(hW){hW=window.event||hW;var hV=hW.srcElement||hW.target;if(T.canKeyboard){T.canKeyboard=hU.container.contains(hV)}else{T.canKeyboard=e.contains(hV)}});D.on(e,"webkitmouseforcedown",function(hV){hU.dispatchEvent(D.extend(new bc("onforcedown"),aI(hV,hU)))});D.on(e,"webkitmouseforceup",function(hV){hU.dispatchEvent(D.extend(new bc("onforceup"),aI(hV,hU)))})};hp.prototype._bindGesture=function(){var e=this;var i=this._map;D.on(i.platform,"gesturestart",function(hT){i.currentOperation=e._stateMachine.takeAction("gesturestart");var T=C(hT,i);e._gestureStartTime=T.timeStamp;if(T.rotation<-160){e._rotationFix=180}else{if(T.rotation>160){e._rotationFix=-180}else{e._rotationFix=0}}e._pinchStartPosition=T.offsetPosMap;e._getCurrentDrag().onReadyToPinch(hT,{initMiddlePoint:T.offsetPosMap,pinchStartPosition:e._pinchStartPosition,zoomRatio:1});hT.preventDefault()});D.on(document,"gesturechange",function(hV){if(i.currentOperation!==dV.readyToPinch&&i.currentOperation!==dV.pinching){return}i.currentOperation=e._stateMachine.takeAction("gesturechange");if(i.currentOperation!==dV.pinching){return}var hU=C(hV,i);if(isNaN(hU.scale)){hU.scale=e._prevGestureScale}else{e._prevGestureScale=hU.scale}hU.rotation+=e._rotationFix;var T=hU.offsetPosMap;e._pinchingPosition=T;e._diffX=T.x-e._pinchStartPosition.x;e._diffY=T.y-e._pinchStartPosition.y;var hT=e._getPinchParam(hU);if(!hT){hV.preventDefault();return}e._getCurrentDrag().onPinching(hV,{pinchStartPosition:e._pinchStartPosition,pinchingPosition:T,pinchingDistance:hT.pinchingDistance,zoomRatio:hT.zoomRatio,angleDiff:hT.rotation,gestureStatus:e._gestureStatus});hV.preventDefault()});D.on(document,"gestureend",function(hU){if(i.currentOperation!==dV.readyToPinch&&i.currentOperation!==dV.pinching){return}var hT=C(hU,i);if(isNaN(hT.scale)){hT.scale=e._prevGestureScale}else{e._prevGestureScale=hT.scale}var T=e._pinchParam||{};e._getCurrentDrag().onPinchEnd(hU,{pinchStartPosition:e._pinchStartPosition,pinchEndPosition:e._pinchingPosition,zoomRatio:T.zoomRatio,angleDiff:T.rotation,gestureStatus:e._gestureStatus});e._resetGestureParam();i.currentOperation=e._stateMachine.takeAction("gestureend");hU.preventDefault()})};hp.prototype._getPinchParam=function(hT){var hY=hT.scale;var h0=hT.rotation;var hU=hT.offsetPosMap;var hX=hU.x-this._pinchStartPosition.x;var hV=hU.y-this._pinchStartPosition.y;var T={x:hX,y:hV};var hZ=hT.timeStamp-this._gestureStartTime;if(hZ<100){return null}var i=this._gestureStatus;if(!this._gestureDetected){this._gestureDetected=true;if(Math.abs(hX)<10&&Math.abs(hV)>10&&Math.abs(hY-1)<0.1&&h0<10){i.tilt=true}}var hW=0;if(!i.tilt&&!i.rotate){if(Math.abs(h0)>this._pinchRotationThreshold){this._initRotation=h0;if(h0>0){hW=h0-this._pinchRotationThreshold}else{hW=h0+this._pinchRotationThreshold}i.rotate=true}else{h0=0}}if(i.rotate&&this._initRotation){hW+=h0-this._initRotation}var e=hY;if(i.tilt){e=1}this._pinchParam={zoomRatio:e,rotation:hW,pinchingDistance:T};return this._pinchParam};hp.prototype._resetGestureParam=function(){this._initRotation=0;this._gestureStatus.zoom=false;this._gestureStatus.rotate=false;this._gestureStatus.tilt=false;this._gestureStatus.dragZoom=false;this._gestureDetected=false;this._pinchParam=null;this._gestureStartTime=null};hp.prototype._bindRightButton=function(){var i=this._map;var e=this;D.on(i.container,this._eventMapping.mouseup,function(T){if(i.mapType===BMAP_EARTH_MAP){return}if(i.getLock()===true){return}if(i.currentOperation!==dV.readyToDrag){if(i.currentOperation===dV.dragging&&e._diffX===0&&e._diffY===0){}else{return}}if(T.button===2){e._processRightClick(aI(T,i))}})};hp.prototype._processMouseDown=function(hY){var i=this._map;if(hY.overlay&&hY.overlay instanceof ds&&hY.overlay._config.enableDraggingMap===false&&!f6()){if(i.currentOperation===dV.idle){this._clearStatus();this._firstTouchInfo=hY;this._firstTouchInfo.initX=hY.offsetPosMap.x;this._firstTouchInfo.initY=hY.offsetPosMap.y;return}}if(i.currentOperation!==dV.idle&&hY.button!==this._opButton){return}if(hY.button===2&&this._currentTouchCount===1){return}if(i.getLock()){return}if(this._currentTouchCount===2){return}this._currentTouchCount++;if(this._currentTouchCount===2){this._twoFingerTouched=true}if(this._lastTouchstartTime&&f6()){var hU=hY.timeStamp-this._lastTouchstartTime;if(hU<200){this._gestureStatus.dragZoom=true}}this._lastTouchstartTime=hY.timeStamp;i.currentOperation=this._stateMachine.takeAction("mousedown",hY.id);if(hY.secondTouchInfo){this._currentTouchCount++;i.currentOperation=this._stateMachine.takeAction("mousedown",hY.secondTouchInfo.id)}if(i.currentOperation===dV.readyToDrag){if(D.Browser.ie||(D.Browser.firefox&&hY.target.setCapture)){hY.target.setCapture()}var hV=this._firstTouchInfo;D.extend(hV,hY);hV.initX=hY.offsetPosMap.x;hV.initY=hY.offsetPosMap.y;this._opButton=hY.button;if(hY.button===2&&this._enableRightDrag===false){i.currentOperation=dV.idle;this._stateMachine.reset();return}this._getCurrentDrag().onReadyToDrag(hY)}else{if(i.currentOperation===dV.readyToPinch){if(hY.secondTouchInfo){D.extend(this._firstTouchInfo,hY);this._firstTouchInfo.initX=hY.offsetPosMap.x;this._firstTouchInfo.initY=hY.offsetPosMap.y;D.extend(this._secondTouchInfo,hY.secondTouchInfo);this._secondTouchInfo.initX=hY.secondTouchInfo.offsetPosMap.x;this._secondTouchInfo.initY=hY.secondTouchInfo.offsetPosMap.y;this._opButton=hY.button}else{D.extend(this._secondTouchInfo,hY);this._secondTouchInfo.initX=hY.offsetPosMap.x;this._secondTouchInfo.initY=hY.offsetPosMap.y}if(this._useGesture){return}this._initTouchDistance=gX(this._firstTouchInfo.offsetPosMap,this._secondTouchInfo.offsetPosMap);this._initMiddlePoint=c2(this._firstTouchInfo.offsetPosMap,this._secondTouchInfo.offsetPosMap);var hT=this._firstTouchInfo.initX-this._initMiddlePoint.x;var h0=this._initMiddlePoint.y-this._firstTouchInfo.initY;var T=this._secondTouchInfo.initX-this._initMiddlePoint.x;var hZ=this._initMiddlePoint.y-this._secondTouchInfo.initY;var hW;if(hT-T!==0){var hX=(hZ-h0)/(T-hT);hW=df(Math.atan(hX))}else{hW=90}if(hW<0){hW=180+hW}this._initAngle=hW;this._preAngle=hW;this._pinchStartPosition=this._initMiddlePoint;this._getCurrentDrag().onReadyToPinch(hY,{initMiddlePoint:this._initMiddlePoint,pinchStartPosition:this._pinchStartPosition,zoomRatio:1})}}};hp.prototype._processMouseMove=function(hV){var i=this._map;if(i.currentOperation===dV.idle){return}if(hV.id===this._firstTouchInfo.id){D.extend(this._firstTouchInfo,hV)}else{if(hV.id===this._secondTouchInfo.id){D.extend(this._secondTouchInfo,hV)}}if(hV.secondTouchInfo){if(hV.secondTouchInfo.id===this._firstTouchInfo.id){D.extend(this._firstTouchInfo,hV.secondTouchInfo)}else{if(hV.secondTouchInfo.id===this._secondTouchInfo.id){D.extend(this._secondTouchInfo,hV.secondTouchInfo)}}}i.currentOperation=this._stateMachine.takeAction("mousemove",hV.id);if(i.currentOperation===dV.pinching){if(this._useGesture){return}if(!this._gestureStartTime){this._gestureStartTime=hV.timeStamp}var hZ=gX(this._firstTouchInfo.offsetPosMap,this._secondTouchInfo.offsetPosMap);var hY=c2(this._firstTouchInfo.offsetPosMap,this._secondTouchInfo.offsetPosMap);this._pinchingPosition=hY;this._diffX=hY.x-this._initMiddlePoint.x;this._diffY=hY.y-this._initMiddlePoint.y;var hW={scale:Math.round(hZ/this._initTouchDistance*100)/100,rotation:this._calcRotationDiff(hY),offsetPosMap:hY,timeStamp:hV.timeStamp};this._pinchingPosition=hY;var T=this._getPinchParam(hW);if(T){this._zoomRatio=T.zoomRatio;this._getCurrentDrag().onPinching(hV,{initMiddlePoint:this._initMiddlePoint,pinchStartPosition:this._pinchStartPosition,pinchingPosition:hY,pinchingDistance:T.pinchingDistance,zoomRatio:T.zoomRatio,angleDiff:T.rotation,gestureStatus:this._gestureStatus})}}else{if(i.currentOperation===dV.dragging){var hU=this._getCurrentDrag();if(this._dragStarted===false){hU.onDragStart&&hU.onDragStart(hV);this._dragStarted=true}if(hV.id===this._firstTouchInfo.id){this._diffX=hV.offsetPosMap.x-this._firstTouchInfo.initX;this._diffY=hV.offsetPosMap.y-this._firstTouchInfo.initY}else{if(hV.secondTouchInfo&&hV.secondTouchInfo.id===this._firstTouchInfo.id){this._diffX=hV.secondTouchInfo.offsetPosMap.x-this._firstTouchInfo.initX;this._diffY=hV.secondTouchInfo.offsetPosMap.y-this._firstTouchInfo.initY}}this._lastDragPoint=hV.pixel;var hT;if(this._lastDragPoint.x===this._penultimateDragPoint.x&&this._lastDragPoint.y===this._penultimateDragPoint.y){hT={x:this._diffX,y:this._diffY}}else{hT={x:this._lastDragPoint.x-this._penultimateDragPoint.x,y:this._lastDragPoint.y-this._penultimateDragPoint.y}}if(!i.config.enableDragging){return}hU.onDragging(hV,{diffX:this._diffX,diffY:this._diffY,velocity:this._operationVelocity,button:this._opButton,dragDistance:{x:this._diffX,y:this._diffY},gestureStatus:this._gestureStatus,dir:hT});if(!this._trackVelocityTimer){var hX=this;this._trackTimeStamp=(new Date()).getTime();this._trackVelocityTimer=setInterval(function(){hX._trackVelocity();hX._penultimateDragPoint=hX._lastDragPoint},30)}}}};hp.prototype._calcRotationDiff=function(hY){var i=this._firstTouchInfo.offsetPosMap.x-hY.x;var hX=hY.y-this._firstTouchInfo.offsetPosMap.y;var e=this._secondTouchInfo.offsetPosMap.x-hY.x;var hW=hY.y-this._secondTouchInfo.offsetPosMap.y;var hT;if(i-e!==0){var hU=(hW-hX)/(e-i);hT=df(Math.atan(hU))}else{hT=90}if(hT<0){hT=180+hT}var T=hT;while(this._preAngle-hT>100){hT=hT+180}while(this._preAngle-hT<-100){hT=hT-180}var hV=this._initAngle-hT;this._preAngle=hT;return hV};hp.prototype._processMouseUp=function(hU){var hT=this._map;if(hT.currentOperation===dV.idle){return}if(hU.button!==this._opButton){return}this._currentTouchCount--;if(hT.currentOperation===dV.readyToDrag||hT.currentOperation===dV.dragging){if(this._trackVelocityTimer){clearInterval(this._trackVelocityTimer);this._trackVelocityTimer=null}this._dragStarted=false;var i;if(this._lastDragPoint.x===this._penultimateDragPoint.x&&this._lastDragPoint.y===this._penultimateDragPoint.y){i={x:this._diffX,y:this._diffY}}else{i={x:this._lastDragPoint.x-this._penultimateDragPoint.x,y:this._lastDragPoint.y-this._penultimateDragPoint.y}}this._getCurrentDrag().onDragEnd(hU,{velocity:this._operationVelocity,dragDistance:{x:this._diffX,y:this._diffY},gestureStatus:this._gestureStatus,dir:i});this._clearStatus(hU);this._resetGestureParam();if(D.Browser.ie||(D.Browser.firefox&&hU.target.releaseCapture)){hU.target.releaseCapture()}this._opButton=-1}else{if(hT.currentOperation===dV.pinching){if(!this._useGesture){var T=this._pinchParam;if(T){this._getCurrentDrag().onPinchEnd(hU,{pinchStartPosition:this._pinchStartPosition,pinchEndPosition:this._pinchingPosition,zoomRatio:T.zoomRatio,angleDiff:T.rotation,gestureStatus:this._gestureStatus})}this._resetGestureParam()}this._clearId(hU.id)}else{if(hT.currentOperation===dV.freeze){if(this._currentTouchCount===0){this._clearStatus(hU)}else{if(hU.id===this._firstTouchInfo.id||hU.id===this._secondTouchInfo.id){if(!this._useGesture){var T=this._pinchParam;if(T){this._getCurrentDrag().onPinchEnd(hU,{pinchStartPosition:this._pinchStartPosition,pinchEndPosition:this._pinchingPosition,zoomRatio:T.zoomRatio,angleDiff:T.rotation,gestureStatus:this._gestureStatus})}this._resetGestureParam()}this._clearId(hU.id)}}}}}hT.currentOperation=this._stateMachine.takeAction("mouseup",hU.id);if(hU.changedTouchesCount===2||hU.targetTouchesCount===0){hU.changedTouchesCount=1;this._processMouseUp(hU)}if(this._currentTouchCount===0&&f6()){this._diffX=this._diffY=0}};hp.prototype._clearId=function(e){if(e===this._firstTouchInfo.id){this._firstTouchInfo={}}else{if(e===this._secondTouchInfo.id){this._secondTouchInfo={}}}};hp.prototype._clearStatus=function(){this._firstTouchInfo={};this._secondTouchInfo={}};hp.prototype._processRightClick=function(hU){var hT=this._map;var T=hT.temp;if(T.rightDblclickTimer){clearTimeout(T.rightDblclickTimer);T.rightDblclickTimer=null;hT.dispatchEvent(D.extend(new bc("onrightclick"),hU));hT.dispatchEvent(D.extend(new bc("onrightdblclick"),hU))}else{hT.dispatchEvent(D.extend(new bc("onrightclick"),hU));var i=D.extend(new bc("onrightclickex"),hU);T.rightDblclickTimer=setTimeout(function(){T.rightDblclickTimer=null;hT.dispatchEvent(i)},hT.config.clickInterval)}};hp.prototype._bindMouseWheel=function(){var hT=this._map;var T=this;if(!D.Browser.firefox){D.on(hT.container,"mousewheel",function i(hU){if(hT.getLock()===true){return}if(!hT.config.enableWheelZoom){return}if(hT.mapType!==BMAP_EARTH_MAP){if(T._isModernBrowser){T._deepZoomWheel(hU)}else{T._wheel(hU)}}else{if(T._earthWheel){T._earthWheel.onWheel(aI(hU,hT))}}bV(hU)})}else{D.on(hT.container,"wheel",function e(hU){if(hT.getLock()===true){return}if(!hT.config.enableWheelZoom){return}if(hT.mapType!==BMAP_EARTH_MAP){if(T._isModernBrowser){T._deepZoomWheel(hU)}else{T._wheel(hU)}}else{if(T._earthWheel){T._earthWheel.onWheel(aI(hU,hT))}}bV(hU)})}};hp.prototype._getCurrentDrag=function(){var e=this._map;if(e.getMapType()!==BMAP_EARTH_MAP){return this._drag}return this._earthDrag};hp.prototype._wheel=function(hW){var hV=this._map;var hT=this._map.temp;if(hT.dragAni){hT.dragAni.stop();hT.dragAni=null;setTimeout(function(){hV.dispatchEvent(new bc("onmoveend"))},1)}if(hT.touchZoomLabelCanvas){hT.touchZoomLabelCanvas.style.display="none"}if(hT.touchZoomDiv){hT.touchZoomDiv.style.display="none"}hW=window.event||hW;hV.lastLevel=hV.zoomLevel;var T=new bc("onmousewheel");T.trend=hW.wheelDelta>=0;if(isNaN(hW.wheelDelta)){T.trend=hW.deltaY<=0}var i=new Date();if(T.trend===true&&hV.zoomLevel===hV.getMaxZoom()||T.trend===false&&hV.zoomLevel===hV.getMinZoom()||i-this._lastWheelTime<220){hV.currentOperation^=dV.mousewheel;if(T.trend===true&&hV.zoomLevel===hV.getMaxZoom()||T.trend===false&&hV.zoomLevel===hV.getMinZoom()){var hU=new bc("onzoomexceeded");if(hV.zoomLevel===hV.getMaxZoom()){hU.targetZoom=hV.zoomLevel+1}else{hU.targetZoom=hV.zoomLevel-1}hV.dispatchEvent(hU)}bV(hW);return}this._astWheelTime=i;D.extend(T,aI(hW,hV));hV.dispatchEvent(T)};hp.prototype._deepZoomWheel=function(hT){var T=this._map;var i=new bc("ondeepzoommousewheel");D.extend(i,aI(hT,T));T.dispatchEvent(i)};hp.prototype.setEarthDrag=function(e){this._earthDrag=e};hp.prototype.setEarthWheel=function(e){this._earthWheel=e};hp.prototype._trackVelocity=function(){var T=(new Date()).getTime();var e=T-this._trackTimeStamp;if(e===0){return}this._trackTimeStamp=T;var hT=Math.sqrt(Math.pow(this._diffX,2)+Math.pow(this._diffY,2));var hU=Math.abs(hT-this._lastDiffDistance);this._lastDiffDistance=hT;var i=500*hU/e;this._operationVelocity=(0.6*i+0.4*this._operationVelocity)};function aq(e){this._map=e;this.scrollCount=0;this.maxZoomWheelDir=1;this.minZoomWheelDir=-1;this.maxZoom=e.getMaxZoom();this.minZoom=e.getMinZoom();this.lastWheelTime=0;this._opMethod="";this.lastWheelDelta=0;this.lastDiff=0;this._mouseFixPoint=null;this.bindEvent()}var gJ=aq.prototype;gJ.bindEvent=function(){var e=this;var i=e._map;i.addEventListener("maptypechange",function(T){e.maxZoom=i.getMaxZoom();e.minZoom=i.getMinZoom()});i.addEventListener("deepzoommousewheel",function(T){e.wheel(T)})};gJ.wheel=function(hV){var hX=this;var i=hX._map;var h4=i.temp;if(h4.dragAni){h4.dragAni.stop(false,{readyToMove:true});h4.dragAni=null}var hT=Math.floor(hV.timeStamp);var T=hT-this.lastWheelTime;var hU=this._trend=hV.deltaY<=0;if(isNaN(hV.deltaY)){hU=this._trend=hV.wheelDelta>=0}var h3=Math.abs(hV.deltaY);var h1=Math.abs(hV.wheelDelta);var h0=h3;if(h1===0&&h0===0){return}var hZ=false;if(this._opMethod==="mouseWheel"&&typeof this._preTrend==="boolean"&&this._preTrend!==this._trend){hZ=true}if(T>100||hZ===true){this._opMethod=bM(h1,h0,hV.deltaMode);if(this._opMethod==="mouseWheel"){if(h4.wheelAni){h4.wheelAni.stop();h4.wheelAni=null}if(this._wheelMotionTimer){clearTimeout(this._wheelMotionTimer);this._wheelMotionTimer=null}}this._mouseFixPoint=hV.point.clone();this.scrollCount=0;this.startZoom=i.getZoom();i.fire(new bc("onmousewheelscroll"));if((this.startZoom===this.maxZoom&&hU===true)||(this.startZoom===this.minZoom&&hU===false)){var h2=new bc("onzoomexceeded");h2.targetZoom=this.startZoom;i.dispatchEvent(h2);return}}this.lastWheelTime=hT;var hY=this._mouseFixPoint;if(this._opMethod==="mouseWheel"&&h0!==0){var hW=h1?(h1/3):h0;this._onWheelMouse(hW,hU,hY,hV.deltaMode);return}if(this._opMethod==="padScroll"){h3=h0/50}else{h3=h0/20}if(isNaN(h3)&&hV.detail){h3=Math.abs(hV.detail)}var hX=this;setTimeout(function(){var h5=i.getZoom();var e=hU===true?h5+0.2*h3:h5-0.2*h3;i.setZoomIn(e,{zoomCenter:hY,stopCurrentAnimation:true,noAnimation:true})},20)};gJ._onWheelMouse=function(i,hT,hV,T){var hW=this._map;this.scrollCount++;if(this.scrollCount>10){this.scrollCount=10}var hU=0;if(D.Browser.firefox){if(T===1){i*=15}if(!D.Platform.macintosh){hU=dP(i*0.005,2)*this.scrollCount}else{if(i%1!==0){i*=10}hU=dP(i*0.01,2)}}else{if(!D.Platform.macintosh){hU=dP(i*0.005,2)*this.scrollCount}else{hU=dP(i*0.005,2)}}if(hU>2){hU=2}if(hT===false){hU=-hU}var e=hW.getZoom()+hU;hW.setZoomIn(e,{zoomCenter:hV,fromMouseWheel:true});this._preTrend=this._trend};function ce(e){this._map=e;this._opButton=0;this._initTilt=0;this._initHeading=0;this._mapHeight=0;this._changeHeadingStartPos=null}D.extend(ce.prototype,{onReadyToDrag:function(hU,i){var hT=this._map;var T=hT.temp;if(T.dragAni){T.dragAni.stop(false,{readyToMove:true});T.dragAni=null}if(hT._ani){hT._ani.stop();hT._ani=null}if(hT._infiniteAni){hT._infiniteAni.stop();hT._infiniteAni=null}if(T.tlPan){T.tlPan.stop();T.tlPan=null}if(!hT.config.enableDragging){return}if(hU.button===0&&hU.ctrlKey===false&&hU.metaKey===false){this._opButton="left";T.pl=hT.offsetX;T.pt=hT.offsetY}else{this._opButton="right";this._initTilt=hT.getTilt();this._initHeading=hT.getHeading();this._mapHeight=hT.getSize().height}if(T.curSpotsArray.length===0&&T.curAreaSpot===null){hT.platform.style.cursor=hT.config.draggingCursor}else{hT.platform.style.cursor="pointer"}},onReadyToPinch:function(hT,i){var T=this._map;if(T.config.fixCenterWhenPinch){this._fixPoint=T.getCenterIn().clone()}else{this._fixPoint=T.pixelToPointIn(i.pinchStartPosition)}this._fixPixel=T.pointToPixelIn(this._fixPoint);this._startZoom=T.getZoom();this._startHeading=T.getHeading();this._startTilt=T.getTilt()},onDragStart:function(){var e=this._map;if(!e.config.enableDragging){return}e.platform.style.cursor=e.config.draggingCursor;this._startZoom=e.getZoom()},onDragging:function(hX,i){var hT=this._map;if(!hT.config.enableDragging){return}var h2=hT.temp;if(this._opButton==="right"&&hT.getZoom()<hT._enableTiltZoom){return}var h0=i.diffX;var hZ=i.diffY;var hV=false;var h1=i.gestureStatus.dragZoom;if(Math.abs(h0)>1||Math.abs(hZ)>1){hV=true;if(!h2._moved){if(!h1){hT.dispatchEvent(D.extend(new bc("ondragstart"),hX));hT.dispatchEvent(new bc("onmovestart"))}h2._moved=true}}if(hV===false){return}hT.dispatchEvent(D.extend(new bc("ondragging"),hX));h2.lastDomMoveTime=hX.timeStamp;if(h1){hT.setZoomIn(this._startZoom-hZ/50,{noAnimation:true})}else{if(this._opButton==="left"){hT._setPlatformPosition(h0,hZ,{initMapOffsetX:h2.pl,initMapOffsetY:h2.pt})}else{var hY=20;var hW={noAnimation:true};if(Math.abs(hZ)>hY){if(!this._rightDragInitY){this._rightDragInitY=hX.pixel.y}}if(this._rightDragInitY){if(!hT.config.enableTilt){return}var T=hX.pixel.y-this._rightDragInitY;this._setTiltByMoveY(this._initTilt,T,hW)}if(Math.abs(h0)>hY){if(!this._rightDragInitX){this._rightDragInitX=hX.pixel.x}}if(this._rightDragInitX){if(!hT.config.enableRotate){return}var hU=hX.pixel.x-this._rightDragInitX;if(this._changeHeadingStartPos===null){this._changeHeadingStartPos=hX.pixel}if(this._changeHeadingStartPos.y<this._mapHeight/2){hT.setHeading(this._initHeading+hU*0.3,hW)}else{hT.setHeading(this._initHeading-hU*0.3,hW)}}}}},_setTiltByMoveY:function(T,hV,e){var hU=this._map;var i=T+hV*0.4;var hT=hU.getCurrentMaxTilt();i=cF(i,c9.MIN_TILT,hT,0.4);hU.setTilt(i,e)},onPinching:function(hV,i){var hU=this._map;if(hU.config.enableTiltGestures&&i.gestureStatus.tilt){this._setTiltByMoveY(this._startTilt,i.pinchingDistance.y,{noAnimation:true});return}var hT=Math.log(i.zoomRatio)/Math.log(2);var T=Math.max(Math.min(this._startZoom+hT,hU.getMaxZoom()),hU.getMinZoom());if(hU.config.enableRotateGestures&&typeof i.angleDiff==="number"){hU.setHeading(this._startHeading+i.angleDiff,{noAnimation:true})}hU.setZoomIn(T,{zoomCenter:this._fixPoint,noAnimation:true,fixPixel:this._fixPixel})},onDragEnd:function(hU,i){var hT=this._map;if(!hT.config.enableDragging){return}var T=hT.temp;if(T.curSpotsArray.length===0&&T.curAreaSpot===null){hT.platform.style.cursor=hT.config.defaultCursor}else{hT.platform.style.cursor="pointer"}if(T._moved&&!i.gestureStatus.dragZoom){hT.dispatchEvent(D.extend(new bc("ondragend"),hU));if(!hT.config.enableInertialDragging||hU.timeStamp-T.lastDomMoveTime>100){hT.dispatchEvent(new bc("onmoveend"))}else{this._processMotion(i.velocity,i.dragDistance,i.dir)}T._moved=false}this._changeHeadingStartPos=null;this._rightDragInitX=this._rightDragInitY=null;if(this._opButton==="right"){this._tiltBounceBack()}},_tiltBounceBack:function(){var i=this._map;if(i.getZoom()<i._enableTiltZoom){return}var e=i.getCurrentMaxTilt();if(i.getTilt()>e){i.setTilt(e,{duration:200})}else{if(i.getTilt()<c9.MIN_TILT){i.setTilt(c9.MIN_TILT,{duration:200})}}},onPinchEnd:function(hU,i){var hT=this._map;if(i.gestureStatus.tilt){this._tiltBounceBack()}if(hT.config.enableRotateGestures&&i.gestureStatus.rotate){var T=Math.abs(hT.getHeading());if(T%360<10){hT.resetHeading()}}},_processMotion:function(hU,h6,hY){var h4=this._map;var hX=h4.temp;var T=(new Date()).getTime();var i=0.5*hU;if(this._opButton==="right"){i=0.15*hU}var h2=0;var h1=0;if(hY.y===0){h2=i}else{var hT=Math.abs(hY.x/hY.y);h1=Math.round(Math.sqrt(i*i/(1+hT*hT)));h2=Math.round(hT*h1)}var h0=dL(h4._heading);if(hY.x<0){h2=-h2}if(hY.y<0){h1=-h1}var hW=h6.x+h2;var hV=h6.y+h1;if(hX.dragAni){hX.dragAni.stop();hX.dragAni=null;h4.dispatchEvent(new bc("onmoveend"))}var h7=0;var h5=0;if(this._opButton==="right"){if(!this._changeHeadingStartPos){return}var hZ=this._mapHeight;var e=this._changeHeadingStartPos;var h3=this._initHeading;hX.dragAni=new p({duration:10000,render:function(h9){var h8=(new Date()).getTime()-T;var ia=Math.exp(-h8/250);h7=hW-h2*ia;if(Math.abs(h2*ia)<5&&Math.abs(h1*ia)<5){hX.dragAni.stop();return}if(e.y<hZ/2){h4.setHeading(h3+h7*0.3,{noAnimation:true})}else{h4.setHeading(h3-h7*0.3,{noAnimation:true})}},finish:function(){hX.dragAni=null;if(e.y<hZ/2){h4.setHeading(h3+h7*0.3,{noAnimation:true})}else{h4.setHeading(h3-h7*0.3,{noAnimation:true})}},onStop:function(){hX.dragAni=null;if(e.y<hZ/2){h4.setHeading(h3+h7*0.3,{noAnimation:true})}else{h4.setHeading(h3-h7*0.3,{noAnimation:true})}}});return}hX.dragAni=new p({duration:10000,render:function(ia,h9){var h8=(new Date()).getTime()-T;var ib=Math.exp(-h8/250);h7=hW-h2*ib;h5=hV-h1*ib;if(Math.abs(h2*ib)<5&&Math.abs(h1*ib)<5){hX.dragAni.stop();return}h4._setPlatformPosition(h7,h5,{initMapOffsetX:hX.pl,initMapOffsetY:hX.pt})},finish:function(){hX.dragAni=null;h4._setPlatformPosition(h7,h5,{initMapOffsetX:hX.pl,initMapOffsetY:hX.pt});h4.dispatchEvent(new bc("onmoveend"))},onStop:function(h8){hX.dragAni=null;h4._setPlatformPosition(h7,h5,{initMapOffsetX:hX.pl,initMapOffsetY:hX.pt});var h9=new bc("onmoveend");h9.userData=h8;h4.dispatchEvent(h9)}})}});bp.register(function(i){var e=i;if(i._keyboardInit===true){return}i._keyboardInit=true;D.on(document,"keydown",function(T){if(e.temp.stopArrow===true){e.temp.stopArrow=false}if(e.config.enableKeyboard&&e.temp.canKeyboard){var T=window.event||T;var hT=false;if(D.Platform.macintosh){if(T.metaKey===true){hT=true}}else{if(T.ctrlKey===true){hT=true}}switch(T.keyCode||T.which){case 189:case 109:case 173:if(!hT){e.temp.operating=true;e.dispatchEvent(new bc("onminuspress"))}break;case 61:case 187:case 107:if(!hT){e.temp.operating=true;e.dispatchEvent(new bc("onpluspress"))}break;case 33:e.temp.operating=false;e.temp.stopArrow=true;T.cancelBubble=true;T.returnValue=false;break;case 34:e.temp.operating=false;e.temp.stopArrow=true;T.cancelBubble=true;T.returnValue=false;break;case 35:e.temp.operating=false;e.temp.stopArrow=true;T.cancelBubble=true;T.returnValue=false;break;case 36:e.temp.operating=false;e.temp.stopArrow=true;T.cancelBubble=true;T.returnValue=false;break;case 37:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=1;e._arrow();T.cancelBubble=true;T.returnValue=false;break;case 38:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=2;e._arrow();T.cancelBubble=true;T.returnValue=false;break;case 39:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=4;e._arrow();T.cancelBubble=true;T.returnValue=false;break;case 40:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=8;e._arrow();T.cancelBubble=true;T.returnValue=false;break}}});D.on(document,"keyup",function(T){if(e.config.enableKeyboard){var T=window.event||T;switch(T.keyCode||T.which){case 37:e.temp.arrow=e.temp.arrow&~1;if(e.temp.arrow!==0){e._arrow()}break;case 38:e.temp.arrow=e.temp.arrow&~2;if(e.temp.arrow!==0){e._arrow()}break;case 39:e.temp.arrow=e.temp.arrow&~4;if(e.temp.arrow!==0){e._arrow()}break;case 40:e.temp.arrow=e.temp.arrow&~8;if(e.temp.arrow!==0){e._arrow()}break}}e.temp.operating=false});c9.prototype._arrow=function(){if(this.mapType===BMAP_EARTH_MAP){return}if(this._arrow.occurrent&&this._arrow._lastArrow===this.temp.arrow&&this.temp.stopArrow===true){return}var T=this;var hU=T.temp.arrow;T._arrow._lastArrow=hU;T._arrow.interval=30;T._arrow.duration=999;T._arrow.dx=T._arrow.dy=0;if(hU&1){T._arrow.dx=1}if(hU&2){T._arrow.dy=1}if(hU&4){T._arrow.dx=-1}if(hU&8){T._arrow.dy=-1}if(hU&1&&hU&4){T._arrow.dx=0}if(hU&2&&hU&8){T._arrow.dy=0}if(!T._arrow.occurrent){T._arrow.occurrent=true;T._arrow.time=new Date().getTime();T._arrow.beginTime=T._arrow.time;T.dispatchEvent(new bc("onmovestart"));var hT=new p({fps:T._arrow.interval,duration:T._arrow.duration,transition:co.linear,render:function(h1){var hW=T._arrow;var hZ=T.temp.arrow;if(T._arrow._lastArrow!==hZ){T._arrow._lastArrow=hZ;if(hZ&1){hW.dx=1}if(hZ&2){hW.dy=1}if(hZ&4){hW.dx=-1}if(hZ&8){hW.dy=-1}if(hZ&1&&hZ&4){hW.dx=0}if(hZ&2&&hZ&8){hW.dy=0}}if(T.temp.stopArrow===true){hW.dx=0;hW.dy=0}var h0=new Date().getTime();var hY=Math.pow((h0-hW.beginTime)/hW.duration,2);if(!T.temp.arrow){hW.occurrent=false;hT.terminative=true;T._arrow.time=new Date().getTime();setTimeout(function(){T.dispatchEvent(new bc("onmoveend"))},40)}var h2=(h0-hW.time);var hX=hW.dx*h2*hY>=0?Math.ceil(hW.dx*h2*hY):Math.floor(hW.dx*h2*hY);var hV=hW.dy*h2*hY>=0?Math.ceil(hW.dy*h2*hY):Math.floor(hW.dy*h2*hY);if(hX!==0&&hV!==0){hX=Math.round(hX*0.7);hV=Math.round(hV*0.7)}hW.time=h0;T._setPlatformPosition(hX,hV)},finish:function(){T._arrow.time=new Date().getTime();setTimeout(function(){T._arrowPan()},T._arrow.interval)}})}};c9.prototype._arrowPan=function(){var hV=this;var hT=hV._arrow;if(hV.temp.stopArrow){hT.dx=0;hT.dy=0}if(!hV.temp.arrow){hT.occurrent=false;hV.dispatchEvent(new bc("onmoveend"));return}var hW=new Date().getTime();var hX=(hW-hT.time);var hU=Math.ceil(hT.dx*hX);var T=Math.ceil(hT.dy*hX);hT.time=hW;hV._setPlatformPosition(hU,T);setTimeout(function(){hV._arrowPan()},hT.interval)}});');
﻿_jsload&&_jsload('scommon', 'var dQ=1,dR=2,ft=3,eF=new ea(21,33),bN=new ea(10,33),aY=new ea(22,36),gN=new ea(11,36),q=new ea(25,40),k=new ea(12,20),eX=new ea(9,0),gU=new ea(300,300);c4.addSearchPoi=function(i,hY,hW,hX){var hZ=ax(hY);if(!hZ){return}if(hW<0||hW>9){return}var hU=null;var hV=new aD(hZ);var e=e4.staticHost+"/wolfman/static/common/images/";e+="markers_new2x_2960fb4.png";if(a7()>1){function hT(){return new hd(e,eF,{imageSize:gU,anchor:bN,imageOffset:new ea(21*hW,0),infoWindowOffset:eX})}hU=hT();var T=hT();T.setImageOffset(new ea(21*hW,66));hV.icoDefault=hU;hV.icoActive=T}else{hU=new hd(e,eF,{imageSize:gU,anchor:bN,imageOffset:new ea(21*hW,0),infoWindowOffset:eX})}hV.setIcon(hU);i.addOverlay(hV);if(hX){hV.setTitle(hX)}return hV};c4.addCenterPoi=function(hU,e,hV){var hT=ax(e);if(!hT){return}var i=new aD(hT);var hW=null;if(f6()){function T(){return new hd(e4.imgPath+"markers_hd.png",new ea(21,31),{anchor:bN,imageOffset:new ea(-29,-320),imageSize:new ea(85,477),infoWindowAnchor:eX})}hW=T();i.icoDefault=hW}else{hW=new hd(e4.imgPath+"markers.png",eF,{anchor:bN,imageOffset:new ea(0,-250),infoWindowAnchor:eX})}i.setIcon(hW);hU.addOverlay(i);if(hV){i.setTitle(hV)}return i};c4.addSearchInBoundsPoi=function(i,hX,hW){var hY=ax(hX);if(!hY){return}var hV=new aD(hY);var hU=null;var e=e4.staticHost+"/wolfman/static/common/images/";e+="markers_new2x_2960fb4.png";if(a7()>1){function hT(){return new hd(e,aY,{imageSize:gU,anchor:gN,imageOffset:new ea(200,188),infoWindowOffset:eX})}hU=hT();var T=hT();T.setImageOffset(new ea(200,224));hV.icoDefault=hU;hV.icoActive=T}else{hU=new hd(e,aY,{imageSize:gU,anchor:gN,imageOffset:new ea(200,188),infoWindowOffset:eX})}hV.setIcon(hU);i.addOverlay(hV);if(hW){hV.setTitle(hW)}return hV};function ax(e){var T=[];var i=null;if(e instanceof hu||e instanceof c5){i=e}else{if(typeof e=="string"){T=D.trim(e).split(",");if(T.length<2){return}T[0]=parseFloat(D.trim(T[0]));T[1]=parseFloat(D.trim(T[1]))}else{T=e.slice(0);if(T.length<2){return}}i=new hu(T[0],T[1])}return i}c4.createSearchInfoWnd=function(T,e){var h2=T.title;var h0=T.addr;var hV=T.tel;var hY=T.uid||"";var i=T.url;var h1=T.detailUrl;var hZ=T.poiType||BMAP_POI_TYPE_NORMAL;e=e||{};if(!h2){return null}var hX=h2;if(hZ==BMAP_POI_TYPE_BUSSTOP){hX=hX+"-公交车站"}else{if(hZ==BMAP_POI_TYPE_SUBSTOP){hX=hX+"-地铁站"}}var hW=13;if(h1){hW=10}if(hX.replace(/[\\u0100-\\uffff]/g,"##").length>hW*2+1){hX=hX.substring(0,hW)+"&#8230"}var hU=\'<p style="margin-left:5px;display:inline;height:30px;line-height:30px;width:210px;font:bold 14px/16px \'+e4.fontFamily+\';white-space:nowrap;overflow:hidden" title="\'+h2+\'">\'+hX;if(h1){hU+=\'<a target="_blank" href="\'+h1+\'" style="margin-left:5px;font-size:12px;color:#3d6dcc;font-weight:normal;text-decoration:none;">详情»</a>\'}hU+="</p>";var h4=[];h4.push(\'<div style="font: 12px \'+e4.fontFamily+\'; margin: 5px">\');if(h0){var h3="地址：";if(hZ==BMAP_POI_TYPE_BUSSTOP||hZ==BMAP_POI_TYPE_SUBSTOP){h3="车次："}h4.push(\'<table cellspacing="0" style="overflow: hidden; table-layout: fixed; width: 100 %; font: 12px \'+e4.fontFamily+\'" >\');h4.push(\'<tr><td style="vertical-align: top; width: 38px; white-space: nowrap; word-break: keep-all">\'+h3+"&nbsp;</td><td>");h4.push(h0+"&nbsp;</td></tr>");if(hV){h4.push(\'<tr><td style="vertical-align: top; ">电话：</td><td>\'+hV+"</td></tr>")}h4.push("</table>")}else{if(hV){h4.push(\'<table cellspacing="0" style="table-layout: fixed; width: 100 %; font: 12px \'+e4.fontFamily+\'">\');h4.push(\'<tr><td style="vertical-align: top; width: 36px; white-space: nowrap; word-break: keep-all">电话：</td><td>\'+hV+"</td></tr></table>")}}h4.push("</div>");var hT=new ao(h4.join(""),{title:hU,height:0,width:250,margin:[10,10,20,10]});return hT};c4.addDestPoi=function(hW,e,hX,T){var hT=e4.staticHost+"/wolfman/static/common/images/";hT+="markers_new2x_2960fb4.png";var hV=ax(e);if(!hV){return}var hU=new hd(hT,q,{imageSize:gU,anchor:k,imageOffset:new ea(200+T*25,139),infoWindowOffset:eX});var i=new aD(hV,{icon:hU,baseZIndex:3500000,draggingCursor:"pointer"});hW.addOverlay(i);if(hX){i.setTitle(hX)}return i};c4.addLine=function(i,e){return c4.addRoute(i,e,fX)};c4.ROUTE_TRAFFIC_STYLE_CONFIG=[{stroke:6,color:"#0030ff",opacity:0.45,style:"solid"},{stroke:5,color:"#00bd00",opacity:0.95,style:"solid"},{stroke:5,color:"#ffac00",opacity:0.95,style:"solid"},{stroke:5,color:"#f41c0d",opacity:0.95,style:"solid"}];c4.ROUTE_STYLE_CONFIG=[{stroke:6,color:"#5298fe",opacity:1,style:"solid"},{stroke:6,color:"#5298fe",opacity:1,style:"solid"},{stroke:6,color:"#4ddc26",opacity:1,style:"solid"},{stroke:6,color:"#00bd01",opacity:1,style:"solid"},{stroke:6,color:"#ff0103",opacity:0.65,style:"dashed"},{stroke:6,color:"#ff0103",opacity:0.65,style:"solid"},{stroke:6,color:"#5298ff",opacity:1,style:"solid"},{stroke:6,color:"#5298ff",opacity:1,style:"solid"},{stroke:6,color:"#ff0103",opacity:0.65,style:"dashed"}];c4.addRouteWithTraffic=function(hV,hT,hW){var T=c4.ROUTE_TRAFFIC_STYLE_CONFIG;if(typeof hW=="undefined"){hW=0}if(!T[hW]){return}var e=hT;var i=T[hW];var hU=new al(e,{strokeWeight:i.stroke,strokeColor:i.color,strokeOpacity:i.opacity,strokeStyle:i.style,clickable:false});hV.addOverlay(hU);hU._trafficStatus=hW;return hU};c4.addRoute=function(hX,hU,hT){var T=c4.ROUTE_STYLE_CONFIG;if(typeof hT=="undefined"){hT=0}if(!T[hT]){return}var e=hU;var i=T[hT];var hW=new al(e,{strokeWeight:i.stroke,strokeColor:i.color,strokeOpacity:i.opacity,strokeStyle:i.style,clickable:false});hX.addOverlay(hW);hW._routeType=hT;if(hT==fX){var hV=new al(e,{strokeWeight:i.stroke-2,strokeColor:"#fff",strokeOpacity:0.3,clickable:false});hW._p=hV;hX.addOverlay(hV)}return hW};c4.createTransInfoWnd=function(i){var hV=i.content;var e=i.curIndex;var hW=i.total;var hT=i.nextTransCbk;var hU=i.obj;var hX=i.hideStep;var hY=[\'<div style="font: 12px \'+e4.fontFamily+\'">\'];if(hV){hY.push(\'<div style="margin: 10px 1em 24px 0">\'+hV+"</div>")}if(!hX){hY.push(c4.genStepNavHtml(hW,e))}hY.push("</div>");var T=new ao(hY.join(""),{title:"",height:0,width:220,margin:[10,10,20,10]});if(hX){return T}T.addEventListener("open",function(){var hZ=f6()?"touchend":"click";if(D.G("trans_prev")){D.on(D.G("trans_prev"),hZ,function(){if(hT&&typeof hT=="function"){hT(e-1,hU)}})}if(D.G("trans_next")){D.on(D.G("trans_next"),hZ,function(){if(hT&&typeof hT=="function"){hT(e+1,hU)}})}});return T};c4.genStepNavHtml=function(T,e){var i=[];i.push(\'<table id="trans_nav" width="99% " cols="2" style="background: #eaf2ff; font: 12px \'+e4.fontFamily+\'"><tbody><tr>\');i.push(\'<td nowrap="nowrap" width="50% " align="left">\');if(e==0){i.push(\'<span unselectable="on" style="color: #9c9d99; -moz-user-select: none: >上一步</span>\')}else{i.push(\'<a id="trans_prev" style="color: #7777cc; -moz-user-select: none" href="javascript: void (0)">上一步</a>\')}i.push("</td>");i.push(\'<td nowrap="nowrap" width="50% " align="right">\');if(e==T+1){i.push(\'<span unselectable="on" style="color: #9c9d99; -moz-user-select: none" >下一步</span>\')}else{i.push(\'<a style="color: #7777cc" id="trans_next" href="javascript: void (0)">下一步</a>\')}i.push("</td></tr></tbody></table>");return i.join("")};c4.addTransPoi=function(i,hX,hV,hW){var hY=ax(hX);if(!hY){return}hV=hV||BMAP_LINE_TYPE_BUS;var e=e4.staticHost+"/wolfman/static/common/images/new/";e+="transit-exchange-2x_46d5be3.png";var T=54;switch(hV){case BMAP_LINE_TYPE_SUBWAY:T=75;break;case BMAP_LINE_TYPE_TRAIN:T=117;break;case BMAP_LINE_TYPE_AIRPLANE:T=138;break;case BMAP_LINE_TYPE_COACH:case BMAP_LINE_TYPE_BUS:default:T=54;break}var hU=new hd(e,new ea(22,22),{imageSize:new ea(22,181),infoWindowAnchor:new ea(10,0),imageOffset:new ea(0,T)});var hT=new aD(hY,{icon:hU});i.addOverlay(hT);if(hW){hT.setTitle(hW)}return hT};c4.getInfoWindowDom=function(e){if(e&&e.infoWindowDoms&&e.infoWindowDoms.contentDiv){return e.infoWindowDoms.contentDiv.childNodes[0]}return null};c4.addStationPoi=function(T,e,hT){var i=new aD(e,{icon:new hd(d4._stopUrl,new ea(11,11))});if(hT){i.setTitle(hT)}T.addOverlay(i);return i};c4.createTipLbl=function(i){var e=new aO(i,{offset:new ea(30,-10)});e.setStyle({border:"solid 1px gray",padding:"2px",whiteSpace:"nowrap",background:"#fff"});return e};c4.getDistanceByPixel=function(i,e){if(!i||!e){return}return Math.round(Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)))};c4.addSearchPoi_R=function(hZ,hX,h0,e,i){var h2=ax(hZ),e=e||{};e.type=e.type||"normal";if(!h2||typeof(hX)=="undefined"||hX<0||(hX>9&&e.type!=="child")||(hX>39&&e.type==="child")){return}var h1;var hY=e4.staticHost+"/wolfman/static/common/images/";hY+="markers_new2x_2960fb4.png";var hT=0;if(e.type=="RouteAddrMarker"){hT=273}var T=new ea(18*hX,hT);var hW=new hd(hY,new ea(18,27),{offset:new ea(9,27),imageOffset:T,infoWindowOffset:eX,imageSize:gU,});h1=hX+1;var hU=100;var hV=new aD(h2,{icon:hW,zIndexFixed:true,baseZIndex:2500000-hU*hX});hV.customProperty={type:e.type};i.addOverlay(hV);hV._stCode=h1;if(h0){hV.setTitle(h0)}return hV};fB.CBK_SEARCH_COMPLETE=1;fB.CBK_MARKERS_SET=2;fB.CBK_INFO_HTML_SET=3;fB.CBK_POLYLINES_SET=4;fB.CBK_RESULTS_HTML_SET=5;fB.CBK_BUSLIST_COMPLETE=6;fB.CBK_BUSLINE_COMPLETE=7;fB.CBK_BUSLISTHTML_SET=8;fB.CBK_BUSLINEHTML_SET=9;fB._getPoiUrl=function(e,i){if(e){return e4.mapHost+"?s="+encodeURIComponent("inf&uid="+e+"&c="+i)+"&i=0&sr=1"}return""};fB._getLocType=function(e){if(!e){return gz}if(typeof e=="string"){return cn}if(e instanceof hu||e instanceof c5){return he}if(e instanceof c9){return gY}if(typeof e=="number"){return b9}return gz};D.extend(fB.prototype,{_getIdByLoc:function(hU,e){var i=fB._getLocType(hU.src);if(i==gz){return}var T=this;if(i==b9){e&&e(hU.src);return}if(i==cn){if(hU.curLocType==i&&hU.curSrc==hU.src&&hU.curId){e&&e(hU.curId);return}hU.curLocType=i;hU.curSrc=hU.src;cC.request(function(hW){if(hW&&hW.result&&hW.result["type"]==gq){T._loc.curId=hW.content["code"];e&&e(T._loc.curId)}},{qt:eG,wd:hU.src})}else{var hT;var hV=18;if(i==gY){if(hU.src.isLoaded()){hT=hU.src.getCenter();hV=hU.src.getZoom()}else{hU.src.addEventListener("load",function(){T._getIdByLoc(hU,e)})}}else{hT=hU.src}if(i==hU.curLocType&&hU.curSrc.equals(hT)&&hU.curId){e&&e(hU.curId);return}if(i==gY){hT=eo.convertLL2MC(hT)}if(i==he){hT=eo.convertLL2MC(hT)}hU.curLocType=i;hU.curSrc=new hu(hT.lng,hT.lat);cC.request(function(hW){if(hW&&hW.result&&hW.result["type"]==fO){T._loc.curId=hW.content?hW.content["uid"]:1;e&&e(T._loc.curId)}},{qt:b3,b:hT.lng+","+hT.lat+";"+hT.lng+","+hT.lat,l:hV})}},_setStatus:function(e){if(typeof e=="number"){this._status=e}else{delete this._status}},_triggerCbk:function(i,e,hT){var T;if(typeof e==="undefined"){T=4}else{if(e._plans&&e._plans.length){T=1}else{if(Object.prototype.toString.call(e._start)==="[object Object]"&&Object.prototype.toString.call(e._end)==="[object Object]"){T=3}else{T=2}}}var hU;switch(i){case fB.CBK_SEARCH_COMPLETE:hU=this._opts.onSearchComplete;hU&&hU(e,T);break;case fB.CBK_MARKERS_SET:hU=this._opts.onMarkersSet;hU&&hU(e,hT);break;case fB.CBK_POLYLINES_SET:hU=this._opts.onPolylinesSet;hU&&hU(e,hT);break;case fB.CBK_INFO_HTML_SET:hU=this._opts.onInfoHtmlSet;hU&&hU(e,hT);break;case fB.CBK_RESULTS_HTML_SET:hU=this._opts.onResultsHtmlSet;hU&&hU(e,hT);break;case fB.CBK_BUSLIST_COMPLETE:hU=this._opts.onGetBusListComplete;hU&&hU(e,hT);break;case fB.CBK_BUSLINE_COMPLETE:hU=this._opts.onGetBusLineComplete;hU&&hU(e,hT);break;case fB.CBK_BUSLISTHTML_SET:hU=this._opts.onBusListHtmlSet;hU&&hU(e,hT);break;case fB.CBK_BUSLINEHTML_SET:hU=this._opts.onBusLineHtmlSet;hU&&hU(e,hT);break;default:break}}});var fw=0;var cI=1;var ha=2;P.unique=function(T){var hV=false;var hU=[];var hW={};for(var hT=0,e=T.length;hT<e;hT++){if(!hW[T[hT]]){hW[T[hT]]=true;hU.push(T[hT])}}return hU};P.getBestLevel=function(T,i){if(i){var e=Math.min(i.width/1100,i.height/660);T=Math.round(T+(Math.log(e)/Math.log(2)))}if(T<1){T=1}if(T>21){T=21}return T};P.parseGeo=function(hW,hZ){if(typeof hW!="string"||!hW){return}var h1=hW.split("|");var e;var hU;var T;if(h1.length==1){e=gb(hW)}else{e=gb(h1[2]);hU=gb(h1[0]);T=gb(h1[1]);if(!hZ){return e}}var hX={type:e.geoType};if(hZ){switch(hX.type){case ha:var hY=new hu(e.geo[0][0],e.geo[0][1]);var h0=eo.convertMC2LL(hY);hX.point=h0;hX.points=[h0];break;case cI:hX.points=[];var h2=e.geo[0];for(var hV=0,hT=h2.length-1;hV<hT;hV+=2){var h3=new hu(h2[hV],h2[hV+1]);h3=eo.convertMC2LL(h3);hX.points.push(h3)}hU=new hu(hU.geo[0][0],hU.geo[0][1]);T=new hu(T.geo[0][0],T.geo[0][1]);hU=eo.convertMC2LL(hU);T=eo.convertMC2LL(T);hX.bounds=new dT(hU,T);break;default:break}}return hX};P.parseGeoExt=function(ic,h3){if(!h3){h3=0}else{if(h3<0.25){h3=0}else{if(h3>0.25&&h3<1){h3=1}else{if(h3>32){h3=32}}}}var hY=ic.split("|");if(hY.length==1){var hT=gb(hY[0]);return{type:hT.type,bound:"",points:hT.geo.join(",")}}else{if(hY.length>1){var h4=ic.split(";.=");var h0=[];var hU=[];var h5=0;var h9=h4.length;for(var h6=0;h6<h9;h6++){var ib=h4[h6];if(h9>1){if(h6==0){ib=ib+";"}if(h6>0&&h6<h9-1){ib=".="+ib+";"}if(h6==h9-1){ib=".="+ib}}var hV=ib.split("|");var h8=gb(hV[0]);var h7=gb(hV[1]);h0.push(h8.geo.join(","));h0.push(h7.geo.join(","));var hT=gb(hV[2]);h5=hT.type;var ia=hT.geo.join(",");ia=P.parseGeoExtReg1(ia);if(h3>0){ia=P.parseGeoExtReg2(ia,h3)}hU.push(ia)}if(h9<=1){hU=hU.join(";")}if(h9==2){var T=hU[0]+";"+hU[1];var hW=T.split(";");var e=[];for(var h6=0;h6<hW.length;h6++){var hZ=hW[h6].split(",")[0];var hX=hW[h6].split(",")[1];var h1=new hu(hZ,hX);var h2=eo.convertMC2LL(h1);e.push(h2)}hU=e}return{type:h5,bound:h0.join(";"),points:hU}}}};P.getPoiPoint=function(e){var T=[];var i=null;if(e.toString()=="Point"){i=e}else{if(typeof e=="string"){T=D.trim(e).split(",");if(T.length<2){return}T[0]=parseFloat(D.trim(T[0]));T[1]=parseFloat(D.trim(T[1]))}else{T=e.slice(0);if(T.length<2){return}}i=new BMap.Point(T[0],T[1])}return i};P.parseGeoStr=function(T){var i=T.split(",");var e=new hu(i[0],i[1]);return eo.convertMC2LL(e)};P.level={country:4,province:11,city:12,area:13};var hL=["=",".","-","*"];var f5=1<<23;function gb(hZ){var hY=ba(hZ.charAt(0));var T=hZ.substr(1);var h1=0;var e=T.length;var h2=[];var hW=[];var hX=[];while(h1<e){if(T.charAt(h1)==hL[0]){if((e-h1)<13){return 0}hX=aM(T.substr(h1,13),h2);if(hX<0){return 0}h1+=13}else{if(T.charAt(h1)==";"){hW.push(h2.slice(0));h2.length=0;++h1}else{if((e-h1)<8){return 0}hX=c7(T.substr(h1,8),h2);if(hX<0){return 0}h1+=8}}}for(var hV=0,hT=hW.length;hV<hT;hV++){for(var hU=0,h0=hW[hV].length;hU<h0;hU++){hW[hV][hU]/=100}}return{geoType:hY,geo:hW}}function ba(i){var e=-1;if(i==hL[1]){e=ha}else{if(i==hL[2]){e=cI}else{if(i==hL[3]){e=fw}}}return e}function aM(hU,T){var e=0;var hW=0;var hV=0;for(var hT=0;hT<6;hT++){hV=cP(hU.substr(1+hT,1));if(hV<0){return -1-hT}e+=hV<<(6*hT);hV=cP(hU.substr(7+hT,1));if(hV<0){return -7-hT}hW+=hV<<(6*hT)}T.push(e);T.push(hW);return 0}function c7(hV,hT){var T=hT.length;if(T<2){return -1}var e=0;var hX=0;var hW=0;for(var hU=0;hU<4;hU++){hW=cP(hV.substr(hU,1));if(hW<0){return -1-hU}e+=hW<<(6*hU);hW=cP(hV.substr(4+hU,1));if(hW<0){return -5-hU}hX+=hW<<(6*hU)}if(e>f5){e=f5-e}if(hX>f5){hX=f5-hX}hT.push(hT[T-2]+e);hT.push(hT[T-1]+hX);return 0}function cP(i){var e=i.charCodeAt(0);if(i>="A"&&i<="Z"){return e-"A".charCodeAt(0)}else{if(i>="a"&&i<="z"){return(26+e-"a".charCodeAt(0))}else{if(i>="0"&&i<="9"){return(52+e-"0".charCodeAt(0))}else{if(i=="+"){return 62}else{if(i=="/"){return 63}}}}}return -1}P.pathToPoints=function(hV){var hT=[];if(typeof hV!=="string"){return hT}else{var hU=hV.split(";");for(var T=0;T<hU.length;T++){var e=hU[T].split(",");hT.push(new hu(e[0],e[1]))}}return hT};');
﻿_jsload&&_jsload('control', 'D.extend(dI.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map)}},initialize:function(e){a8.prototype.initialize.call(this,e);this._render();this._updateState();this._bind(e);return this._container},_bind:function(i){var e=this;i.addEventListener("load",function(T){e._updateState()});i.addEventListener("moveend",function(T){e._updateState()});i.addEventListener("zoomend",function(T){e._updateState()})},_render:function(){a8.prototype._render.call(this);D.ac(this._container,"BMap_cpyCtrl");var e=this._container.style;e.cursor="default";e.whiteSpace="nowrap";e.MozUserSelect="none";e.WebkitTextSizeAdjust="none";a8.prototype._setPosition.call(this);if(this.sateMapStyle){this.addSateMapStyle()}},_updateState:function(){if(!this._map||!this._container||this._copyrightCollection.length===0){return}for(var hT=0,e=this._copyrightCollection.length;hT<e;hT++){var hV;var hX=this._map.getZoom();if(this._copyrightCollection[hT].mapType!==""&&this._map.mapType!==this._copyrightCollection[hT].mapType){hV=false}else{if(hX<this._copyrightCollection[hT].minZoom){hV=false}else{hV=true}}if(hV){if(this._container){var hU=false;for(var T=0,hW=this._container.children.length;T<hW;T++){if(parseInt(this._container.children[T].getAttribute("_cid"),10)===this._copyrightCollection[hT].id){hU=true;this._container.children[T].style.display="block";if(this._container.children[T].innerHTML!==this._copyrightCollection[hT].content){this._container.children[T].innerHTML=this._copyrightCollection[hT].content}break}}if(!hU){this._generateHTML(this._copyrightCollection[hT])}}}else{if(this._container){for(var T=0;T<this._container.children.length;T++){if(parseInt(this._container.children[T].getAttribute("_cid"),10)===this._copyrightCollection[hT].id&&this._container.children[T].style.display!=="none"){this._container.children[T].style.display="none";return}}}}}},addCopyright:function(hT){if(!hT||typeof hT.id!=="number"||isNaN(hT.id)){return}var e={minZoom:0,bounds:null,content:"",mapType:""};for(var T in hT){e[T]=hT[T]}if(this._map){var hW=e.minZoom;if(hW===-1||hW<this._map.getMinZoom()||hW>this._map.getMaxZoom()){e.minZoom=this._map.getMinZoom()}if(e.mapType!==""&&!b7[e.mapType]){e.mapType=BMAPGL_NORMAL_MAP}}var hU=this.getCopyright(hT.id);if(hU){for(var hV in e){hU[hV]=e[hV]}}else{this._copyrightCollection.push(e)}this._updateState()},getCopyright:function(hT){for(var T=0,e=this._copyrightCollection.length;T<e;T++){if(this._copyrightCollection[T].id===hT){return this._copyrightCollection[T]}}},getCopyrightCollection:function(){return this._copyrightCollection},removeCopyright:function(hV){var hT;for(var T=0,e=this._copyrightCollection.length;T<e;T++){if(this._copyrightCollection[T].id===hV){hT=this._copyrightCollection.splice(T,1);T--;e=this._copyrightCollection.length}}var hU=this.getDom(hV);if(hU&&hU.parentNode){hU.parentNode.removeChild(hU);hU=null}this._updateState();return hT},_generateHTML:function(e){if(!this._container){return}this._container.innerHTML+=\'<span _cid="\'+e.id+\'">\'+e.content+"</span>"},getDom:function(hU){var hT=a8.prototype.getDom.call(this);if(typeof hU==="undefined"){return hT}else{if(hT){for(var T=0,e=hT.children.length;T<e;T++){if(parseInt(hT.children[T].getAttribute("_cid"),10)===hU){return hT.children[T]}}}}}});function fp(){}D.extend(du.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map);this.dispatchEvent(new bc("ondomready"))}},initialize:function(e){a8.prototype.initialize.call(this,e);this._firstAnimation=true;this._setParam();this._render();this._bind();this._setSliderZoomLv(e.getZoom());this._bindMapEvent(e);var i=this._opts.offset||(new ea(1,0));this.setOffset(i);this.redraw();return this._container},_bindMapEvent:function(i){var e=this;i.addEventListener("zoomend",function(T){if(!e._map){return}e._setSliderZoomLv(e._map.getZoom());if(e._msover){return}if(e._isShowLevelHint){if(e.getType()===BMAP_NAVIGATION_CONTROL_ANIM){e._hideTimerId=setTimeout(function(){e._hideLevelHint(true);e._shrinkSlider()},1000)}else{e._hideTimerId=setTimeout(function(){e._hideLevelHint(true)},1000)}}});i.addEventListener("mousewheel",function(){if(!e._map){return}if(e._map.config.enableWheelZoom&&e._isShowLevelHint){if(e._hideTimerId){clearTimeout(e._hideTimerId);e._hideTimerId=null}if(e.getType()!==BMAP_NAVIGATION_CONTROL_ANIM){e._showLevelHint()}}});i.addEventListener("load",function(T){if(!e._map){return}e._setSliderZoomLv(e._map.getZoom())})},redraw:function(){this._setParam();this.setType(this._opts.type);if(this._map){this._setSliderZoomLv(this._map.getZoom())}},_setParam:function(){this._minZoomLevel=this._map.config.zoomLevelMin;this._maxZoomLevel=this._map.config.zoomLevelMax;if(this._minZoomLevel>4||this._maxZoomLevel<18){this._isShowLevelHint=false}else{this._isShowLevelHint=true}this._totalZoomLv=this._maxZoomLevel-this._minZoomLevel+1;this._maxBarY=this._minBarY+(this._totalZoomLv-1)*this._sliderInterval},_render:function(){a8.prototype._render.call(this);var T=D.Browser.ie==6?" BMap_ie6":"";var i=" BMap_stdMpType"+this._opts.type;var hT=this._container;D.ac(hT,"BMap_stdMpCtrl");D.ac(hT,T);D.ac(hT,i);hT.innerHTML=this._generateHtml(this._opts.type);this._setSliderBarCursor(D.Browser.opera?"pointer":e4.defaultCursor);this._panBtnContainer=D.G(hT.children[0]);this._zoomDom=D.G(hT.children[1]);var e=this._zoomDom;this._btnZoomIn=D.G(e.children[0]);this._btnZoomOut=D.G(e.children[1]);this._sliderDom=D.G(e.children[2]);this._sliderBaseDom=D.G(e.children[2].children[0]);this._sliderBotDom=D.G(e.children[2].children[1]);this.setType(this._opts.type)},_setSliderHeight:function(){var i=this._opts.type;var hT=this.controlHeight[i].width;var hU=this.controlHeight[i].height;var hV=this.controlHeight[i].zoomHeight;var e=this.controlHeight[i].zoomWidth;var hW=this.controlHeight[i].sliderHeight;if(this._opts.type==BMAP_NAVIGATION_CONTROL_LARGE||this._opts.type==BMAP_NAVIGATION_CONTROL_ANIM){}this._container.style.width=hT+"px";this._container.style.height=hU+"px";this._zoomDom.style.height=hV+"px";this._zoomDom.style.width=hT+"px";if(this.getType()==BMAP_NAVIGATION_CONTROL_ANIM){this._btnZoomOut.style.top=24+"px"}else{var T=(this._opts.forceNew===true)?29:23;this._btnZoomOut.style.top=hV-T+"px"}this._sliderDom.style.height=hW+"px";this._sliderBaseDom.style.height=hW+"px";if(this._opts.type==BMAP_NAVIGATION_CONTROL_ZOOM){this._zoomDom.children[0].style.left=this._zoomDom.children[1].style.left="0"}else{this._zoomDom.children[0].style.left=this._zoomDom.children[1].style.left=""}},_generateHtml:function(){var e=[];e.push(this._generatePanHtml());e.push(this._generateZoomContainerHtml());return e.join("")},_generatePanHtml:function(){var e=\'<div class="BMap_stdMpPan"><div class="BMap_button BMap_panN" title="向上平移"></div><div class="BMap_button BMap_panW" title="向左平移"></div><div class="BMap_button BMap_panE" title="向右平移"></div><div class="BMap_button BMap_panS" title="向下平移"></div><div class="BMap_stdMpPanBg BMap_smcbg"></div></div>\';return e},_generateZoomContainerHtml:function(){var e=\'<div class="BMap_stdMpZoom">\'+this._generateZoomHtml()+this._generateSliderHtml()+this._generateZoomBalloonHtml()+"</div>";return e},_generateZoomHtml:function(){var e="BMap_button";(this._opts.forceNew===true)&&(e="BMap_button_new");var i=\'<div class="\'+e+\' BMap_stdMpZoomIn" title="放大一级"><div class="BMap_smcbg in"></div></div><div class="\'+e+\' BMap_stdMpZoomOut" title="缩小一级"><div class="BMap_smcbg out"></div></div>\';return i},_generateSliderHtml:function(){var e=\'<div class="BMap_stdMpSlider"><div class="BMap_stdMpSliderBgTop"><div class="BMap_smcbg"></div></div><div class="BMap_stdMpSliderBgBot"><div class="BMap_smcbg"></div></div><div class="BMap_stdMpSliderMask" title="放置到此级别"></div><div class="BMap_stdMpSliderBar" title="拖动缩放"><div class="BMap_smcbg"></div></div></div>\';return e},_generateZoomBalloonHtml:function(){var e=\'<div class="BMap_zlHolder"><div class="BMap_zlSt"><div class="BMap_smcbg"></div></div><div class="BMap_zlCity"><div class="BMap_smcbg"></div></div><div class="BMap_zlProv"><div class="BMap_smcbg"></div></div><div class="BMap_zlCountry"><div class="BMap_smcbg"></div></div></div>\';return e},setType:function(e){if(typeof e=="number"&&e>=BMAP_NAVIGATION_CONTROL_LARGE&&e<=BMAP_NAVIGATION_CONTROL_ANIM){this._opts.type=e}else{this._opts.type=BMAP_NAVIGATION_CONTROL_LARGE}if(!this._map||!this._container){return}var i=this._container;i.className=i.className.replace(/BMap_stdMpType\\d/,"BMap_stdMpType"+this._opts.type);this._setSliderHeight();if(e!=BMAP_NAVIGATION_CONTROL_LARGE&&e!=BMAP_NAVIGATION_CONTROL_ANIM){D.rc(i.children[1].children[2],"hvr")}this.setAnchor(this._opts.anchor)},getType:function(){return this._opts.type},_bind:function(){var h3=this;var h2=h3._container;var hV=this._opts.from=="MAP_INDEX";function hU(i,h5){return i.contains?i!=h5&&i.contains(h5):!!(i.compareDocumentPosition(h5)&16)}function hY(h7,h6){var h5,i=h7.type.toLowerCase();if(i=="mouseover"){h5=h7.relatedTarget||h7.fromElement}else{if(i==="mouseout"){h5=h7.relatedTarget||h7.toElement}else{return true}}return h5&&h5.prefix!="xul"&&!hU(h6,h5)&&h5!==h6}D.on(h2,"mouseover",function(i){i=i||window.event;if(hY(i,h2)){h3.dispatchEvent(new bc("onmouseover"))}});D.on(h2,"mouseout",function(i){i=i||window.event;if(hY(i,h2)){h3.dispatchEvent(new bc("onmouseout"))}});function hT(){if(!h3._isShowLevelHint){return}h3._msover=true;if(h3._hideTimerId){clearTimeout(h3._hideTimerId);h3._hideTimerId=null}h3._expandSlider();if(h3.getType()!==BMAP_NAVIGATION_CONTROL_ANIM){h3._showLevelHint()}}function hX(){if(!h3._isShowLevelHint){return}if(h3._hideTimerId){clearTimeout(h3._hideTimerId)}h3._msover=false;h3._hideTimerId=setTimeout(function(){h3._hideLevelHint();h3._hideTimerId=null;h3._shrinkSlider()},1000)}if("onmouseenter" in document.documentElement){D.on(this._zoomDom,"mouseenter",function(i){hT()});D.on(this._zoomDom,"mouseleave",function(h5){var i=h5.relatedTarget;if(i&&(i===this||hU(this,i))){return}hX()})}else{D.on(this._zoomDom,"mouseover",function(h5){var i=h5.relatedTarget;if(i&&(i===this||hU(this,i))){return}hT()});D.on(this._zoomDom,"mouseout",function(h5){var i=h5.relatedTarget;if(i&&(i===this||hU(this,i))){return}hX()})}D.on(h2.children[0],"mouseover",function(){h3._hideLevelHint(true)});D.on(h2.children[0].children[0],"click",function(){h3._panBy(0,Math.round(h3._map.height/3));hV?fp(6004):null});D.on(h2.children[0].children[1],"click",function(){h3._panBy(Math.round(h3._map.width/3),0);hV?fp(6004):null});D.on(h2.children[0].children[2],"click",function(){h3._panBy(-Math.round(h3._map.width/3),0);hV?fp(6004):null});D.on(h2.children[0].children[3],"click",function(){h3._panBy(0,-Math.round(h3._map.height/3));hV?fp(6004):null});D.on(h2.children[0].children[0],"mouseover",function(){h3._panBtnContainer.style.backgroundPosition="0 -44px"});D.on(h2.children[0].children[1],"mouseover",function(){h3._panBtnContainer.style.backgroundPosition="0 -176px"});D.on(h2.children[0].children[2],"mouseover",function(){h3._panBtnContainer.style.backgroundPosition="0 -88px"});D.on(h2.children[0].children[3],"mouseover",function(){h3._panBtnContainer.style.backgroundPosition="0 -132px"});D.on(h3._panBtnContainer,"mouseout",function(){h3._panBtnContainer.style.backgroundPosition="0 0"});var h1=h2.children[1].children;D.on(h1[0],"click",function(){var i=h3._map;if(i.mapType===BMAP_EARTH_MAP){if(i._earth){if(i._earth.getLock()){return}i._earth.zoomIn({from:"control"});i._earth.fire(new bc("onzoominclick"))}}else{hV?fp(6005):null;if(i.config.isModernBrowser){h3._deepZoomIn()}else{h3._zoomIn()}i.fire(new bc("onzoominclick"))}});D.on(h1[1],"click",function(){var i=h3._map;if(i.mapType===BMAP_EARTH_MAP){if(i._earth){if(i._earth.getLock()){return}i._earth.zoomOut({from:"control"});i._earth.fire(new bc("onzoomoutclick"))}}else{hV?fp(6005):null;if(i.config.isModernBrowser){h3._deepZoomOut()}else{h3._zoomOut()}i.fire(new bc("onzoomoutclick"))}});for(var hW=1;hW<6;hW++){D.on(h2.children[0].children[hW],"mouseup",function(i){if(h3._map.currentOperation!==dV.dragging&&h3._map.currentOperation!==dV.stdMapCtrlDrag){h(i)}});D.on(h2.children[0].children[hW],"contextmenu",function(i){bV(i)});D.on(h2.children[0].children[hW],"click",function(i){bV(i)})}D.on(h1[0],"mouseup",function(i){if(h3._map.currentOperation!==dV.dragging&&h3._map.currentOperation!==dV.stdMapCtrlDrag){h(i)}});D.on(h1[1],"mouseup",function(i){if(h3._map.currentOperation!==dV.dragging&&h3._map.currentOperation!==dV.stdMapCtrlDrag){h(i)}});D.on(h1[0],"contextmenu",function(i){bV(i)});D.on(h1[1],"contextmenu",function(i){bV(i)});var h4=h2.children[1].children[2].children[2];D.on(h4,"mouseup",function(i){if(h3._map.currentOperation!==dV.dragging&&h3._map.currentOperation!==dV.stdMapCtrlDrag){h(i)}});D.on(h1[0],"click",function(i){h(i)});D.on(h1[1],"click",function(i){h(i)});D.on(h4,"click",function(i){h(i)});var h0=h2.children[1].children[2].children[3];D.on(h0,"mouseup",function(i){if(i.button==2){h(i)}});D.on(h0,"contextmenu",function(i){bV(i)});D.on(this._zoomDom.children[3].children[0],"click",function(i){h3._map.zoomTo(18)});D.on(this._zoomDom.children[3].children[1],"click",function(i){h3._map.zoomTo(12)});D.on(this._zoomDom.children[3].children[2],"click",function(i){h3._map.zoomTo(8)});D.on(this._zoomDom.children[3].children[3],"click",function(i){h3._map.zoomTo(4)});D.on(h4,"mousedown",function(h5){h5=window.event||h5;var i=h5.offsetY||h5.layerY||0;var h6=0;h6=(h3._maxZoomLevel+1)-Math.round(h3._totalZoomLv*parseFloat(i/(h3._totalZoomLv*h3._sliderInterval)));h3._map.zoomTo(h6);hV?fp(6006):null});D.on(h0,"mouseover",function(){D.ac(h0,"h")});D.on(h0,"mouseout",function(){if(h3._map.currentOperation!==dV.stdMapCtrlDrag){D.rc(h0,"h")}});var hZ=function(i){var i=window.event||i;if(i.button==2){return}if((D.Browser.ie&&i.button!=1)){return}if(h0.setCapture){h0.setCapture()}h3._map.currentOperation=dV.stdMapCtrlDrag;h3._bind.my=i.pageY||i.clientY||0;if(!D.Browser.opera){h3._setSliderBarCursor(e4.draggingCursor)}D.on(document,"mousemove",e);D.on(document,"mouseup",T);h(i);return bV(i)};var e=function(h5){if(h3._map.currentOperation===dV.stdMapCtrlDrag){var h5=window.event||h5;var h6=h5.pageY||h5.clientY;var i=h3._curBarY-h6+h3._bind.my;if(i<h3._minBarY){i=h3._minBarY}else{if(i>h3._maxBarY){i=h3._maxBarY}}h0.style.top=(h3._sliderHeight-i-15)+"px";h3._sliderBotDom.style.height=i+"px"}};var T=function(h5){if(h3._map.currentOperation===dV.stdMapCtrlDrag){var i=D.G(h0);h3._curBarY=parseInt(i.style.top);D.rc(h0,"h");h3._map.currentOperation=dV.idle;if(h2&&h0&&h0.releaseCapture){h0.releaseCapture()}if(!D.Browser.opera){h3._setSliderBarCursor(e4.defaultCursor)}var h6=(h3._maxZoomLevel+1)-Math.round(parseFloat(h3._curBarY-h3._minBarY)/parseFloat(h3._maxBarY-h3._minBarY)*(h3._totalZoomLv-1)+1);h3._map.zoomTo(h6);hV?fp(6006):null;D.un(document,"mousemove",e);D.un(document,"mouseup",T)}};D.on(h0,"mousedown",hZ)},_setSliderBarCursor:function(e){this._container.children[1].children[2].children[3].style.cursor=e},_panBy:function(i,e){this._map.panBy(i,e)},_zoomIn:function(){this._map.zoomIn()},_zoomOut:function(){this._map.zoomOut()},_deepZoomOut:function(){this._map.deepZoomMedia(-1)},_deepZoomIn:function(){this._map.deepZoomMedia(1)},_setSliderZoomLv:function(i){if(!this._container||(this.getType()!=BMAP_NAVIGATION_CONTROL_LARGE&&this.getType()!=BMAP_NAVIGATION_CONTROL_ANIM)){return}var e=(i-this._minZoomLevel)*this._sliderInterval+this._minBarY;this._curBarY=e>this._maxBarY?this._maxBarY:e<this._minBarY?this._minBarY:e;this._container.children[1].children[2].children[3].style.top=(this._sliderHeight-this._curBarY-15)+"px";this._sliderBotDom.style.height=this._curBarY+"px"},_hideLevelHint:function(e){if(this._opts.type==BMAP_NAVIGATION_CONTROL_LARGE||this._opts.type==BMAP_NAVIGATION_CONTROL_ANIM){if(this._container){D.rc(this._container.children[1].children[3],"hvr")}}if(e&&this._hideTimerId){clearTimeout(this._hideTimerId);this._hideTimerId=null}},_showLevelHint:function(){if(this._opts.type==BMAP_NAVIGATION_CONTROL_LARGE||this._opts.type==BMAP_NAVIGATION_CONTROL_ANIM){if(this._container){D.ac(this._container.children[1].children[3],"hvr")}}},_expandSlider:function(){},_shrinkSlider:function(){},show:function(){a8.prototype.show.call(this);if(D.Browser.ie<8){var e=this;setTimeout(function(){e.setType(e._opts.type)},1)}}});D.extend(hj.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map)}},initialize:function(e){a8.prototype.initialize.call(this,e);this._render(e);this._setParam();this._updateScale();this._bind(e);return this._container},_setParam:function(){this._numberArray={us:[5280*5000,5280*2500,5280*2000,5280*1000,5280*500,5280*200,5280*100,5280*50,5280*25,5280*20,5280*10,5280*5,5280*2,5280,2000,1000,500,200,100,50,20,10,5],metric:[10000000,5000000,2000000,1000000,500000,200000,100000,50000,25000,20000,10000,5000,2000,1000,500,200,100,50,20,10,5,2,1]}},_bind:function(i){var e=this;i.addEventListener("zoomend",function(T){e._updateScale()});i.addEventListener("load",function(T){e._updateScale()});i.addEventListener("moveend",function(T){e._updateScale()})},_render:function(e){a8.prototype._render.call(this,e);D.ac(this._container,"BMap_scaleCtrl");this._container.innerHTML=this._generateHTML();this._container.style.WebkitTextSizeAdjust="none";this._scaleText=this._container.children[0];a8.prototype._setPosition.call(this);if(this.sateMapStyle){this.addSateMapStyle()}},_generateHTML:function(){var e=\'<div class="BMap_scaleTxt" style="white-space:nowrap;overflow:visible;text-align:center"></div><div class="BMap_scaleBarBG BMap_scaleHBarBG"></div><div class="BMap_scaleBarBG BMap_scaleRBarBG"></div><div class="BMap_scaleBarBG BMap_scaleLBarBG"></div><div class="BMap_scaleBar BMap_scaleHBar"></div><div class="BMap_scaleBar BMap_scaleLBar"></div><div class="BMap_scaleBar BMap_scaleRBar"></div>\';return e},setUnit:function(e){this._opts.unit=this._units[e]&&this._units[e].name||this._opts.unit;if(!this._map){return}this._updateScale()},_setScaleText:function(i,e){this._scaleText.innerHTML=i+"&nbsp;"+e},_updateScale:function(){if(!this._map||!this._container||!this._map.isLoaded()){return}var T=this._map;var h0=new ek(Math.round(T.width/2-50),Math.round(T.height/2));var hW=new ek(Math.round(T.width/2+50),Math.round(T.height/2));var hT=T.pixelToPointIn(h0,{heading:0});var hZ=T.pixelToPointIn(hW,{heading:0});var hV=eo.getDistanceByMC(hT,hZ)/100;if(hV===0||isNaN(hV)){return}var i=this._convertUnit(hV,this._opts.unit);var e=0;var hU=this._units[this._opts.unit].incon;var hY=Math.round(this._map.getZoom());var hX=this._numberArray[this._opts.unit][hY-1];e=hX/i;if(f6()&&e>100){hX=this._numberArray[this._opts.unit][hY];e=hX/i}if(e>300){return}var h1=hX>=hU?this._units[this._opts.unit].u2:this._units[this._opts.unit].u1;if(hX>=hU){hX=Math.round(hX/hU)}this._setScaleText(hX,h1);this._container.style.width=Math.round(e)+"px"},_convertUnit:function(e,i){i=i||"metric";if(this._units[i]){return e*this._units[i].conv}return e}});D.extend(ec.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map)}},initialize:function(i){this._map=i;var e=this;if(this.canCheckSize&&!this._checkSize(i)){return null}a8.prototype.initialize.call(this,i);a8.prototype._render.call(this);this.getMapCenter(function(){e._draw();a8.prototype._setPosition.call(e);e._bind(i)});return this._container},each:function(hU,T){for(var hT=0,e=hU.length;hT<e;hT++){T(hT,hU[hT])}},delegate:function(hT,T,i,e){var hU=this;if(!i.matchs){i.matchs=[];i.handle={}}i.matchs.push({filter:e,fn:T});if(!i.handle[hT]){i.addEventListener(hT,function(hW){var hV=hW.target;while(hV!=i){hU.each(i.matchs,function(hX,hZ){var hY=new RegExp(hZ.filter);if(hY.test(hV.getAttribute("filter"))){hZ.fn.call(hV,hW,hV.getAttribute("filter"))}});hV=hV.parentNode}},false);i.handle.type=true}},_draw:function(){var h1=this;var h0=h1._cityBtn=U("div",{"class":"ui_city_change"});var hY=h1._opts.anchor;var h4="";var e=false;switch(hY){case BMAP_ANCHOR_TOP_LEFT:h4="float: left";break;case BMAP_ANCHOR_TOP_RIGHT:h4="float: right";break;case BMAP_ANCHOR_BOTTOM_LEFT:h4="float: left";e=true;break;case BMAP_ANCHOR_BOTTOM_RIGHT:h4="float: right";e=true;break;default:break}h0.innerHTML=\'<a href="javascript:void(0)" onclick="return false" class="ui_city_change_inner" style="\'+h4+\'"><span id="cur_city_name" class="cur_city_name">\'+h1._map.cityName+"</span><i><em></em></i></a>";h0.style.position="relative";h0.style.height=34+"px";if(!e){D.ac(h0,"ui_city_change_top");h1._container.appendChild(h0)}var hT=h1._cityListWrap=U("div",{"class":"citylist_popup_main"});var h3=\'<div class="citylist_ctr_title">城市列表</div>\';dJ(hT,h3);var h6=U("div",{"class":"citylist_ctr_content"});var hX=U("div",{"class":"city_content_top"});hX.innerHTML=\'<p class="cur_city_info">当前城市：<span id="cur_city_spn">\'+h1._map.cityName+"</span</p>";var hU=\'<form id="city_ctrl_form" onsubmit="Instance("\'+this.guid+\'").search(this);return false"><input type="text" class="sel_city_input" id="selCityWd" name="wd" placeholder="请输入城市名" autocomplete="off"><span id="selCitySubmit">搜索</span><div id="selCityTip" style="display:none;height:20px;line-height:20px;color:#AE6842;border:1px solid #E8AA6C;background:#FEFAF1;width:121px;text-align:center">请输入正确的城市</div></form>\';var T=dJ(hX,hU);h6.appendChild(hX);var i=U("div",{"class":"city_content_medium"});var hZ=\'<div id="hot_city_ids" class="sel_city_hotcity">\'+this._geneHotCityHtml()+"</div>";var h5=\'<div id="sel_city_letter_list" class="sel_city_letterbar">\'+this._geneCityLetter()+"</div>";dJ(i,hZ+h5);h6.appendChild(i);var hW=U("div",{"class":"city_content_bottom",id:"city_detail_tpl"});var hV=this._geneCitiesDetailHtml();hW.innerHTML=hV;h6.appendChild(hW);hT.appendChild(h6);var h2=h1._closeBtn=U("button",{id:"popup_close"});hT.appendChild(h2);if(h1._opts.expand){h1.showListWrap(true)}else{h1.showListWrap(false)}if(hY==BMAP_ANCHOR_TOP_RIGHT||hY==BMAP_ANCHOR_BOTTOM_RIGHT){hT.style.left="-2px"}h1._container.appendChild(hT);if(e){D.ac(h0,"ui_city_change_bottom");h1._container.appendChild(h0)}D.ac(h1._container,"BMap_CityListCtrl")},_checkSize:function(e){if(e.width&&e.width>400&&e.height&&e.height>350){return true}return false},_bind:function(e){var h2=this;var hW=h2.onChangeBefore||[];var h5=function(ib,h8){var ib=ib||window.event;var h9=ib.target||ib.srcElement;var h6=h9.getAttribute("name");h(ib);var ic=true;switch(h8){case"cityHotIds":for(var h7=0;h7<hW.length;h7++){hW[h7]&&hW[h7]()}h2.changeCity(h6);break;case"cityLetters":if(h6=="other"){h6="Z"}var ia=D.G("ctr_tr_"+h6);h2._listDetailTbl.scrollTop=ia.offsetTop;ic=false;break;case"cityName":for(var h7=0;h7<hW.length;h7++){hW[h7]&&hW[h7]()}h2.changeCity(h6);break;default:break}if(ic){setTimeout(function(){h2.showListWrap(false)},200)}};var h1=function(){h2._toggleList()};var hZ=function(ic){dc(ic);var h9=(Math.ceil(ic.wheelDelta/120)||-ic.detail/3);var h7=h9>0?1:-1;var h8=h2._listDetailTable.clientHeight||h2._listDetailTable.offsetHeight;var h6=h2._listDetailTbl.clientHeight||h2._listDetailTbl.offsetHeight;var ia=0;var ib=h8-(h6-20);if(h7>0){h2._listDetailTbl.scrollTop-=20;if(h2._listDetailTbl.scrollTop<=ia){h2._listDetailTbl.scrollTop=0}}else{h2._listDetailTbl.scrollTop+=20;if(h2._listDetailTbl.scrollTop>=ib){h2._listDetailTbl.scrollTop=ib}}};if(h2._container){var hX=h2._cityBtn;var h3=h2._closeBtn;var h4=D.G("hot_city_ids");var h0=D.G("sel_city_letter_list");var hU=D.G("city_detail_table");var hV=D.G("cur_city_name");var i=D.G("cur_city_spn");h2.delegate("click",h5,h4,"cityHotIds");h2.delegate("click",h5,h0,"cityLetters");h2.delegate("click",h5,hU,"cityName");D.on(hX,"click",h1);D.on(h3,"click",function(){h2.showListWrap(false)});h2._map.addEventListener("citychange",function(h6){h2.getMapCenter(function(){h2.curCityName=h2._map.cityName;if(h2._map.cityName=="中国"){h2.curCityName="全国"}h2.curCityCode=h2._map.cCode;hV.innerHTML=h2.curCityName;i.innerHTML=h2.curCityName})});D.on(h2._cityListWrap,"mousewheel",function(h6){dc(h6)});if(window.addEventListener){h2._cityListWrap.addEventListener("DOMMouseScroll",function(h6){dc(h6)},false)}var hT=h2._listDetailTbl=D.G("city_detail_tpl");var T=h2._listDetailTable=D.G("city_detail_table");D.on(hT,"mousewheel",hZ);if(window.addEventListener){hT.addEventListener("DOMMouseScroll",hZ,false)}var hY=D.G("selCitySubmit");hY.addEventListener("click",function(h8){dc(h8);for(var h6=0;h6<hW.length;h6++){hW[h6]&&hW[h6]()}var h7=D.G("selCityWd").value;if(h7.length>0&&h7.length<20){h7=h7.replace(/(\s)/g,"").replace(/</g,"&lt;").replace(/>/g,"&gt;");h2.changeCity(h7,true)}else{D.G("selCityTip").style.display="block";return}});D.on(h2._cityListWrap,"click",function(h6){D.G("selCityTip").style.display="none"})}},_geneHotCityHtml:function(){var hV=this;var hU=hV.getHotCities();var hT="";var T="";for(var e=0;e<hU.length;e++){if(e==0){T="font-weight:bold"}hT+=\'<a href="javascript:void(0)" filter="cityHotIds" name="\'+hU[e]+\'" style="margin-right:7px;*margin-right:1px;\'+T+\'">\'+hU[e]+"</a>";T=""}return hT},_geneCityLetter:function(){var hU=["A","F","G","H","J","L","N","Q","S","T","X","Y","Z","其他"];var hT="";var e="";for(var T=0;T<hU.length;T++){if(T==hU.length-1){e="other"}else{e=hU[T]}hT+=\'<a href="javascript:void(0)" filter="cityLetters" name="\'+e+\'">\'+hU[T]+"</a>"}return hT},_geneCitiesDetailHtml:function(){var hY=this.getCitiesNames();var hW=\'<table id="city_detail_table" style="border-collapse:collapse;border-spacing:0" cellpadding="0" cellspacing="0">\';for(var hV in hY){var e=false;if(hV=="特别行政区"){hW+=\'<tr><td class="sel_city_letter"><div></div></td>\';hW+=\'<td class="sel_city_other sel_city_sf"><a href="javascript:void(0)" class="sel_city_name">\'+hV+"</a></td>";hW+=\'<td><div class="bmap-clearfix city_names_wrap">\';for(var T=0;T<hY[hV].length;T++){hW+=\'<a class="sel_city_name" href="javascript:void(0)" filter="cityName" name="\'+hY[hV][T]+\'">\'+hY[hV][T]+"</a>"}hW+="</div></td></tr>"}else{for(var hU in hY[hV]){if(!e){hW+=\'<tr id="ctr_tr_\'+hV+\'"><td class="sel_city_letter"><div>\'+hV+"</div></td>";e=true}else{hW+=\'<tr><td class="sel_city_letter"><div></div></td>\'}hW+=\'<td class="sel_city_sf"><a href="javascript:void(0)" filter="cityName" name="\'+hU+\'">\'+hU+":</a></td>";hW+=\'<td><div class="bmap-clearfix city_names_wrap">\';var hX=hY[hV][hU];for(var hT=0;hT<hX.length;hT++){hW+=\'<a class="sel_city_name" href="javascript:void(0)" filter="cityName" name="\'+hY[hV][hU][hT]+\'">\'+hY[hV][hU][hT]+"</a>"}hW+="</div></td></tr>"}}}hW+="</table>";return hW},showListWrap:function(e){var i=this;if(i._cityListWrap){e?i._cityListWrap.style.display="block":i._cityListWrap.style.display="none";if(e){i._container.style.width=400+"px"}else{i._container.style.width="auto";i._container.style.height="auto"}}if(i._cityBtn){e?D.ac(i._cityBtn,"ui_city_change_click"):D.rc(i._cityBtn,"ui_city_change_click")}},changeCity:function(e,hU){var T=this;if(T._container&&T._cityBtn){var hT=D.G("cur_city_name");var i=D.G("cur_city_spn");cC.request(function(hW){var hX=T.onChangeAfter||[];var hY=T.onChangeSuccess||[];setTimeout(function(){for(var h2=0;h2<hX.length;h2++){hX[h2]&&hX[h2]()}},300);if(hW&&hW.result&&hW.result["type"]==gq){if(hW.content.hasOwnProperty("error")||hW.err_msg.length>0){if(hU){D.G("selCityTip").style.display="block"}return}var h1=hW.content;if(h1){var h0={title:h1.cname||"",uid:h1.uid||"",point:P.parseGeo(h1.geo,true).point||"",city:h1.cname||"",code:h1.code||"",level:h1.level||T._map.getZoom()};var h1=h0.point;var hZ=P.getBestLevel(h0.level,T._map);if(isNaN(hZ)){hZ=T._map.getZoom()}if(hW.content["code"]==1){hZ=5}if(hU){setTimeout(function(){T.showListWrap(false)},200)}T._map.centerAndZoom(h1,hZ);hT.innerHTML=h0.city;i.innerHTML=h0.city;for(var hV=0;hV<hY.length;hV++){hY[hV]&&hY[hV](h0)}}}},{qt:eG,wd:e,dtype:1})}},_toggleList:function(){var i=this;if(i._cityListWrap){var e=i._cityListWrap.style.display=="none"?false:true;i.showListWrap(!e)}},getHotCities:function(){return["全国","北京","上海","广州","深圳","成都","天津","南京","武汉","杭州","重庆"]},getCitiesNames:function(){return{A:{"安徽":["合肥","安庆","蚌埠","亳州","巢湖","池州","滁州","阜阳","淮北","黄山","六安","马鞍山","宿州","铜陵","芜湖","宣城","淮南"]},F:{"福建":["福州","龙岩","南平","宁德","莆田","泉州","三明","厦门","漳州"]},G:{"广东":["广州","潮州","东莞","佛山","河源","惠州","江门","揭阳","茂名","梅州","清远","汕头","汕尾","韶关","深圳","阳江","云浮","湛江","肇庆","中山","珠海"],"广西":["南宁","百色","北海","崇左","防城港","桂林","贵港","河池","贺州","来宾","柳州","钦州","梧州","玉林"],"贵州":["贵阳","安顺","毕节","六盘水","铜仁","遵义","黔西南州","黔东南州","黔南州"],"甘肃":["兰州","白银","定西","甘南州","嘉峪关","金昌","酒泉","临夏州","陇南","平凉","庆阳","天水","武威","张掖"]},H:{"海南":["海口","白沙黎族自治县","保亭黎族苗族自治县","昌江黎族自治县","儋州","澄迈","东方","定安","琼海","琼中黎族苗族自治县","乐东黎族自治县","临高","陵水黎族自治县","三亚","屯昌","万宁","文昌","五指山","三沙"],"河南":["郑州","安阳","鹤壁","焦作","开封","洛阳","漯河","南阳","平顶山","濮阳","三门峡","商丘","新乡","信阳","许昌","周口","驻马店","济源"],"黑龙江":["哈尔滨","大庆","大兴安岭地区","鹤岗","黑河","鸡西","佳木斯","牡丹江","七台河","齐齐哈尔","双鸭山","绥化","伊春"],"湖北":["武汉","鄂州","恩施","黄冈","黄石","荆门","荆州","潜江","神农架林区","十堰","随州","天门","仙桃","咸宁","襄阳","孝感","宜昌"],"湖南":["长沙","常德","郴州","衡阳","怀化","娄底","邵阳","湘潭","湘西州","益阳","永州","岳阳","张家界","株洲"],"河北":["石家庄","保定","沧州","承德","邯郸","衡水","廊坊","秦皇岛","唐山","邢台","张家口"]},J:{"江苏":["南京","常州","淮安","连云港","南通","苏州","宿迁","泰州","无锡","徐州","盐城","扬州","镇江"],"江西":["南昌","抚州","赣州","吉安","景德镇","九江","萍乡","上饶","新余","宜春","鹰潭"],"吉林":["长春","白城","白山","吉林市","辽源","四平","松原","通化","延边"]},L:{"辽宁":["沈阳","鞍山","本溪","朝阳","大连","丹东","抚顺","阜新","葫芦岛","锦州","辽阳","盘锦","铁岭","营口"]},N:{"宁夏":["银川","固原","石嘴山","吴忠","中卫"],"内蒙古":["呼和浩特","阿拉善盟","包头","巴彦淖尔","赤峰","鄂尔多斯","呼伦贝尔","通辽","乌海","乌兰察布","锡林郭勒盟","兴安盟"]},Q:{"青海":["西宁","果洛州","海东地区","海北州","海南州","海西州","黄南州","玉树州"]},S:{"山东":["济南","滨州","东营","德州","菏泽","济宁","莱芜","聊城","临沂","青岛","日照","泰安","威海","潍坊","烟台","枣庄","淄博"],"山西":["太原","长治","大同","晋城","晋中","临汾","吕梁","朔州","忻州","阳泉","运城"],"陕西":["西安","安康","宝鸡","汉中","商洛","铜川","渭南","咸阳","延安","榆林"],"四川":["成都","阿坝州","巴中","达州","德阳","甘孜州","广安","广元","乐山","凉山州","泸州","南充","眉山","绵阳","内江","攀枝花","遂宁","雅安","宜宾","资阳","自贡"]},T:{"台湾":["台北","高雄","台中","台南","新北","基隆","新竹","嘉义"]},X:{"西藏":["拉萨","阿里地区","昌都","林芝市","那曲","日喀则","山南"],"新疆":["乌鲁木齐","阿拉尔","阿克苏地区","阿勒泰地区","巴音郭楞蒙古自治州","博尔塔拉州","昌吉州","哈密","和田地区","喀什地区","克拉玛依","克孜勒苏州","石河子","塔城地区","图木舒克","吐鲁番","五家渠","伊犁州","北屯","铁门关","双河","可克达拉","昆玉"]},Y:{"云南":["昆明","保山","楚雄州","大理州","德宏州","迪庆州","红河州","丽江","临沧","怒江州","普洱","曲靖","昭通","文山","西双版纳傣族自治州","玉溪"]},Z:{"浙江":["杭州","湖州","嘉兴","金华","丽水","宁波","衢州","绍兴","台州","温州","舟山"]},"特别行政区":["香港","澳门"]}},getMapCenter:function(i){var hU=this._map;var T=hU.getBounds();var hV=hU.getZoom();var e=eo.convertLL2MC(T.getSouthWest());var hT=eo.convertLL2MC(T.getNorthEast());cC.request(function(hY){if(hY&&hY.current_city&&hY.current_city["name"]){var hX=hY.current_city["name"];var hW=hY.current_city["code"];this.curCityName=hU.cityName=hX;this.curCityCode=hU.cCode=hW;if(i){i.call(this)}}},{qt:"cen",b:e.lng+","+e.lat+";"+hT.lng+","+hT.lat,l:hV},"","",true)}});var fu=new String(e4.imgPath+"maptype.png?20150903");fu.toCss=function(e,T){e=typeof e==="number"?e+"px ":"";T=typeof T==="number"?T+"px ":"";var i="transparent url("+this+") no-repeat "+e+T;return i};var bO=[[0,-138],[-11,-138]];bO.toCss=function(i){var e=this[Number(i)];return e[0]+"px "+e[1]+"px"};var aP={B_EARTH_MAP:{text:"3D地球",title:"显示3D地球",file:fu,x:0,y:-92,right:0},B_NORMAL_MAP:{text:"地图",title:"显示普通地图",file:fu,x:0,y:0,right:0}};var gK={B_NORMAL_MAP:{first:"B_EARTH_MAP",second:"B_NORMAL_MAP",showMenu:true},B_EARTH_MAP:{first:"B_NORMAL_MAP",second:"B_EARTH_MAP",showMenu:false}};var b8=["B_NORMAL_MAP","B_EARTH_MAP"];var aZ={HIGHLIGHT:"#0c88e8",NORMAL:"#ffffff",HIGHLIGHT_TEXT:"#ffffff",NORMAL_TEXT:"#666666"};D.extend(bD.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map)}},initialize:function(h8){a8.prototype.initialize.call(this,h8);a8.prototype._render.call(this);a8.prototype._setPosition.call(this);this.mapTypeButtons={};var hV=aZ;var hT={top:"0px",cursor:"pointer",width:"49px",height:"46px",zIndex:"800",display:"inline-block",position:"absolute",fontSize:"12px",backgroundColor:"#fff"};var T={width:"49px",height:"46px",position:"absolute"};var h9={position:"absolute",top:"28px",left:"2px",width:"45px",height:"16px",backgroundColor:hV.NORMAL,opacity:"0.8",filter:"Alpha(opacity=80);"};var h0={position:"absolute",top:"30px",left:"2px",width:"45px",color:"#666666",textAlign:"center",lineHeight:"12px"};if(D.isIE>0&&D.isIE<=8){h0.lineHeight="15px"}D.extend(this._container.style,{top:"10px",width:"49px",height:"98px"});this._container.style.background="url("+e4.imgPath+"blank.gif)";this._container.style.WebkitTransition=this._container.style.transition="top .3s ease-out";var e=U("div");this._menu=e;D.extend(e.style,{position:"absolute",width:"71px",height:"24px",border:"1px solid #ABAEB3",fontSize:"12px",bottom:"20px",right:"0",backgroundColor:"white",display:"none",cursor:"pointer"});var hY=U("span");hY._checked=this._map.isStreetLayerShow();var hW=bO[1];e._checkbox=hY;D.extend(hY.style,{background:fu.toCss(hW[0],hW[1]),width:"11px",height:"11px",position:"absolute",cssFloat:"left",top:"7px",left:"4px"});e.appendChild(hY);var hZ=U("span");hZ.innerHTML="显示路网";D.extend(hZ.style,{position:"absolute",top:"5px",marginLeft:"18px"});e.appendChild(hZ);hZ.onmouseover=h;hZ.onmouseout=h;e.onmouseover=h;e.onmouseout=h;this._container.appendChild(e);for(var h2=0,h4=b8.length;h2<h4;++h2){var ia=b8[h2];var hU=aP[ia];var h3=U("div");h3.title=hU.title;h3._name=ia;D.extend(h3.style,hU);D.extend(h3.style,hT);var h1=U("div");h1.style.position="absolute";h1.style.width="49px";h1.style.height="46px";h1.style.left=h1.style.top="0";h1.style.zIndex="999";h3._mask=h1;h3.appendChild(h1);var hX=U("span");h3._captionBg=hX;D.extend(hX.style,h9);hX.onmouseover=h;hX.onmouseout=h;var h6=U("span");h3._innerBox=h6;D.extend(h6.style,T);var h7=fu.toCss(hU.x,hU.y);h6.style.background=h7;var h5=U("span");h3._caption=h5;h5.innerHTML=hU.text;D.extend(h5.style,h0);h3.appendChild(h6);h6.appendChild(hX);h6.appendChild(h5);h5.onmouseover=h;this._container.appendChild(h3);this.mapTypeButtons[ia]=h3}this._bind(h8);this.updateUI(this._map.mapType);return this._container},_bind:function(i){var e=this;this._container.ondblclick=h;this.mapTypeButtons.B_NORMAL_MAP._mask.onclick=function(){e._map.setMapType("B_NORMAL_MAP")};this.mapTypeButtons.B_EARTH_MAP._mask.onclick=function(){e._map.setMapType("B_EARTH_MAP")};this.mapTypeButtons.B_NORMAL_MAP._mask.onmouseover=function(){e._dehighlightAll();e._highlight(e.mapTypeButtons.B_NORMAL_MAP)};this.mapTypeButtons.B_EARTH_MAP._mask.onmouseover=function(){e._dehighlightAll();e._highlight(e.mapTypeButtons.B_EARTH_MAP)};this.mapTypeButtons.B_NORMAL_MAP._mask.onmouseout=this.mapTypeButtons.B_EARTH_MAP._mask.onmouseout=function(){e._dehighlightAll()};this._menu.onclick=function(T){e._map.showStreetLayer(!e._menu._checkbox._checked);h(T);return false};this._menu.ondblclick=h;i.addEventListener("onmaptypechange",function(T){e.updateUI(this.mapType)});i.addEventListener("onstreetlayer_show",function(T){e._menu._checkbox._checked=true;e._menu._checkbox.style.backgroundPosition=bO.toCss(true)});i.addEventListener("onstreetlayer_hide",function(T){e._menu._checkbox._checked=false;e._menu._checkbox.style.backgroundPosition=bO.toCss(false)});i.addEventListener("forceenableearth",function(T){if(this.config.enableEarth){e.showButton("B_EARTH_MAP");e.hideButton("B_NORMAL_MAP")}})},updateUI:function(T){this.hideButton(T);var hV=gK[T];var hT=this.mapTypeButtons[hV.first];hT.style.top="0";hT.style.display="inline-block";this.showButton(hV.first);var e=this.mapTypeButtons[hV.second];e.style.display="none";this.showButton(hV.second);if(T!=="B_NORMAL_MAP"){var i=this._map.isStreetLayerShow();var hU=this._menu;hU._checkbox._checked=i;hU._checkbox.style.backgroundPosition=bO.toCss(i);hU.style.display=""}else{this._menu.style.display="none"}if(!this._map.config.enableEarth){this.hideButton("B_EARTH_MAP")}},remove:function(){var hT=this.mapTypeButtons;for(var T=0,e=hT.length;T<e;++T){hT[T]=null}a8.prototype.remove.call(this)},hideButton:function(i){var e=this.mapTypeButtons[i];if(!e){return}if(e.style){e.style.visibility="hidden"}},showButton:function(i){var e=this.mapTypeButtons[i];if(!e){return}if(e.style){e.style.visibility="visible"}},isButtonVisible:function(i){var e=this.mapTypeButtons[i];if(!e){return}return e.style.visibility==="visible"},_highlight:function(e){if(!e){return}e._captionBg.style.backgroundColor=aZ.HIGHLIGHT;e._captionBg.style.opacity="1";e._captionBg.style.filter="";e._caption.style.color=aZ.HIGHLIGHT_TEXT},_dehighlight:function(e){if(!e){return}e._captionBg.style.backgroundColor=aZ.NORMAL;e._captionBg.style.opacity="0.8";e._captionBg.style.filter="Alpha(opacity=80);";e._caption.style.color=aZ.NORMAL_TEXT},_dehighlightAll:function(){this._dehighlight(this.mapTypeButtons.B_NORMAL_MAP);this._dehighlight(this.mapTypeButtons.B_EARTH_MAP);this._dehighlight(this.mapTypeButtons.B_SATELLITE_MAP)}});D.extend(cz.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map)}},initialize:function(i){this._map=i;var hT=this._container=document.createElement("div");hT.style.cssText="box-shadow: 0 2px 6px 0 rgba(107,120,137,0.20), 0 4px 10px 0 rgba(91,98,107,0.08);background:rgba(255,255,255,1);";hT.className="BMap_stdMpZoom";var e=this._zoomIn=document.createElement("div");e.className="BMap_button_new BMap_stdMpZoomIn";e.innerHTML=\'<div class="BMap_smcbg in" style="position: absolute"></div>\';var T=this._zoomOut=document.createElement("div");T.className="BMap_button_new BMap_stdMpZoomOut";T.innerHTML=\'<div class="BMap_smcbg out" style="position: absolute; top: 36px;"></div>\';hT.appendChild(e);hT.appendChild(T);i.getContainer().appendChild(hT);this.bindEvt();return hT},_generateZoomHtml:function(){var e=\'<div class="BMap_button_new BMap_stdMpZoomIn" title="放大一级"><div class="BMap_smcbg in"></div></div><div class="BMap_button_new BMap_stdMpZoomOut" title="缩小一级"><div class="BMap_smcbg out"></div></div>\';return e},bindEvt:function(){var e=this;var i=e._map;e._zoomIn.onclick=function(){i.zoomIn();e._zoomInTapped=false;this.style.background=""};e._zoomOut.onclick=function(){i.zoomOut();e._zoomOutTapped=false;this.style.background=""};e._zoomIn.ontouchstart=function(T){if(e._zoomInDisabled){return}e._zoomInTapped=true;this.style.background="#9b9b9b";T.preventDefault()};e._zoomIn.ontouchend=function(){if(!e._zoomInTapped){return}i.zoomIn();e.updateUI();e._zoomInTapped=false;this.style.background=""};e._zoomOut.ontouchstart=function(T){if(e._zoomOutDisabled){return}e._zoomOutTapped=true;this.style.background="#9b9b9b";T.preventDefault()};e._zoomOut.ontouchend=function(){if(!e._zoomOutTapped){return}i.zoomOut();e.updateUI();e._zoomOutTapped=false;this.style.background=""};e.zoomChangeHandler=function(){};i.addEventListener("zoomend",e.zoomChangeHandler);i.addEventListener("load",e.zoomChangeHandler)},updateUI:function(){var e=this._map;if(e.getZoom()>=e.getMaxZoom()){this._zoomInDisabled=true}else{this._zoomInDisabled=false;this._zoomIn.childNodes[0].style.backgroundPosition="0px 0px"}if(e.getZoom()<=e.getMinZoom()){this._zoomOutDisabled=true}else{this._zoomOutDisabled=false;this._zoomOut.childNodes[0].style.backgroundPosition="-8px 0"}}});D.extend(bB.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map)}if(this._startLocationCalled){this.startLocation();this._startLocationCalled=false}},initialize:function(e){a8.prototype.initialize.call(this,e);this._render(e);this._bind(e);return this._container},startLocation:function(){var T=this;var e=true;if(T.onLocationStart){function hT(hV){T._onLocSuccess(hV,true)}function hU(){T._onLocFailure()}e=T.onLocationStart(hT,hU)}if(e===false){return}if(!navigator.geolocation){return}var i={enableHighAccuracy:false,maximumAge:1000,timeout:30000};this.watchId&&navigator.geolocation.clearWatch(this.watchId);this.watchId=null;navigator.geolocation.getCurrentPosition(function(hV){T._onLocSuccess(hV,true)},function(hV){T._onLocFailure(hV)},i);if(this.watchPosition){this.watchId=navigator.geolocation.watchPosition(function(hV){T._onLocSuccess(hV,false)},function(hV){},i)}},stopLocationTrace:function(){if(navigator.geolocation){this.watchId&&navigator.geolocation.clearWatch(this.watchId)}},_render:function(T){var i=this._container=document.createElement("div");i.style.cssText="width:39px;height:39px;box-shadow: 0 2px 6px 0 rgba(107,120,137,0.20), 0 4px 10px 0 rgba(91,98,107,0.08);background:#fff;cursor:pointer;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;border-radius: 4px;";var hT=this._locBtn=document.createElement("div");hT.style.cssText=\'position: absolute;left: 50%;top: 50%;margin-left: -10px;margin-top: -10px;width: 20px;height: 20px;background: url("\'+e4.imgResources.locNewPng+\'") 0 0;background-size: 48px 116px;\';i.appendChild(hT);var e=this._locFailTip=document.createElement("div");e.innerHTML="定位失败";e.style.cssText="display:none;position:absolute;left:45px;top:50%;width: 52px;height:20px;line-height:20px;margin-top:-10px;font-size:12px;box-shadow:1px 1px 2px rgba(0,0,0,.4);background:rgba(255,255,255,1);border-radius:3px;padding-left:5px;";i.appendChild(e);T.getContainer().appendChild(i);return i},_bind:function(){var e=this;function T(){e._buttonTapped=true;this.style.background="#9b9b9b"}function i(){if(e._buttonTapped===false){return}e._buttonTapped=false;e.startLocation();this.style.background="#fff"}if(!f6()){e._container.addEventListener("mousedown",T,false);e._container.addEventListener("mouseup",i,false)}else{e._container.addEventListener("touchstart",T,false);e._container.addEventListener("touchend",i,false)}},_onLocSuccess:function(hW,hZ){var hV=this;var hX=hW.coords.longitude;var hU=hW.coords.latitude;if(hW.coordsType==="bd09mc"){var i=new hu(hX,hU);if(!hV.locMarker){hV._addLocOverlay(i)}else{hV._refreshLocOverlayPosition(i,hZ)}return}var hY=1;if(hW.coordsType==="bd09ll"){hY=5}var T=hX+","+hU;var hT="locCbk"+Math.floor(Math.random()*10000000000);bp[hT]=function(h1){if(h1&&h1.result&&h1.result.length>0){var h0=h1.result[0];var h2=new hu(h0.x,h0.y);if(!hV.locMarker){hV._addLocOverlay(h2)}else{hV._refreshLocOverlayPosition(h2,hZ)}}delete bp[hT]};var e="//api.map.baidu.com/geoconv/v1/?coords="+T+"&from="+hY+"&seckey="+o+"&to=6&v=3.0&type=webgl&ak=1biSUTC4Lo4hgpK3GQoytX3t&callback="+eB+"."+hT;ho.load(e)},_onLocFailure:function(){var e=this._locFailTip;e.style.display="block";setTimeout(function(){e.style.display="none"},1000)},_addLocOverlay:function(i){var T=this._map;var e=new hd(e4.imgResources.locNewPng,new ea(48,48),{imageSize:new ea(48,116),imageOffset:new ea(0,20)});var hT=this.locMarker=new ds(i,{icon:e,baseZIndex:999999,enableMassClear:false,clickable:false});T.addOverlay(hT);if(this._opts.autoViewport){if(this._opts.autoZoom){T.centerAndZoomIn(i,this.locLevel)}else{T.setCenterIn(i)}}if(this.useCompass&&this._isSupportCompass()){this.switchToCompassState()}},_refreshLocOverlayPosition:function(i,e){this.locMarker.setPositionIn(i);if(this.headingMarker){this.headingMarker.setPositionIn(i)}if(e&&this._opts.autoViewport){if(this._opts.autoZoom){this._map.centerAndZoomIn(i,this.locLevel)}else{this._map.setCenterIn(i)}}},_isSupportCompass:function(){var e=navigator.userAgent.toLowerCase();if(e.indexOf("android")>-1||!window.DeviceOrientationEvent||(e.indexOf("ucweb")>-1&&e.indexOf("linux")>-1)){return false}return true},switchToCompassState:function(){var T=this;var i=new hd(e4.imgResources.locNewPng,new ea(48,48),{imageSize:new ea(48,116),imageOffset:new ea(0,68),anchor:new ea(24,24)});this.headingMarker=new ds(this.locMarker.getPositionIn(),{icon:i,baseZIndex:999998,enableMassClear:false,clickable:false});this._map.addOverlay(this.headingMarker);var e=0;var hT=window.orientation;window.addEventListener("deviceorientation",function(hW){var hV;if(!hW.webkitCompassHeading){hV=Math.round(hW.alpha)}else{hV=Math.round(0-hW.webkitCompassHeading)}hV=hV-hT;var hU=Math.abs(e-hV);if(hU>1){T.headingMarker.setRotation(0-hV);e=hV}},true);window.addEventListener("orientationchange",function(){hT=window.orientation},true)}});');