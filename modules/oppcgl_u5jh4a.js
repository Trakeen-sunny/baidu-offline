/**/ï»¿_jsload&&_jsload('oppcgl', 'function eO(){this._currentState="idle";this._currentTouchCount=0;this._firstPointerId=-1;this._secondPointerId=-1}eO.prototype.takeAction=function(e,i){if(this["_on"+e]){this["_on"+e](i)}return this.getState()};eO.prototype._onmousedown=function(e){if(this._currentTouchCount===0){this._firstPointerId=e}else{if(this._currentTouchCount===1){this._secondPointerId=e}}this._currentTouchCount++;if(this._currentState==="idle"){this._currentState="readyToDrag"}else{if(this._currentState==="dragging"||this._currentState==="readyToDrag"){this._currentState="readyToPinch"}else{if(this._currentState==="pinching"){this._currentState="freeze"}else{this._currentState="freeze"}}}};eO.prototype._onmousemove=function(){if(this._currentState==="readyToDrag"||this._currentState==="dragging"){this._currentState="dragging"}else{if(this._currentState==="readyToPinch"){this._currentState="pinching"}}};eO.prototype._onmouseup=function(e){if(this._currentState==="idle"){return}this._currentTouchCount--;if(this._currentState==="readyToDrag"||this._currentState==="dragging"){this._currentState="idle";this._firstPointerId=-1;this._secondPointerId=-1}else{if(this._currentState==="readyToPinch"||this._currentState==="pinching"){this._clearId(e);this._currentState="freeze"}else{if(this._currentState==="freeze"){if(this._currentTouchCount===0){this._currentState="idle";this._firstPointerId=-1;this._secondPointerId=-1;return}if(this._currentTouchCount===2){if(e!==this._firstPointerId&&e!==this._secondPointerId){this._currentState="pinching"}}if(e===this._firstPointerId||e===this._secondPointerId){this._clearId(e);this._currentState="freeze"}}}}};eO.prototype._ongesturestart=function(){if(window.TouchEvent||!window.GestureEvent){return}if(this._currentState==="idle"||this._currentState==="readyToDrag"){this._currentState="readyToPinch"}};eO.prototype._ongesturechange=function(){if(window.TouchEvent||!window.GestureEvent){return}if(this._currentState==="readyToPinch"){this._currentState="pinching"}};eO.prototype._ongestureend=function(){if(window.TouchEvent||!window.GestureEvent){return}if(this._currentState==="readyToPinch"||this._currentState==="pinching"||this._currentState==="freeze"){this._currentState="idle"}};eO.prototype.getState=function(){return dV[this._currentState]||0};eO.prototype.reset=function(){this._currentState="idle";this._currentTouchCount=0;this._firstPointerId=-1;this._secondPointerId=-1};eO.prototype._clearId=function(e){if(e===this._firstPointerId){this._firstPointerId=-1}else{if(e===this._secondPointerId){this._secondPointerId=-1}}};eO.prototype.setState=function(e){this._currentState=e};bp.register(function(e){if(e._mouse){return}e._mouse=new hp(e);if(!e._mouse._drag){e._mouse=null}if(e._renderType==="webgl"){e.addEventListener("dblclick",function(i){if(!e.config.enableDblclickZoom){return}this.zoomIn(i.point)});e.addEventListener("rightdblclick",function(i){if(!e.config.enableDblclickZoom){return}this.zoomOut(i.point)});e.addEventListener("minuspress",function(i){this.zoomOut()});e.addEventListener("pluspress",function(i){this.zoomIn()})}});function aI(hT,T){var i={};i.id=hT.pointerId||0;i.clientPos={x:hT.clientX||hT.pageX||0,y:hT.clientY||hT.pageY||0};i.clientPos.x=hT.clientX-hT.layerX+hT.offsetX;i.clientPos.y=hT.clientY-hT.layerY+hT.offsetY;i.offsetPos={x:hT.layerX||hT.offsetX||0,y:hT.layerY||hT.offsetY||0};i.target=hT.target;i.button=hT.button||0;i.ctrlKey=hT.ctrlKey||false;i.metaKey=hT.metaKey||false;var hU=dF(i,T);D.extend(i,hU);i.offsetPosMap=new ek(hU.x,hU.y);i.timeStamp=hT.timeStamp;i.domEvent=hT;if(hT.type&&hT.type.indexOf("wheel")>-1){i.wheelDelta=hT.wheelDelta;i.detail=hT.detail;i.deltaX=hT.deltaX;i.deltaY=hT.deltaY;i.deltaMode=hT.deltaMode}i.offsetX=i.offsetPosMap.x;i.offsetY=i.offsetPosMap.y;i.layerX=hT.layerX;i.layerY=hT.layerY;return i}function dF(hT,T){var hV=hT.target;var h1=hT.clientPos.x;var h0=hT.clientPos.y;var hY=null;var hX=null;if(hV.nodeType!==1){hV=hV.parentNode}var hW=T.getContainer();var hU=hW;while(hU){h1-=hU.offsetLeft;h0-=hU.offsetTop;hU=hU.offsetParent}if(typeof window.scrollY==="number"){h0+=window.scrollY}if(typeof window.scrollX==="number"){h1+=window.scrollX}var i=T.getPanes();var e=null;while(hV&&hV!==hW){if(hV.hashCode){if(D.instance(hV.hashCode) instanceof cW){hY=D.instance(hV.hashCode)}if(D.instance(hV.hashCode) instanceof ao||D.instance(hV.hashCode) instanceof hJ){hX=D.instance(hV.hashCode)}}var h2=hV.parentNode;if(h2===i.floatPane||h2===i.markerMouseTarget||h2===i.floatShadow||h2===i.labelPane||h2===i.markerPane||h2===i.mapPane){e=hV}hV=h2}var hZ=null;if(e&&!hY&&!hX){hZ=e}return{x:h1,y:h0,overlay:hY,infoWindow:hX,customOverlayDom:hZ,pixel:new ek(h1,h0),point:T.pixelToPointIn(new ek(h1,h0)),latlng:T.pixelToPoint(new ek(h1,h0))}}function gl(hU,hT){var hV=hU.changedTouches[0];var i=hU.changedTouches.length;var T={target:hU.target,timeStamp:hU.timeStamp,ctrlKey:hU.ctrlKey||false,webkitForce:hU.webkitForce,metaKey:hU.metaKey||false,touchesCount:hU.touches.length,targetTouchesCount:hU.targetTouches.length};if(hU.changedTouches){T.changedTouchesCount=hU.changedTouches.length}else{T.changedTouchesCount=1}eK(hV,T,hT);if(i>1){T.secondTouchInfo={};D.extend(T.secondTouchInfo,T);eK(hU.changedTouches[1],T.secondTouchInfo,hT)}return T}function eK(hV,hW,e){if(!hV){return}var hY=hV.clientX;var hX=hV.clientY;hW.id=hV.identifier||0;hW.clientPos={x:hY,y:hX};var hT=0;var T=0;var i=e.container;while(i.offsetParent){hT+=i.offsetLeft;T+=i.offsetTop;i=i.offsetParent}hW.offsetPos={x:hY-hT,y:hX-T};hW.button=0;hW.offsetPosMap=new ek(hW.offsetPos.x,hW.offsetPos.y);var hU=dF(hW,e);D.extend(hW,hU)}function C(hX,hW){var i=hX.clientX;var hY=hX.clientY;if(typeof window.scrollY==="number"){hY+=window.scrollY}var hV={};hV.id=0;hV.clientPos={x:i,y:hY};hV.target=hX.target;var hT=0;var T=0;var hU=hW.container;while(hU.offsetParent){hT+=hU.offsetLeft;T+=hU.offsetTop;hU=hU.offsetParent}hV.offsetPos={x:i-hT,y:hY-T};hV.timeStamp=hX.timeStamp;hV.offsetPosMap=new ek(hV.offsetPos.x,hV.offsetPos.y);hV.scale=hX.scale;hV.rotation=hX.rotation;return hV}function hp(e){this._map=e;if(e._renderType==="webgl"){this._drag=new ce(e)}else{if(typeof g5==="undefined"){return}this._drag=new g5(e)}this._earthDrag=null;this._earthWheel=null;this._dragStarted=false;this._touchStarted=false;this._waitForSecondTouch=false;this._firstTouchInfo={};this._secondTouchInfo={};this._currentTouchCount=0;this._prevGestureScale=1;this._useGesture=!!((f6()&&window.GestureEvent)||(!window.TouchEvent&&window.GestureEvent));this._opButton=-1;this._rotationFix=0;this._pinchRotationThreshold=20;this._pinchZoomThreshold=0.2;this._gestureStatus={zoom:false,rotate:false,tilt:false,dragZoom:false};this._diffX=0;this._diffY=0;this._enableRightDrag=true;if(typeof navigator.userAgent==="string"&&navigator.userAgent.indexOf("QQBrowser")>0){this._enableRightDrag=false}this._lastWheelTime=new Date();this._isModernBrowser=e.config.isModernBrowser;if(e.getRenderType()==="webgl"){e.deepZoom=new aq(e)}else{if(this._isModernBrowser){e.deepZoom=new bF(e)}}this._stateMachine=new eO();this._init();this._bind();if(this._useGesture){this._bindGesture()}this._bindRightButton();this._bindMouseWheel();this._operationVelocity=0;this._lastDiffDistance=0;this._zoomVelocity=0;this._lastDiffZoom=0;this._rotationVelocity=0;this._initRotation=0;this._trackVelocityTimer=null;this._trackTimeStamp=0;this._lastDragPoint={x:0,y:0};this._penultimateDragPoint={x:0,y:0};this._touchInMap=false}hp.prototype._init=function(){this._supportPointerEvent=(window.PointerEvent||window.MSPointerEvent)&&(navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);var e={mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup"};if(this._supportPointerEvent){if(window.PointerEvent){e.mousedown="pointerdown";e.mousemove="pointermove";e.mouseup="pointerup"}else{if(window.MSPointerEvent){e.mousedown="MSPointerDown";e.mousemove="MSPointerMove";e.mouseup="MSPointerUp"}}}this._eventMapping=e};hp.prototype._bind=function(){var hU=this._map;var T=hU.temp;var i=this._eventMapping;var hT=this;var e=hU.platform;D.on(e,i.mousedown,function(hW){if(f6()){return}hT._mousedown=true;var hV=aI(hW,hU);hT._mouseButton=hW.button;hU.dispatchEvent(D.extend(new bc("onmousedown"),hV));hT._processMouseDown(hV)});D.on(e,"touchstart",function(hW){if(hT._mousedown===true){return}hT._touchStarted=true;var hV=gl(hW,hU);hT._processMouseDown(hV);hT._touchInMap=true;if(!hV.customOverlayDom){hW.preventDefault()}});D.on(document,i.mousemove,function(hW){if(hT._touchStarted){return}var hV=aI(hW,hU);hV.button=hT._mouseButton;if(hU.currentOperation===dV.idle){hU.dispatchEvent(D.extend(new bc("onmousemove"),hV))}hT._processMouseMove(hV)});D.on(document,"touchmove",function(hV){if(!hT._touchInMap){return}hT._processMouseMove(gl(hV,hU));hV.preventDefault});D.on(document,i.mouseup,function(hV){if(hT._touchStarted){return}hT._mousedown=false;hT._processMouseUp(aI(hV,hU))});D.on(document,"touchend",function(hZ){if(!hT._touchInMap){return}if(!hT._firstTouchInfo||!hT._firstTouchInfo.offsetPos){hT._processMouseUp(aI(hZ,hU));return}if(hZ.targetTouches.length===0){var hX=Math.abs(hT._diffX)>5||Math.abs(hT._diffY)>5;hT._touchStarted=false;if(!hT._twoFingerTouched&&!hX){var hV=new bc("onclick");D.extend(hV,hT._firstTouchInfo);hV.icon=hU.getIconByClickPosition(hT._firstTouchInfo.offsetPos);hU.dispatchEvent(hV);if(hT._waitForSecondTouch===false){hT._waitForSecondTouch=true;hT._firstTouchPos={x:hT._firstTouchInfo.offsetPos.x,y:hT._firstTouchInfo.offsetPos.y};hT._doubleTouchTimer=setTimeout(function hW(){hT._waitForSecondTouch=false;hT._doubleTouchTimer=null},hU.config.clickInterval)}else{if(Math.abs(hT._firstTouchInfo.offsetPos.x-hT._firstTouchPos.x)<20&&Math.abs(hT._firstTouchInfo.offsetPos.y-hT._firstTouchPos.y)<20){var hY=new bc("ondblclick");D.extend(hY,hT._firstTouchInfo);hU.dispatchEvent(hY)}hT._waitForSecondTouch=false;clearTimeout(hT._doubleTouchTimer);hT._doubleTouchTimer=null}}hT._twoFingerTouched=false;hT._touchInMap=false}hT._processMouseUp(gl(hZ,hU))});D.on(e,"click",function(hY){if(window.TouchEvent&&f6()){return}if(hU.getLock()===true){return}if(hU.currentOperation===dV.idle){var hX=hT._diffX===0&&hT._diffY===0;var hW=aI(hY,hU);if(hX){var hV=new bc("onclick");D.extend(hV,hW);hV.icon=hU.getIconByClickPosition(hV.offsetPosMap);hU.dispatchEvent(hV)}if(!T._clickTimer){T._clickTimer=setTimeout(function(){T._clickTimer=null;if(hX){var hZ=new bc("onclickex");D.extend(hZ,hW);hU.dispatchEvent(hZ)}},hU.config.clickInterval)}}hT._diffX=0;hT._diffY=0});hU.container.onselectstart=function(){return false};D.on(hU.container,"contextmenu",function(hV){hV.cancelBubble=true;bV(hV)});D.on(e,"dblclick",function(hV){if(hU.getLock()===true){return}if(hU.currentOperation===dV.idle){if(D.Browser.ie){hU.dispatchEvent(D.extend(new bc("onclick"),aI(hV,hU)))}if(T._clickTimer){clearTimeout(T._clickTimer);T._clickTimer=null}hU.dispatchEvent(D.extend(new bc("ondblclick"),aI(hV,hU)))}});D.on(document,"mousedown",function(hW){hW=window.event||hW;var hV=hW.srcElement||hW.target;if(T.canKeyboard){T.canKeyboard=hU.container.contains(hV)}else{T.canKeyboard=e.contains(hV)}});D.on(e,"webkitmouseforcedown",function(hV){hU.dispatchEvent(D.extend(new bc("onforcedown"),aI(hV,hU)))});D.on(e,"webkitmouseforceup",function(hV){hU.dispatchEvent(D.extend(new bc("onforceup"),aI(hV,hU)))})};hp.prototype._bindGesture=function(){var e=this;var i=this._map;D.on(i.platform,"gesturestart",function(hT){i.currentOperation=e._stateMachine.takeAction("gesturestart");var T=C(hT,i);e._gestureStartTime=T.timeStamp;if(T.rotation<-160){e._rotationFix=180}else{if(T.rotation>160){e._rotationFix=-180}else{e._rotationFix=0}}e._pinchStartPosition=T.offsetPosMap;e._getCurrentDrag().onReadyToPinch(hT,{initMiddlePoint:T.offsetPosMap,pinchStartPosition:e._pinchStartPosition,zoomRatio:1});hT.preventDefault()});D.on(document,"gesturechange",function(hV){if(i.currentOperation!==dV.readyToPinch&&i.currentOperation!==dV.pinching){return}i.currentOperation=e._stateMachine.takeAction("gesturechange");if(i.currentOperation!==dV.pinching){return}var hU=C(hV,i);if(isNaN(hU.scale)){hU.scale=e._prevGestureScale}else{e._prevGestureScale=hU.scale}hU.rotation+=e._rotationFix;var T=hU.offsetPosMap;e._pinchingPosition=T;e._diffX=T.x-e._pinchStartPosition.x;e._diffY=T.y-e._pinchStartPosition.y;var hT=e._getPinchParam(hU);if(!hT){hV.preventDefault();return}e._getCurrentDrag().onPinching(hV,{pinchStartPosition:e._pinchStartPosition,pinchingPosition:T,pinchingDistance:hT.pinchingDistance,zoomRatio:hT.zoomRatio,angleDiff:hT.rotation,gestureStatus:e._gestureStatus});hV.preventDefault()});D.on(document,"gestureend",function(hU){if(i.currentOperation!==dV.readyToPinch&&i.currentOperation!==dV.pinching){return}var hT=C(hU,i);if(isNaN(hT.scale)){hT.scale=e._prevGestureScale}else{e._prevGestureScale=hT.scale}var T=e._pinchParam||{};e._getCurrentDrag().onPinchEnd(hU,{pinchStartPosition:e._pinchStartPosition,pinchEndPosition:e._pinchingPosition,zoomRatio:T.zoomRatio,angleDiff:T.rotation,gestureStatus:e._gestureStatus});e._resetGestureParam();i.currentOperation=e._stateMachine.takeAction("gestureend");hU.preventDefault()})};hp.prototype._getPinchParam=function(hT){var hY=hT.scale;var h0=hT.rotation;var hU=hT.offsetPosMap;var hX=hU.x-this._pinchStartPosition.x;var hV=hU.y-this._pinchStartPosition.y;var T={x:hX,y:hV};var hZ=hT.timeStamp-this._gestureStartTime;if(hZ<100){return null}var i=this._gestureStatus;if(!this._gestureDetected){this._gestureDetected=true;if(Math.abs(hX)<10&&Math.abs(hV)>10&&Math.abs(hY-1)<0.1&&h0<10){i.tilt=true}}var hW=0;if(!i.tilt&&!i.rotate){if(Math.abs(h0)>this._pinchRotationThreshold){this._initRotation=h0;if(h0>0){hW=h0-this._pinchRotationThreshold}else{hW=h0+this._pinchRotationThreshold}i.rotate=true}else{h0=0}}if(i.rotate&&this._initRotation){hW+=h0-this._initRotation}var e=hY;if(i.tilt){e=1}this._pinchParam={zoomRatio:e,rotation:hW,pinchingDistance:T};return this._pinchParam};hp.prototype._resetGestureParam=function(){this._initRotation=0;this._gestureStatus.zoom=false;this._gestureStatus.rotate=false;this._gestureStatus.tilt=false;this._gestureStatus.dragZoom=false;this._gestureDetected=false;this._pinchParam=null;this._gestureStartTime=null};hp.prototype._bindRightButton=function(){var i=this._map;var e=this;D.on(i.container,this._eventMapping.mouseup,function(T){if(i.mapType===BMAP_EARTH_MAP){return}if(i.getLock()===true){return}if(i.currentOperation!==dV.readyToDrag){if(i.currentOperation===dV.dragging&&e._diffX===0&&e._diffY===0){}else{return}}if(T.button===2){e._processRightClick(aI(T,i))}})};hp.prototype._processMouseDown=function(hY){var i=this._map;if(hY.overlay&&hY.overlay instanceof ds&&hY.overlay._config.enableDraggingMap===false&&!f6()){if(i.currentOperation===dV.idle){this._clearStatus();this._firstTouchInfo=hY;this._firstTouchInfo.initX=hY.offsetPosMap.x;this._firstTouchInfo.initY=hY.offsetPosMap.y;return}}if(i.currentOperation!==dV.idle&&hY.button!==this._opButton){return}if(hY.button===2&&this._currentTouchCount===1){return}if(i.getLock()){return}if(this._currentTouchCount===2){return}this._currentTouchCount++;if(this._currentTouchCount===2){this._twoFingerTouched=true}if(this._lastTouchstartTime&&f6()){var hU=hY.timeStamp-this._lastTouchstartTime;if(hU<200){this._gestureStatus.dragZoom=true}}this._lastTouchstartTime=hY.timeStamp;i.currentOperation=this._stateMachine.takeAction("mousedown",hY.id);if(hY.secondTouchInfo){this._currentTouchCount++;i.currentOperation=this._stateMachine.takeAction("mousedown",hY.secondTouchInfo.id)}if(i.currentOperation===dV.readyToDrag){if(D.Browser.ie||(D.Browser.firefox&&hY.target.setCapture)){hY.target.setCapture()}var hV=this._firstTouchInfo;D.extend(hV,hY);hV.initX=hY.offsetPosMap.x;hV.initY=hY.offsetPosMap.y;this._opButton=hY.button;if(hY.button===2&&this._enableRightDrag===false){i.currentOperation=dV.idle;this._stateMachine.reset();return}this._getCurrentDrag().onReadyToDrag(hY)}else{if(i.currentOperation===dV.readyToPinch){if(hY.secondTouchInfo){D.extend(this._firstTouchInfo,hY);this._firstTouchInfo.initX=hY.offsetPosMap.x;this._firstTouchInfo.initY=hY.offsetPosMap.y;D.extend(this._secondTouchInfo,hY.secondTouchInfo);this._secondTouchInfo.initX=hY.secondTouchInfo.offsetPosMap.x;this._secondTouchInfo.initY=hY.secondTouchInfo.offsetPosMap.y;this._opButton=hY.button}else{D.extend(this._secondTouchInfo,hY);this._secondTouchInfo.initX=hY.offsetPosMap.x;this._secondTouchInfo.initY=hY.offsetPosMap.y}if(this._useGesture){return}this._initTouchDistance=gX(this._firstTouchInfo.offsetPosMap,this._secondTouchInfo.offsetPosMap);this._initMiddlePoint=c2(this._firstTouchInfo.offsetPosMap,this._secondTouchInfo.offsetPosMap);var hT=this._firstTouchInfo.initX-this._initMiddlePoint.x;var h0=this._initMiddlePoint.y-this._firstTouchInfo.initY;var T=this._secondTouchInfo.initX-this._initMiddlePoint.x;var hZ=this._initMiddlePoint.y-this._secondTouchInfo.initY;var hW;if(hT-T!==0){var hX=(hZ-h0)/(T-hT);hW=df(Math.atan(hX))}else{hW=90}if(hW<0){hW=180+hW}this._initAngle=hW;this._preAngle=hW;this._pinchStartPosition=this._initMiddlePoint;this._getCurrentDrag().onReadyToPinch(hY,{initMiddlePoint:this._initMiddlePoint,pinchStartPosition:this._pinchStartPosition,zoomRatio:1})}}};hp.prototype._processMouseMove=function(hV){var i=this._map;if(i.currentOperation===dV.idle){return}if(hV.id===this._firstTouchInfo.id){D.extend(this._firstTouchInfo,hV)}else{if(hV.id===this._secondTouchInfo.id){D.extend(this._secondTouchInfo,hV)}}if(hV.secondTouchInfo){if(hV.secondTouchInfo.id===this._firstTouchInfo.id){D.extend(this._firstTouchInfo,hV.secondTouchInfo)}else{if(hV.secondTouchInfo.id===this._secondTouchInfo.id){D.extend(this._secondTouchInfo,hV.secondTouchInfo)}}}i.currentOperation=this._stateMachine.takeAction("mousemove",hV.id);if(i.currentOperation===dV.pinching){if(this._useGesture){return}if(!this._gestureStartTime){this._gestureStartTime=hV.timeStamp}var hZ=gX(this._firstTouchInfo.offsetPosMap,this._secondTouchInfo.offsetPosMap);var hY=c2(this._firstTouchInfo.offsetPosMap,this._secondTouchInfo.offsetPosMap);this._pinchingPosition=hY;this._diffX=hY.x-this._initMiddlePoint.x;this._diffY=hY.y-this._initMiddlePoint.y;var hW={scale:Math.round(hZ/this._initTouchDistance*100)/100,rotation:this._calcRotationDiff(hY),offsetPosMap:hY,timeStamp:hV.timeStamp};this._pinchingPosition=hY;var T=this._getPinchParam(hW);if(T){this._zoomRatio=T.zoomRatio;this._getCurrentDrag().onPinching(hV,{initMiddlePoint:this._initMiddlePoint,pinchStartPosition:this._pinchStartPosition,pinchingPosition:hY,pinchingDistance:T.pinchingDistance,zoomRatio:T.zoomRatio,angleDiff:T.rotation,gestureStatus:this._gestureStatus})}}else{if(i.currentOperation===dV.dragging){var hU=this._getCurrentDrag();if(this._dragStarted===false){hU.onDragStart&&hU.onDragStart(hV);this._dragStarted=true}if(hV.id===this._firstTouchInfo.id){this._diffX=hV.offsetPosMap.x-this._firstTouchInfo.initX;this._diffY=hV.offsetPosMap.y-this._firstTouchInfo.initY}else{if(hV.secondTouchInfo&&hV.secondTouchInfo.id===this._firstTouchInfo.id){this._diffX=hV.secondTouchInfo.offsetPosMap.x-this._firstTouchInfo.initX;this._diffY=hV.secondTouchInfo.offsetPosMap.y-this._firstTouchInfo.initY}}this._lastDragPoint=hV.pixel;var hT;if(this._lastDragPoint.x===this._penultimateDragPoint.x&&this._lastDragPoint.y===this._penultimateDragPoint.y){hT={x:this._diffX,y:this._diffY}}else{hT={x:this._lastDragPoint.x-this._penultimateDragPoint.x,y:this._lastDragPoint.y-this._penultimateDragPoint.y}}if(!i.config.enableDragging){return}hU.onDragging(hV,{diffX:this._diffX,diffY:this._diffY,velocity:this._operationVelocity,button:this._opButton,dragDistance:{x:this._diffX,y:this._diffY},gestureStatus:this._gestureStatus,dir:hT});if(!this._trackVelocityTimer){var hX=this;this._trackTimeStamp=(new Date()).getTime();this._trackVelocityTimer=setInterval(function(){hX._trackVelocity();hX._penultimateDragPoint=hX._lastDragPoint},30)}}}};hp.prototype._calcRotationDiff=function(hY){var i=this._firstTouchInfo.offsetPosMap.x-hY.x;var hX=hY.y-this._firstTouchInfo.offsetPosMap.y;var e=this._secondTouchInfo.offsetPosMap.x-hY.x;var hW=hY.y-this._secondTouchInfo.offsetPosMap.y;var hT;if(i-e!==0){var hU=(hW-hX)/(e-i);hT=df(Math.atan(hU))}else{hT=90}if(hT<0){hT=180+hT}var T=hT;while(this._preAngle-hT>100){hT=hT+180}while(this._preAngle-hT<-100){hT=hT-180}var hV=this._initAngle-hT;this._preAngle=hT;return hV};hp.prototype._processMouseUp=function(hU){var hT=this._map;if(hT.currentOperation===dV.idle){return}if(hU.button!==this._opButton){return}this._currentTouchCount--;if(hT.currentOperation===dV.readyToDrag||hT.currentOperation===dV.dragging){if(this._trackVelocityTimer){clearInterval(this._trackVelocityTimer);this._trackVelocityTimer=null}this._dragStarted=false;var i;if(this._lastDragPoint.x===this._penultimateDragPoint.x&&this._lastDragPoint.y===this._penultimateDragPoint.y){i={x:this._diffX,y:this._diffY}}else{i={x:this._lastDragPoint.x-this._penultimateDragPoint.x,y:this._lastDragPoint.y-this._penultimateDragPoint.y}}this._getCurrentDrag().onDragEnd(hU,{velocity:this._operationVelocity,dragDistance:{x:this._diffX,y:this._diffY},gestureStatus:this._gestureStatus,dir:i});this._clearStatus(hU);this._resetGestureParam();if(D.Browser.ie||(D.Browser.firefox&&hU.target.releaseCapture)){hU.target.releaseCapture()}this._opButton=-1}else{if(hT.currentOperation===dV.pinching){if(!this._useGesture){var T=this._pinchParam;if(T){this._getCurrentDrag().onPinchEnd(hU,{pinchStartPosition:this._pinchStartPosition,pinchEndPosition:this._pinchingPosition,zoomRatio:T.zoomRatio,angleDiff:T.rotation,gestureStatus:this._gestureStatus})}this._resetGestureParam()}this._clearId(hU.id)}else{if(hT.currentOperation===dV.freeze){if(this._currentTouchCount===0){this._clearStatus(hU)}else{if(hU.id===this._firstTouchInfo.id||hU.id===this._secondTouchInfo.id){if(!this._useGesture){var T=this._pinchParam;if(T){this._getCurrentDrag().onPinchEnd(hU,{pinchStartPosition:this._pinchStartPosition,pinchEndPosition:this._pinchingPosition,zoomRatio:T.zoomRatio,angleDiff:T.rotation,gestureStatus:this._gestureStatus})}this._resetGestureParam()}this._clearId(hU.id)}}}}}hT.currentOperation=this._stateMachine.takeAction("mouseup",hU.id);if(hU.changedTouchesCount===2||hU.targetTouchesCount===0){hU.changedTouchesCount=1;this._processMouseUp(hU)}if(this._currentTouchCount===0&&f6()){this._diffX=this._diffY=0}};hp.prototype._clearId=function(e){if(e===this._firstTouchInfo.id){this._firstTouchInfo={}}else{if(e===this._secondTouchInfo.id){this._secondTouchInfo={}}}};hp.prototype._clearStatus=function(){this._firstTouchInfo={};this._secondTouchInfo={}};hp.prototype._processRightClick=function(hU){var hT=this._map;var T=hT.temp;if(T.rightDblclickTimer){clearTimeout(T.rightDblclickTimer);T.rightDblclickTimer=null;hT.dispatchEvent(D.extend(new bc("onrightclick"),hU));hT.dispatchEvent(D.extend(new bc("onrightdblclick"),hU))}else{hT.dispatchEvent(D.extend(new bc("onrightclick"),hU));var i=D.extend(new bc("onrightclickex"),hU);T.rightDblclickTimer=setTimeout(function(){T.rightDblclickTimer=null;hT.dispatchEvent(i)},hT.config.clickInterval)}};hp.prototype._bindMouseWheel=function(){var hT=this._map;var T=this;if(!D.Browser.firefox){D.on(hT.container,"mousewheel",function i(hU){if(hT.getLock()===true){return}if(!hT.config.enableWheelZoom){return}if(hT.mapType!==BMAP_EARTH_MAP){if(T._isModernBrowser){T._deepZoomWheel(hU)}else{T._wheel(hU)}}else{if(T._earthWheel){T._earthWheel.onWheel(aI(hU,hT))}}bV(hU)})}else{D.on(hT.container,"wheel",function e(hU){if(hT.getLock()===true){return}if(!hT.config.enableWheelZoom){return}if(hT.mapType!==BMAP_EARTH_MAP){if(T._isModernBrowser){T._deepZoomWheel(hU)}else{T._wheel(hU)}}else{if(T._earthWheel){T._earthWheel.onWheel(aI(hU,hT))}}bV(hU)})}};hp.prototype._getCurrentDrag=function(){var e=this._map;if(e.getMapType()!==BMAP_EARTH_MAP){return this._drag}return this._earthDrag};hp.prototype._wheel=function(hW){var hV=this._map;var hT=this._map.temp;if(hT.dragAni){hT.dragAni.stop();hT.dragAni=null;setTimeout(function(){hV.dispatchEvent(new bc("onmoveend"))},1)}if(hT.touchZoomLabelCanvas){hT.touchZoomLabelCanvas.style.display="none"}if(hT.touchZoomDiv){hT.touchZoomDiv.style.display="none"}hW=window.event||hW;hV.lastLevel=hV.zoomLevel;var T=new bc("onmousewheel");T.trend=hW.wheelDelta>=0;if(isNaN(hW.wheelDelta)){T.trend=hW.deltaY<=0}var i=new Date();if(T.trend===true&&hV.zoomLevel===hV.getMaxZoom()||T.trend===false&&hV.zoomLevel===hV.getMinZoom()||i-this._lastWheelTime<220){hV.currentOperation^=dV.mousewheel;if(T.trend===true&&hV.zoomLevel===hV.getMaxZoom()||T.trend===false&&hV.zoomLevel===hV.getMinZoom()){var hU=new bc("onzoomexceeded");if(hV.zoomLevel===hV.getMaxZoom()){hU.targetZoom=hV.zoomLevel+1}else{hU.targetZoom=hV.zoomLevel-1}hV.dispatchEvent(hU)}bV(hW);return}this._astWheelTime=i;D.extend(T,aI(hW,hV));hV.dispatchEvent(T)};hp.prototype._deepZoomWheel=function(hT){var T=this._map;var i=new bc("ondeepzoommousewheel");D.extend(i,aI(hT,T));T.dispatchEvent(i)};hp.prototype.setEarthDrag=function(e){this._earthDrag=e};hp.prototype.setEarthWheel=function(e){this._earthWheel=e};hp.prototype._trackVelocity=function(){var T=(new Date()).getTime();var e=T-this._trackTimeStamp;if(e===0){return}this._trackTimeStamp=T;var hT=Math.sqrt(Math.pow(this._diffX,2)+Math.pow(this._diffY,2));var hU=Math.abs(hT-this._lastDiffDistance);this._lastDiffDistance=hT;var i=500*hU/e;this._operationVelocity=(0.6*i+0.4*this._operationVelocity)};function aq(e){this._map=e;this.scrollCount=0;this.maxZoomWheelDir=1;this.minZoomWheelDir=-1;this.maxZoom=e.getMaxZoom();this.minZoom=e.getMinZoom();this.lastWheelTime=0;this._opMethod="";this.lastWheelDelta=0;this.lastDiff=0;this._mouseFixPoint=null;this.bindEvent()}var gJ=aq.prototype;gJ.bindEvent=function(){var e=this;var i=e._map;i.addEventListener("maptypechange",function(T){e.maxZoom=i.getMaxZoom();e.minZoom=i.getMinZoom()});i.addEventListener("deepzoommousewheel",function(T){e.wheel(T)})};gJ.wheel=function(hV){var hX=this;var i=hX._map;var h4=i.temp;if(h4.dragAni){h4.dragAni.stop(false,{readyToMove:true});h4.dragAni=null}var hT=Math.floor(hV.timeStamp);var T=hT-this.lastWheelTime;var hU=this._trend=hV.deltaY<=0;if(isNaN(hV.deltaY)){hU=this._trend=hV.wheelDelta>=0}var h3=Math.abs(hV.deltaY);var h1=Math.abs(hV.wheelDelta);var h0=h3;if(h1===0&&h0===0){return}var hZ=false;if(this._opMethod==="mouseWheel"&&typeof this._preTrend==="boolean"&&this._preTrend!==this._trend){hZ=true}if(T>100||hZ===true){this._opMethod=bM(h1,h0,hV.deltaMode);if(this._opMethod==="mouseWheel"){if(h4.wheelAni){h4.wheelAni.stop();h4.wheelAni=null}if(this._wheelMotionTimer){clearTimeout(this._wheelMotionTimer);this._wheelMotionTimer=null}}this._mouseFixPoint=hV.point.clone();this.scrollCount=0;this.startZoom=i.getZoom();i.fire(new bc("onmousewheelscroll"));if((this.startZoom===this.maxZoom&&hU===true)||(this.startZoom===this.minZoom&&hU===false)){var h2=new bc("onzoomexceeded");h2.targetZoom=this.startZoom;i.dispatchEvent(h2);return}}this.lastWheelTime=hT;var hY=this._mouseFixPoint;if(this._opMethod==="mouseWheel"&&h0!==0){var hW=h1?(h1/3):h0;this._onWheelMouse(hW,hU,hY,hV.deltaMode);return}if(this._opMethod==="padScroll"){h3=h0/50}else{h3=h0/20}if(isNaN(h3)&&hV.detail){h3=Math.abs(hV.detail)}var hX=this;setTimeout(function(){var h5=i.getZoom();var e=hU===true?h5+0.2*h3:h5-0.2*h3;i.setZoomIn(e,{zoomCenter:hY,stopCurrentAnimation:true,noAnimation:true})},20)};gJ._onWheelMouse=function(i,hT,hV,T){var hW=this._map;this.scrollCount++;if(this.scrollCount>10){this.scrollCount=10}var hU=0;if(D.Browser.firefox){if(T===1){i*=15}if(!D.Platform.macintosh){hU=dP(i*0.005,2)*this.scrollCount}else{if(i%1!==0){i*=10}hU=dP(i*0.01,2)}}else{if(!D.Platform.macintosh){hU=dP(i*0.005,2)*this.scrollCount}else{hU=dP(i*0.005,2)}}if(hU>2){hU=2}if(hT===false){hU=-hU}var e=hW.getZoom()+hU;hW.setZoomIn(e,{zoomCenter:hV,fromMouseWheel:true});this._preTrend=this._trend};function ce(e){this._map=e;this._opButton=0;this._initTilt=0;this._initHeading=0;this._mapHeight=0;this._changeHeadingStartPos=null}D.extend(ce.prototype,{onReadyToDrag:function(hU,i){var hT=this._map;var T=hT.temp;if(T.dragAni){T.dragAni.stop(false,{readyToMove:true});T.dragAni=null}if(hT._ani){hT._ani.stop();hT._ani=null}if(hT._infiniteAni){hT._infiniteAni.stop();hT._infiniteAni=null}if(T.tlPan){T.tlPan.stop();T.tlPan=null}if(!hT.config.enableDragging){return}if(hU.button===0&&hU.ctrlKey===false&&hU.metaKey===false){this._opButton="left";T.pl=hT.offsetX;T.pt=hT.offsetY}else{this._opButton="right";this._initTilt=hT.getTilt();this._initHeading=hT.getHeading();this._mapHeight=hT.getSize().height}if(T.curSpotsArray.length===0&&T.curAreaSpot===null){hT.platform.style.cursor=hT.config.draggingCursor}else{hT.platform.style.cursor="pointer"}},onReadyToPinch:function(hT,i){var T=this._map;if(T.config.fixCenterWhenPinch){this._fixPoint=T.getCenterIn().clone()}else{this._fixPoint=T.pixelToPointIn(i.pinchStartPosition)}this._fixPixel=T.pointToPixelIn(this._fixPoint);this._startZoom=T.getZoom();this._startHeading=T.getHeading();this._startTilt=T.getTilt()},onDragStart:function(){var e=this._map;if(!e.config.enableDragging){return}e.platform.style.cursor=e.config.draggingCursor;this._startZoom=e.getZoom()},onDragging:function(hX,i){var hT=this._map;if(!hT.config.enableDragging){return}var h2=hT.temp;if(this._opButton==="right"&&hT.getZoom()<hT._enableTiltZoom){return}var h0=i.diffX;var hZ=i.diffY;var hV=false;var h1=i.gestureStatus.dragZoom;if(Math.abs(h0)>1||Math.abs(hZ)>1){hV=true;if(!h2._moved){if(!h1){hT.dispatchEvent(D.extend(new bc("ondragstart"),hX));hT.dispatchEvent(new bc("onmovestart"))}h2._moved=true}}if(hV===false){return}hT.dispatchEvent(D.extend(new bc("ondragging"),hX));h2.lastDomMoveTime=hX.timeStamp;if(h1){hT.setZoomIn(this._startZoom-hZ/50,{noAnimation:true})}else{if(this._opButton==="left"){hT._setPlatformPosition(h0,hZ,{initMapOffsetX:h2.pl,initMapOffsetY:h2.pt})}else{var hY=20;var hW={noAnimation:true};if(Math.abs(hZ)>hY){if(!this._rightDragInitY){this._rightDragInitY=hX.pixel.y}}if(this._rightDragInitY){if(!hT.config.enableTilt){return}var T=hX.pixel.y-this._rightDragInitY;this._setTiltByMoveY(this._initTilt,T,hW)}if(Math.abs(h0)>hY){if(!this._rightDragInitX){this._rightDragInitX=hX.pixel.x}}if(this._rightDragInitX){if(!hT.config.enableRotate){return}var hU=hX.pixel.x-this._rightDragInitX;if(this._changeHeadingStartPos===null){this._changeHeadingStartPos=hX.pixel}if(this._changeHeadingStartPos.y<this._mapHeight/2){hT.setHeading(this._initHeading+hU*0.3,hW)}else{hT.setHeading(this._initHeading-hU*0.3,hW)}}}}},_setTiltByMoveY:function(T,hV,e){var hU=this._map;var i=T+hV*0.4;var hT=hU.getCurrentMaxTilt();i=cF(i,c9.MIN_TILT,hT,0.4);hU.setTilt(i,e)},onPinching:function(hV,i){var hU=this._map;if(hU.config.enableTiltGestures&&i.gestureStatus.tilt){this._setTiltByMoveY(this._startTilt,i.pinchingDistance.y,{noAnimation:true});return}var hT=Math.log(i.zoomRatio)/Math.log(2);var T=Math.max(Math.min(this._startZoom+hT,hU.getMaxZoom()),hU.getMinZoom());if(hU.config.enableRotateGestures&&typeof i.angleDiff==="number"){hU.setHeading(this._startHeading+i.angleDiff,{noAnimation:true})}hU.setZoomIn(T,{zoomCenter:this._fixPoint,noAnimation:true,fixPixel:this._fixPixel})},onDragEnd:function(hU,i){var hT=this._map;if(!hT.config.enableDragging){return}var T=hT.temp;if(T.curSpotsArray.length===0&&T.curAreaSpot===null){hT.platform.style.cursor=hT.config.defaultCursor}else{hT.platform.style.cursor="pointer"}if(T._moved&&!i.gestureStatus.dragZoom){hT.dispatchEvent(D.extend(new bc("ondragend"),hU));if(!hT.config.enableInertialDragging||hU.timeStamp-T.lastDomMoveTime>100){hT.dispatchEvent(new bc("onmoveend"))}else{this._processMotion(i.velocity,i.dragDistance,i.dir)}T._moved=false}this._changeHeadingStartPos=null;this._rightDragInitX=this._rightDragInitY=null;if(this._opButton==="right"){this._tiltBounceBack()}},_tiltBounceBack:function(){var i=this._map;if(i.getZoom()<i._enableTiltZoom){return}var e=i.getCurrentMaxTilt();if(i.getTilt()>e){i.setTilt(e,{duration:200})}else{if(i.getTilt()<c9.MIN_TILT){i.setTilt(c9.MIN_TILT,{duration:200})}}},onPinchEnd:function(hU,i){var hT=this._map;if(i.gestureStatus.tilt){this._tiltBounceBack()}if(hT.config.enableRotateGestures&&i.gestureStatus.rotate){var T=Math.abs(hT.getHeading());if(T%360<10){hT.resetHeading()}}},_processMotion:function(hU,h6,hY){var h4=this._map;var hX=h4.temp;var T=(new Date()).getTime();var i=0.5*hU;if(this._opButton==="right"){i=0.15*hU}var h2=0;var h1=0;if(hY.y===0){h2=i}else{var hT=Math.abs(hY.x/hY.y);h1=Math.round(Math.sqrt(i*i/(1+hT*hT)));h2=Math.round(hT*h1)}var h0=dL(h4._heading);if(hY.x<0){h2=-h2}if(hY.y<0){h1=-h1}var hW=h6.x+h2;var hV=h6.y+h1;if(hX.dragAni){hX.dragAni.stop();hX.dragAni=null;h4.dispatchEvent(new bc("onmoveend"))}var h7=0;var h5=0;if(this._opButton==="right"){if(!this._changeHeadingStartPos){return}var hZ=this._mapHeight;var e=this._changeHeadingStartPos;var h3=this._initHeading;hX.dragAni=new p({duration:10000,render:function(h9){var h8=(new Date()).getTime()-T;var ia=Math.exp(-h8/250);h7=hW-h2*ia;if(Math.abs(h2*ia)<5&&Math.abs(h1*ia)<5){hX.dragAni.stop();return}if(e.y<hZ/2){h4.setHeading(h3+h7*0.3,{noAnimation:true})}else{h4.setHeading(h3-h7*0.3,{noAnimation:true})}},finish:function(){hX.dragAni=null;if(e.y<hZ/2){h4.setHeading(h3+h7*0.3,{noAnimation:true})}else{h4.setHeading(h3-h7*0.3,{noAnimation:true})}},onStop:function(){hX.dragAni=null;if(e.y<hZ/2){h4.setHeading(h3+h7*0.3,{noAnimation:true})}else{h4.setHeading(h3-h7*0.3,{noAnimation:true})}}});return}hX.dragAni=new p({duration:10000,render:function(ia,h9){var h8=(new Date()).getTime()-T;var ib=Math.exp(-h8/250);h7=hW-h2*ib;h5=hV-h1*ib;if(Math.abs(h2*ib)<5&&Math.abs(h1*ib)<5){hX.dragAni.stop();return}h4._setPlatformPosition(h7,h5,{initMapOffsetX:hX.pl,initMapOffsetY:hX.pt})},finish:function(){hX.dragAni=null;h4._setPlatformPosition(h7,h5,{initMapOffsetX:hX.pl,initMapOffsetY:hX.pt});h4.dispatchEvent(new bc("onmoveend"))},onStop:function(h8){hX.dragAni=null;h4._setPlatformPosition(h7,h5,{initMapOffsetX:hX.pl,initMapOffsetY:hX.pt});var h9=new bc("onmoveend");h9.userData=h8;h4.dispatchEvent(h9)}})}});bp.register(function(i){var e=i;if(i._keyboardInit===true){return}i._keyboardInit=true;D.on(document,"keydown",function(T){if(e.temp.stopArrow===true){e.temp.stopArrow=false}if(e.config.enableKeyboard&&e.temp.canKeyboard){var T=window.event||T;var hT=false;if(D.Platform.macintosh){if(T.metaKey===true){hT=true}}else{if(T.ctrlKey===true){hT=true}}switch(T.keyCode||T.which){case 189:case 109:case 173:if(!hT){e.temp.operating=true;e.dispatchEvent(new bc("onminuspress"))}break;case 61:case 187:case 107:if(!hT){e.temp.operating=true;e.dispatchEvent(new bc("onpluspress"))}break;case 33:e.temp.operating=false;e.temp.stopArrow=true;T.cancelBubble=true;T.returnValue=false;break;case 34:e.temp.operating=false;e.temp.stopArrow=true;T.cancelBubble=true;T.returnValue=false;break;case 35:e.temp.operating=false;e.temp.stopArrow=true;T.cancelBubble=true;T.returnValue=false;break;case 36:e.temp.operating=false;e.temp.stopArrow=true;T.cancelBubble=true;T.returnValue=false;break;case 37:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=1;e._arrow();T.cancelBubble=true;T.returnValue=false;break;case 38:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=2;e._arrow();T.cancelBubble=true;T.returnValue=false;break;case 39:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=4;e._arrow();T.cancelBubble=true;T.returnValue=false;break;case 40:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=8;e._arrow();T.cancelBubble=true;T.returnValue=false;break}}});D.on(document,"keyup",function(T){if(e.config.enableKeyboard){var T=window.event||T;switch(T.keyCode||T.which){case 37:e.temp.arrow=e.temp.arrow&~1;if(e.temp.arrow!==0){e._arrow()}break;case 38:e.temp.arrow=e.temp.arrow&~2;if(e.temp.arrow!==0){e._arrow()}break;case 39:e.temp.arrow=e.temp.arrow&~4;if(e.temp.arrow!==0){e._arrow()}break;case 40:e.temp.arrow=e.temp.arrow&~8;if(e.temp.arrow!==0){e._arrow()}break}}e.temp.operating=false});c9.prototype._arrow=function(){if(this.mapType===BMAP_EARTH_MAP){return}if(this._arrow.occurrent&&this._arrow._lastArrow===this.temp.arrow&&this.temp.stopArrow===true){return}var T=this;var hU=T.temp.arrow;T._arrow._lastArrow=hU;T._arrow.interval=30;T._arrow.duration=999;T._arrow.dx=T._arrow.dy=0;if(hU&1){T._arrow.dx=1}if(hU&2){T._arrow.dy=1}if(hU&4){T._arrow.dx=-1}if(hU&8){T._arrow.dy=-1}if(hU&1&&hU&4){T._arrow.dx=0}if(hU&2&&hU&8){T._arrow.dy=0}if(!T._arrow.occurrent){T._arrow.occurrent=true;T._arrow.time=new Date().getTime();T._arrow.beginTime=T._arrow.time;T.dispatchEvent(new bc("onmovestart"));var hT=new p({fps:T._arrow.interval,duration:T._arrow.duration,transition:co.linear,render:function(h1){var hW=T._arrow;var hZ=T.temp.arrow;if(T._arrow._lastArrow!==hZ){T._arrow._lastArrow=hZ;if(hZ&1){hW.dx=1}if(hZ&2){hW.dy=1}if(hZ&4){hW.dx=-1}if(hZ&8){hW.dy=-1}if(hZ&1&&hZ&4){hW.dx=0}if(hZ&2&&hZ&8){hW.dy=0}}if(T.temp.stopArrow===true){hW.dx=0;hW.dy=0}var h0=new Date().getTime();var hY=Math.pow((h0-hW.beginTime)/hW.duration,2);if(!T.temp.arrow){hW.occurrent=false;hT.terminative=true;T._arrow.time=new Date().getTime();setTimeout(function(){T.dispatchEvent(new bc("onmoveend"))},40)}var h2=(h0-hW.time);var hX=hW.dx*h2*hY>=0?Math.ceil(hW.dx*h2*hY):Math.floor(hW.dx*h2*hY);var hV=hW.dy*h2*hY>=0?Math.ceil(hW.dy*h2*hY):Math.floor(hW.dy*h2*hY);if(hX!==0&&hV!==0){hX=Math.round(hX*0.7);hV=Math.round(hV*0.7)}hW.time=h0;T._setPlatformPosition(hX,hV)},finish:function(){T._arrow.time=new Date().getTime();setTimeout(function(){T._arrowPan()},T._arrow.interval)}})}};c9.prototype._arrowPan=function(){var hV=this;var hT=hV._arrow;if(hV.temp.stopArrow){hT.dx=0;hT.dy=0}if(!hV.temp.arrow){hT.occurrent=false;hV.dispatchEvent(new bc("onmoveend"));return}var hW=new Date().getTime();var hX=(hW-hT.time);var hU=Math.ceil(hT.dx*hX);var T=Math.ceil(hT.dy*hX);hT.time=hW;hV._setPlatformPosition(hU,T);setTimeout(function(){hV._arrowPan()},hT.interval)}});');