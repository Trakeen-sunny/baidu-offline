/**/﻿_jsload&&_jsload('scommon', 'var dQ=1,dR=2,ft=3,eF=new ea(21,33),bN=new ea(10,33),aY=new ea(22,36),gN=new ea(11,36),q=new ea(25,40),k=new ea(12,20),eX=new ea(9,0),gU=new ea(300,300);c4.addSearchPoi=function(i,hY,hW,hX){var hZ=ax(hY);if(!hZ){return}if(hW<0||hW>9){return}var hU=null;var hV=new aD(hZ);var e=e4.staticHost+"/wolfman/static/common/images/";e+="markers_new2x_2960fb4.png";if(a7()>1){function hT(){return new hd(e,eF,{imageSize:gU,anchor:bN,imageOffset:new ea(21*hW,0),infoWindowOffset:eX})}hU=hT();var T=hT();T.setImageOffset(new ea(21*hW,66));hV.icoDefault=hU;hV.icoActive=T}else{hU=new hd(e,eF,{imageSize:gU,anchor:bN,imageOffset:new ea(21*hW,0),infoWindowOffset:eX})}hV.setIcon(hU);i.addOverlay(hV);if(hX){hV.setTitle(hX)}return hV};c4.addCenterPoi=function(hU,e,hV){var hT=ax(e);if(!hT){return}var i=new aD(hT);var hW=null;if(f6()){function T(){return new hd(e4.imgPath+"markers_hd.png",new ea(21,31),{anchor:bN,imageOffset:new ea(-29,-320),imageSize:new ea(85,477),infoWindowAnchor:eX})}hW=T();i.icoDefault=hW}else{hW=new hd(e4.imgPath+"markers.png",eF,{anchor:bN,imageOffset:new ea(0,-250),infoWindowAnchor:eX})}i.setIcon(hW);hU.addOverlay(i);if(hV){i.setTitle(hV)}return i};c4.addSearchInBoundsPoi=function(i,hX,hW){var hY=ax(hX);if(!hY){return}var hV=new aD(hY);var hU=null;var e=e4.staticHost+"/wolfman/static/common/images/";e+="markers_new2x_2960fb4.png";if(a7()>1){function hT(){return new hd(e,aY,{imageSize:gU,anchor:gN,imageOffset:new ea(200,188),infoWindowOffset:eX})}hU=hT();var T=hT();T.setImageOffset(new ea(200,224));hV.icoDefault=hU;hV.icoActive=T}else{hU=new hd(e,aY,{imageSize:gU,anchor:gN,imageOffset:new ea(200,188),infoWindowOffset:eX})}hV.setIcon(hU);i.addOverlay(hV);if(hW){hV.setTitle(hW)}return hV};function ax(e){var T=[];var i=null;if(e instanceof hu||e instanceof c5){i=e}else{if(typeof e=="string"){T=D.trim(e).split(",");if(T.length<2){return}T[0]=parseFloat(D.trim(T[0]));T[1]=parseFloat(D.trim(T[1]))}else{T=e.slice(0);if(T.length<2){return}}i=new hu(T[0],T[1])}return i}c4.createSearchInfoWnd=function(T,e){var h2=T.title;var h0=T.addr;var hV=T.tel;var hY=T.uid||"";var i=T.url;var h1=T.detailUrl;var hZ=T.poiType||BMAP_POI_TYPE_NORMAL;e=e||{};if(!h2){return null}var hX=h2;if(hZ==BMAP_POI_TYPE_BUSSTOP){hX=hX+"-公交车站"}else{if(hZ==BMAP_POI_TYPE_SUBSTOP){hX=hX+"-地铁站"}}var hW=13;if(h1){hW=10}if(hX.replace(/[\\u0100-\\uffff]/g,"##").length>hW*2+1){hX=hX.substring(0,hW)+"&#8230"}var hU=\'<p style="margin-left:5px;display:inline;height:30px;line-height:30px;width:210px;font:bold 14px/16px \'+e4.fontFamily+\';white-space:nowrap;overflow:hidden" title="\'+h2+\'">\'+hX;if(h1){hU+=\'<a target="_blank" href="\'+h1+\'" style="margin-left:5px;font-size:12px;color:#3d6dcc;font-weight:normal;text-decoration:none;">详情»</a>\'}hU+="</p>";var h4=[];h4.push(\'<div style="font: 12px \'+e4.fontFamily+\'; margin: 5px">\');if(h0){var h3="地址：";if(hZ==BMAP_POI_TYPE_BUSSTOP||hZ==BMAP_POI_TYPE_SUBSTOP){h3="车次："}h4.push(\'<table cellspacing="0" style="overflow: hidden; table-layout: fixed; width: 100 %; font: 12px \'+e4.fontFamily+\'" >\');h4.push(\'<tr><td style="vertical-align: top; width: 38px; white-space: nowrap; word-break: keep-all">\'+h3+"&nbsp;</td><td>");h4.push(h0+"&nbsp;</td></tr>");if(hV){h4.push(\'<tr><td style="vertical-align: top; ">电话：</td><td>\'+hV+"</td></tr>")}h4.push("</table>")}else{if(hV){h4.push(\'<table cellspacing="0" style="table-layout: fixed; width: 100 %; font: 12px \'+e4.fontFamily+\'">\');h4.push(\'<tr><td style="vertical-align: top; width: 36px; white-space: nowrap; word-break: keep-all">电话：</td><td>\'+hV+"</td></tr></table>")}}h4.push("</div>");var hT=new ao(h4.join(""),{title:hU,height:0,width:250,margin:[10,10,20,10]});return hT};c4.addDestPoi=function(hW,e,hX,T){var hT=e4.staticHost+"/wolfman/static/common/images/";hT+="markers_new2x_2960fb4.png";var hV=ax(e);if(!hV){return}var hU=new hd(hT,q,{imageSize:gU,anchor:k,imageOffset:new ea(200+T*25,139),infoWindowOffset:eX});var i=new aD(hV,{icon:hU,baseZIndex:3500000,draggingCursor:"pointer"});hW.addOverlay(i);if(hX){i.setTitle(hX)}return i};c4.addLine=function(i,e){return c4.addRoute(i,e,fX)};c4.ROUTE_TRAFFIC_STYLE_CONFIG=[{stroke:6,color:"#0030ff",opacity:0.45,style:"solid"},{stroke:5,color:"#00bd00",opacity:0.95,style:"solid"},{stroke:5,color:"#ffac00",opacity:0.95,style:"solid"},{stroke:5,color:"#f41c0d",opacity:0.95,style:"solid"}];c4.ROUTE_STYLE_CONFIG=[{stroke:6,color:"#5298fe",opacity:1,style:"solid"},{stroke:6,color:"#5298fe",opacity:1,style:"solid"},{stroke:6,color:"#4ddc26",opacity:1,style:"solid"},{stroke:6,color:"#00bd01",opacity:1,style:"solid"},{stroke:6,color:"#ff0103",opacity:0.65,style:"dashed"},{stroke:6,color:"#ff0103",opacity:0.65,style:"solid"},{stroke:6,color:"#5298ff",opacity:1,style:"solid"},{stroke:6,color:"#5298ff",opacity:1,style:"solid"},{stroke:6,color:"#ff0103",opacity:0.65,style:"dashed"}];c4.addRouteWithTraffic=function(hV,hT,hW){var T=c4.ROUTE_TRAFFIC_STYLE_CONFIG;if(typeof hW=="undefined"){hW=0}if(!T[hW]){return}var e=hT;var i=T[hW];var hU=new al(e,{strokeWeight:i.stroke,strokeColor:i.color,strokeOpacity:i.opacity,strokeStyle:i.style,clickable:false});hV.addOverlay(hU);hU._trafficStatus=hW;return hU};c4.addRoute=function(hX,hU,hT){var T=c4.ROUTE_STYLE_CONFIG;if(typeof hT=="undefined"){hT=0}if(!T[hT]){return}var e=hU;var i=T[hT];var hW=new al(e,{strokeWeight:i.stroke,strokeColor:i.color,strokeOpacity:i.opacity,strokeStyle:i.style,clickable:false});hX.addOverlay(hW);hW._routeType=hT;if(hT==fX){var hV=new al(e,{strokeWeight:i.stroke-2,strokeColor:"#fff",strokeOpacity:0.3,clickable:false});hW._p=hV;hX.addOverlay(hV)}return hW};c4.createTransInfoWnd=function(i){var hV=i.content;var e=i.curIndex;var hW=i.total;var hT=i.nextTransCbk;var hU=i.obj;var hX=i.hideStep;var hY=[\'<div style="font: 12px \'+e4.fontFamily+\'">\'];if(hV){hY.push(\'<div style="margin: 10px 1em 24px 0">\'+hV+"</div>")}if(!hX){hY.push(c4.genStepNavHtml(hW,e))}hY.push("</div>");var T=new ao(hY.join(""),{title:"",height:0,width:220,margin:[10,10,20,10]});if(hX){return T}T.addEventListener("open",function(){var hZ=f6()?"touchend":"click";if(D.G("trans_prev")){D.on(D.G("trans_prev"),hZ,function(){if(hT&&typeof hT=="function"){hT(e-1,hU)}})}if(D.G("trans_next")){D.on(D.G("trans_next"),hZ,function(){if(hT&&typeof hT=="function"){hT(e+1,hU)}})}});return T};c4.genStepNavHtml=function(T,e){var i=[];i.push(\'<table id="trans_nav" width="99% " cols="2" style="background: #eaf2ff; font: 12px \'+e4.fontFamily+\'"><tbody><tr>\');i.push(\'<td nowrap="nowrap" width="50% " align="left">\');if(e==0){i.push(\'<span unselectable="on" style="color: #9c9d99; -moz-user-select: none: >上一步</span>\')}else{i.push(\'<a id="trans_prev" style="color: #7777cc; -moz-user-select: none" href="javascript: void (0)">上一步</a>\')}i.push("</td>");i.push(\'<td nowrap="nowrap" width="50% " align="right">\');if(e==T+1){i.push(\'<span unselectable="on" style="color: #9c9d99; -moz-user-select: none" >下一步</span>\')}else{i.push(\'<a style="color: #7777cc" id="trans_next" href="javascript: void (0)">下一步</a>\')}i.push("</td></tr></tbody></table>");return i.join("")};c4.addTransPoi=function(i,hX,hV,hW){var hY=ax(hX);if(!hY){return}hV=hV||BMAP_LINE_TYPE_BUS;var e=e4.staticHost+"/wolfman/static/common/images/new/";e+="transit-exchange-2x_46d5be3.png";var T=54;switch(hV){case BMAP_LINE_TYPE_SUBWAY:T=75;break;case BMAP_LINE_TYPE_TRAIN:T=117;break;case BMAP_LINE_TYPE_AIRPLANE:T=138;break;case BMAP_LINE_TYPE_COACH:case BMAP_LINE_TYPE_BUS:default:T=54;break}var hU=new hd(e,new ea(22,22),{imageSize:new ea(22,181),infoWindowAnchor:new ea(10,0),imageOffset:new ea(0,T)});var hT=new aD(hY,{icon:hU});i.addOverlay(hT);if(hW){hT.setTitle(hW)}return hT};c4.getInfoWindowDom=function(e){if(e&&e.infoWindowDoms&&e.infoWindowDoms.contentDiv){return e.infoWindowDoms.contentDiv.childNodes[0]}return null};c4.addStationPoi=function(T,e,hT){var i=new aD(e,{icon:new hd(d4._stopUrl,new ea(11,11))});if(hT){i.setTitle(hT)}T.addOverlay(i);return i};c4.createTipLbl=function(i){var e=new aO(i,{offset:new ea(30,-10)});e.setStyle({border:"solid 1px gray",padding:"2px",whiteSpace:"nowrap",background:"#fff"});return e};c4.getDistanceByPixel=function(i,e){if(!i||!e){return}return Math.round(Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)))};c4.addSearchPoi_R=function(hZ,hX,h0,e,i){var h2=ax(hZ),e=e||{};e.type=e.type||"normal";if(!h2||typeof(hX)=="undefined"||hX<0||(hX>9&&e.type!=="child")||(hX>39&&e.type==="child")){return}var h1;var hY=e4.staticHost+"/wolfman/static/common/images/";hY+="markers_new2x_2960fb4.png";var hT=0;if(e.type=="RouteAddrMarker"){hT=273}var T=new ea(18*hX,hT);var hW=new hd(hY,new ea(18,27),{offset:new ea(9,27),imageOffset:T,infoWindowOffset:eX,imageSize:gU,});h1=hX+1;var hU=100;var hV=new aD(h2,{icon:hW,zIndexFixed:true,baseZIndex:2500000-hU*hX});hV.customProperty={type:e.type};i.addOverlay(hV);hV._stCode=h1;if(h0){hV.setTitle(h0)}return hV};fB.CBK_SEARCH_COMPLETE=1;fB.CBK_MARKERS_SET=2;fB.CBK_INFO_HTML_SET=3;fB.CBK_POLYLINES_SET=4;fB.CBK_RESULTS_HTML_SET=5;fB.CBK_BUSLIST_COMPLETE=6;fB.CBK_BUSLINE_COMPLETE=7;fB.CBK_BUSLISTHTML_SET=8;fB.CBK_BUSLINEHTML_SET=9;fB._getPoiUrl=function(e,i){if(e){return e4.mapHost+"?s="+encodeURIComponent("inf&uid="+e+"&c="+i)+"&i=0&sr=1"}return""};fB._getLocType=function(e){if(!e){return gz}if(typeof e=="string"){return cn}if(e instanceof hu||e instanceof c5){return he}if(e instanceof c9){return gY}if(typeof e=="number"){return b9}return gz};D.extend(fB.prototype,{_getIdByLoc:function(hU,e){var i=fB._getLocType(hU.src);if(i==gz){return}var T=this;if(i==b9){e&&e(hU.src);return}if(i==cn){if(hU.curLocType==i&&hU.curSrc==hU.src&&hU.curId){e&&e(hU.curId);return}hU.curLocType=i;hU.curSrc=hU.src;cC.request(function(hW){if(hW&&hW.result&&hW.result["type"]==gq){T._loc.curId=hW.content["code"];e&&e(T._loc.curId)}},{qt:eG,wd:hU.src})}else{var hT;var hV=18;if(i==gY){if(hU.src.isLoaded()){hT=hU.src.getCenter();hV=hU.src.getZoom()}else{hU.src.addEventListener("load",function(){T._getIdByLoc(hU,e)})}}else{hT=hU.src}if(i==hU.curLocType&&hU.curSrc.equals(hT)&&hU.curId){e&&e(hU.curId);return}if(i==gY){hT=eo.convertLL2MC(hT)}if(i==he){hT=eo.convertLL2MC(hT)}hU.curLocType=i;hU.curSrc=new hu(hT.lng,hT.lat);cC.request(function(hW){if(hW&&hW.result&&hW.result["type"]==fO){T._loc.curId=hW.content?hW.content["uid"]:1;e&&e(T._loc.curId)}},{qt:b3,b:hT.lng+","+hT.lat+";"+hT.lng+","+hT.lat,l:hV})}},_setStatus:function(e){if(typeof e=="number"){this._status=e}else{delete this._status}},_triggerCbk:function(i,e,hT){var T;if(typeof e==="undefined"){T=4}else{if(e._plans&&e._plans.length){T=1}else{if(Object.prototype.toString.call(e._start)==="[object Object]"&&Object.prototype.toString.call(e._end)==="[object Object]"){T=3}else{T=2}}}var hU;switch(i){case fB.CBK_SEARCH_COMPLETE:hU=this._opts.onSearchComplete;hU&&hU(e,T);break;case fB.CBK_MARKERS_SET:hU=this._opts.onMarkersSet;hU&&hU(e,hT);break;case fB.CBK_POLYLINES_SET:hU=this._opts.onPolylinesSet;hU&&hU(e,hT);break;case fB.CBK_INFO_HTML_SET:hU=this._opts.onInfoHtmlSet;hU&&hU(e,hT);break;case fB.CBK_RESULTS_HTML_SET:hU=this._opts.onResultsHtmlSet;hU&&hU(e,hT);break;case fB.CBK_BUSLIST_COMPLETE:hU=this._opts.onGetBusListComplete;hU&&hU(e,hT);break;case fB.CBK_BUSLINE_COMPLETE:hU=this._opts.onGetBusLineComplete;hU&&hU(e,hT);break;case fB.CBK_BUSLISTHTML_SET:hU=this._opts.onBusListHtmlSet;hU&&hU(e,hT);break;case fB.CBK_BUSLINEHTML_SET:hU=this._opts.onBusLineHtmlSet;hU&&hU(e,hT);break;default:break}}});var fw=0;var cI=1;var ha=2;P.unique=function(T){var hV=false;var hU=[];var hW={};for(var hT=0,e=T.length;hT<e;hT++){if(!hW[T[hT]]){hW[T[hT]]=true;hU.push(T[hT])}}return hU};P.getBestLevel=function(T,i){if(i){var e=Math.min(i.width/1100,i.height/660);T=Math.round(T+(Math.log(e)/Math.log(2)))}if(T<1){T=1}if(T>21){T=21}return T};P.parseGeo=function(hW,hZ){if(typeof hW!="string"||!hW){return}var h1=hW.split("|");var e;var hU;var T;if(h1.length==1){e=gb(hW)}else{e=gb(h1[2]);hU=gb(h1[0]);T=gb(h1[1]);if(!hZ){return e}}var hX={type:e.geoType};if(hZ){switch(hX.type){case ha:var hY=new hu(e.geo[0][0],e.geo[0][1]);var h0=eo.convertMC2LL(hY);hX.point=h0;hX.points=[h0];break;case cI:hX.points=[];var h2=e.geo[0];for(var hV=0,hT=h2.length-1;hV<hT;hV+=2){var h3=new hu(h2[hV],h2[hV+1]);h3=eo.convertMC2LL(h3);hX.points.push(h3)}hU=new hu(hU.geo[0][0],hU.geo[0][1]);T=new hu(T.geo[0][0],T.geo[0][1]);hU=eo.convertMC2LL(hU);T=eo.convertMC2LL(T);hX.bounds=new dT(hU,T);break;default:break}}return hX};P.parseGeoExt=function(ic,h3){if(!h3){h3=0}else{if(h3<0.25){h3=0}else{if(h3>0.25&&h3<1){h3=1}else{if(h3>32){h3=32}}}}var hY=ic.split("|");if(hY.length==1){var hT=gb(hY[0]);return{type:hT.type,bound:"",points:hT.geo.join(",")}}else{if(hY.length>1){var h4=ic.split(";.=");var h0=[];var hU=[];var h5=0;var h9=h4.length;for(var h6=0;h6<h9;h6++){var ib=h4[h6];if(h9>1){if(h6==0){ib=ib+";"}if(h6>0&&h6<h9-1){ib=".="+ib+";"}if(h6==h9-1){ib=".="+ib}}var hV=ib.split("|");var h8=gb(hV[0]);var h7=gb(hV[1]);h0.push(h8.geo.join(","));h0.push(h7.geo.join(","));var hT=gb(hV[2]);h5=hT.type;var ia=hT.geo.join(",");ia=P.parseGeoExtReg1(ia);if(h3>0){ia=P.parseGeoExtReg2(ia,h3)}hU.push(ia)}if(h9<=1){hU=hU.join(";")}if(h9==2){var T=hU[0]+";"+hU[1];var hW=T.split(";");var e=[];for(var h6=0;h6<hW.length;h6++){var hZ=hW[h6].split(",")[0];var hX=hW[h6].split(",")[1];var h1=new hu(hZ,hX);var h2=eo.convertMC2LL(h1);e.push(h2)}hU=e}return{type:h5,bound:h0.join(";"),points:hU}}}};P.getPoiPoint=function(e){var T=[];var i=null;if(e.toString()=="Point"){i=e}else{if(typeof e=="string"){T=D.trim(e).split(",");if(T.length<2){return}T[0]=parseFloat(D.trim(T[0]));T[1]=parseFloat(D.trim(T[1]))}else{T=e.slice(0);if(T.length<2){return}}i=new BMap.Point(T[0],T[1])}return i};P.parseGeoStr=function(T){var i=T.split(",");var e=new hu(i[0],i[1]);return eo.convertMC2LL(e)};P.level={country:4,province:11,city:12,area:13};var hL=["=",".","-","*"];var f5=1<<23;function gb(hZ){var hY=ba(hZ.charAt(0));var T=hZ.substr(1);var h1=0;var e=T.length;var h2=[];var hW=[];var hX=[];while(h1<e){if(T.charAt(h1)==hL[0]){if((e-h1)<13){return 0}hX=aM(T.substr(h1,13),h2);if(hX<0){return 0}h1+=13}else{if(T.charAt(h1)==";"){hW.push(h2.slice(0));h2.length=0;++h1}else{if((e-h1)<8){return 0}hX=c7(T.substr(h1,8),h2);if(hX<0){return 0}h1+=8}}}for(var hV=0,hT=hW.length;hV<hT;hV++){for(var hU=0,h0=hW[hV].length;hU<h0;hU++){hW[hV][hU]/=100}}return{geoType:hY,geo:hW}}function ba(i){var e=-1;if(i==hL[1]){e=ha}else{if(i==hL[2]){e=cI}else{if(i==hL[3]){e=fw}}}return e}function aM(hU,T){var e=0;var hW=0;var hV=0;for(var hT=0;hT<6;hT++){hV=cP(hU.substr(1+hT,1));if(hV<0){return -1-hT}e+=hV<<(6*hT);hV=cP(hU.substr(7+hT,1));if(hV<0){return -7-hT}hW+=hV<<(6*hT)}T.push(e);T.push(hW);return 0}function c7(hV,hT){var T=hT.length;if(T<2){return -1}var e=0;var hX=0;var hW=0;for(var hU=0;hU<4;hU++){hW=cP(hV.substr(hU,1));if(hW<0){return -1-hU}e+=hW<<(6*hU);hW=cP(hV.substr(4+hU,1));if(hW<0){return -5-hU}hX+=hW<<(6*hU)}if(e>f5){e=f5-e}if(hX>f5){hX=f5-hX}hT.push(hT[T-2]+e);hT.push(hT[T-1]+hX);return 0}function cP(i){var e=i.charCodeAt(0);if(i>="A"&&i<="Z"){return e-"A".charCodeAt(0)}else{if(i>="a"&&i<="z"){return(26+e-"a".charCodeAt(0))}else{if(i>="0"&&i<="9"){return(52+e-"0".charCodeAt(0))}else{if(i=="+"){return 62}else{if(i=="/"){return 63}}}}}return -1}P.pathToPoints=function(hV){var hT=[];if(typeof hV!=="string"){return hT}else{var hU=hV.split(";");for(var T=0;T<hU.length;T++){var e=hU[T].split(",");hT.push(new hu(e[0],e[1]))}}return hT};');