function aa(){this.j={}}var ca;ca="undefined"!==typeof window?window:self;function da(b){var a=ha;a.j[b]=a.w()}function ka(b,a){var c=ha;return parseFloat((c.j[a]-c.j[b]).toFixed(2))}aa.prototype.w=ca.performance&&ca.performance.now?function(){return performance.now()}:function(){return Date.now()};function createWasmModule(global, env, buffer) {"use asm";var a=new global.Int8Array(buffer);var b=new global.Int16Array(buffer);var c=new global.Int32Array(buffer);var d=new global.Uint8Array(buffer);var e=new global.Uint16Array(buffer);var f=new global.Uint32Array(buffer);var g=new global.Float32Array(buffer);var h=new global.Float64Array(buffer);var i=env.DYNAMICTOP_PTR|0;var j=env.tempDoublePtr|0;var k=env.ABORT|0;var l=env.STACKTOP|0;var m=env.STACK_MAX|0;var n=env.gb|0;var o=env.fb|0;var p=0;var q=0;var r=0;var s=0;var t=global.NaN,u=global.Infinity;var v=0,w=0,x=0,y=0,z=0.0;var A=0;var B=global.Math.floor;var C=global.Math.abs;var D=global.Math.sqrt;var E=global.Math.pow;var F=global.Math.cos;var G=global.Math.sin;var H=global.Math.tan;var I=global.Math.acos;var J=global.Math.asin;var K=global.Math.atan;var L=global.Math.atan2;var M=global.Math.exp;var N=global.Math.log;var O=global.Math.ceil;var P=global.Math.imul;var Q=global.Math.min;var R=global.Math.max;var S=global.Math.clz32;var T=env.abort;var U=env.assert;var V=env.enlargeMemory;var W=env.getTotalMemory;var X=env.abortOnCannotGrowMemory;var Y=env.setTempRet0;var Z=env.getTempRet0;var _=0.0;
// EMSCRIPTEN_START_FUNCS
function $(a){a=a|0;var b=0;b=l;l=l+a|0;l=l+15&-16;return b|0}function aa(){return l|0}function ba(a){a=a|0;l=a}function ca(a,b){a=a|0;b=b|0;l=a;m=b}function da(a,b){a=a|0;b=b|0;if(!p){p=a;q=b}}function ea(){return n+1892368|0}function fa(){return n+1990672|0}function ga(){return n+0|0}function ha(){return n+4374544|0}function ia(){return n+1998864|0}function ja(){return n+1998864+(c[n+32768>>2]<<1)|0}function ka(){return n+2523152|0}function la(){return n+2523152+((c[n+32772>>2]|0)*20|0)|0}function ma(){return c[n+32772>>2]|0}function na(){c[n+32768>>2]=0;c[n+32772>>2]=0;return}function oa(){return n+32776|0}function pa(){return n+3833872|0}function qa(){c[n+40968>>2]=0;c[n+40972>>2]=0;return}function ra(){return n+3842064|0}function sa(){return n+3842064+(c[n+40968>>2]<<1)|0}function ta(){return n+40976|0}function ua(){return n+40976+((c[n+40972>>2]|0)*28|0)|0}function va(){return c[n+40972>>2]|0}function wa(){return n+1875984|0}function xa(a,b){a=a|0;b=b|0;var c=0,d=0,e=0,f=0;d=(b|0)>0;if(d){c=0;do{e=n+1875984+(c<<2)|0;g[e>>2]=+g[e>>2]/100.0;c=c+1|0}while((c|0)!=(b|0))}if((b|0)>=(a|0)|d^1)return;else c=b;do{d=0;do{f=d+c|0;e=n+1875984+(f<<2)|0;g[e>>2]=+g[n+1875984+(f-b<<2)>>2]+ +g[e>>2]/100.0;d=d+1|0}while((d|0)!=(b|0));c=c+b|0}while((c|0)<(a|0));return}function ya(d,e,f,g,h,i,j,k,l,m,o,p,q){d=d|0;e=e|0;f=f|0;g=g|0;h=h|0;i=+i;j=j|0;k=k|0;l=l|0;m=m|0;o=o|0;p=p|0;q=q|0;var r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,E=0,F=0,G=0,H=0.0,I=0.0;F=(d|0)/2|0;G=o<<24>>24==1;if(G){b[n+4366352>>1]=0;if((m|0)>2){r=0;s=2;do{I=+(c[n+0+(s<<2)>>2]|0);H=+(c[n+0+((s|1)<<2)>>2]|0);r=(~~(+D(+(I*I+H*H))/10.0)<<16>>16)+(r<<16>>16)|0;b[n+4366352+(((s|0)/2|0)<<1)>>1]=r;s=s+2|0}while((s|0)<(m|0));r=4}}else r=4;if((r|0)==4?(m|0)>2:0){r=2;s=c[n+0>>2]|0;do{C=n+0+(r<<2)|0;s=(c[C>>2]|0)+s|0;c[C>>2]=s;C=r|1;E=n+0+(C<<2)|0;c[E>>2]=(c[E>>2]|0)+(c[n+0+(C+-2<<2)>>2]|0);r=r+2|0}while((r|0)<(m|0))}if(l<<24>>24){b[n+1892368>>1]=b[n+1892368+8>>1]|0;b[n+1892368+2>>1]=b[n+1892368+10>>1]|0;b[n+1892368+4>>1]=b[n+1892368+12>>1]|0;b[n+1892368+6>>1]=b[n+1892368+14>>1]|0;E=F<<1;b[n+1892368+(E+-2<<1)>>1]=b[n+1892368+(E+-6<<1)>>1]|0;b[n+1892368+(E+-1<<1)>>1]=b[n+1892368+(E+-5<<1)>>1]|0;b[n+1892368+(E+-4<<1)>>1]=b[n+1892368+(E+-8<<1)>>1]|0;b[n+1892368+(E+-3<<1)>>1]=b[n+1892368+(E+-7<<1)>>1]|0}C=q-p|0;E=c[n+32772>>2]|0;if((d|0)<=1){za(C,E);return}A=(j|0)==0;B=F+-2|0;w=o<<24>>24==2;x=F+-1|0;y=F+-4|0;z=p+1|0;v=q+-1|0;t=0;r=0;u=E;do{if((t|0)>=4)if((y|0)>(t|0))m=z+((t+-4|0)/5|0)|0;else m=v;else m=p;if(!A)r=b[n+1990672+(m<<1)>>1]|0;d=m<<1;q=((c[n+0+(d<<2)>>2]|0)/10|0)&65535;d=((c[n+0+((d|1)<<2)>>2]|0)/10|0)&65535;o=t<<1;j=~~(+(b[n+1892368+(o<<1)>>1]|0)*i/10.0);o=~~(+(b[n+1892368+((o|1)<<1)>>1]|0)*i/10.0);a:do if(!((t|0)==0|(t|0)==(B|0)))if((t|0)==1|(t|0)==(x|0))l=-1;else{s=t+-2|0;switch((s|0)%5|0|2|0){case 2:{l=1;break a}case 3:{l=-1;break a}default:{l=a[((s|0)/5|0)+(n+4374544)>>0]|0;break a}}}else l=1;while(0);if(G)s=b[n+4366352+(m<<1)>>1]|0;else s=w?((m|0)==0?0:10):0;m=u;u=u+1|0;b[n+2523152+(m*20|0)>>1]=q;b[n+2523152+(m*20|0)+2>>1]=d;b[n+2523152+(m*20|0)+4>>1]=j;b[n+2523152+(m*20|0)+6>>1]=o;a[n+2523152+(m*20|0)+8>>0]=e;a[n+2523152+(m*20|0)+9>>0]=f;a[n+2523152+(m*20|0)+10>>0]=g;a[n+2523152+(m*20|0)+11>>0]=h;b[n+2523152+(m*20|0)+12>>1]=l;b[n+2523152+(m*20|0)+14>>1]=r;b[n+2523152+(m*20|0)+16>>1]=k;b[n+2523152+(m*20|0)+18>>1]=s;t=t+1|0}while((t|0)<(F|0));c[n+32772>>2]=u;za(C,E);return}function za(a,d){a=a|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,o=0,p=0,q=0;l=a+-1|0;k=a+-2|0;j=0;e=1;f=1;i=c[n+32768>>2]|0;while(1){a=e+1|0;o=a+d|0;a=(a&1|0)==0;h=f<<24>>24!=0;p=o+-2|0;m=e+d|0;g=h?p:m;p=h?m:p;b[n+1998864+(i<<1)>>1]=a?g:p;b[n+1998864+(i+1<<1)>>1]=a?p:g;b[n+1998864+(i+2<<1)>>1]=o;o=e+2|0;g=o+d|0;o=(o&1|0)==0;p=g+-1|0;a=h?m:p;m=h?p:m;b[n+1998864+(i+3<<1)>>1]=o?a:m;b[n+1998864+(i+4<<1)>>1]=o?m:a;a=i+6|0;b[n+1998864+(i+5<<1)>>1]=g;if((j|0)>=(l|0))break;o=e+3|0;g=o+d|0;o=(o&1|0)==0;m=g+-2|0;q=g+-1|0;p=h?m:q;m=h?q:m;b[n+1998864+(a<<1)>>1]=o?p:m;b[n+1998864+(i+7<<1)>>1]=o?m:p;b[n+1998864+(i+8<<1)>>1]=g;g=e+4|0;p=g+d|0;m=(g&1|0)==0;o=p+-2|0;q=p+-1|0;a=h?o:q;o=h?q:o;b[n+1998864+(i+9<<1)>>1]=m?a:o;b[n+1998864+(i+10<<1)>>1]=m?o:a;a=i+12|0;b[n+1998864+(i+11<<1)>>1]=p;if((j|0)==(k|0))e=g;else{e=e+5|0;q=e+d|0;m=(e&1|0)==0;o=q+-2|0;g=q+-1|0;p=h?o:g;o=h?g:o;b[n+1998864+(a<<1)>>1]=m?p:o;b[n+1998864+(i+13<<1)>>1]=m?o:p;b[n+1998864+(i+14<<1)>>1]=q;f=f<<24>>24==0&1;a=i+15|0}j=j+1|0;i=a}c[n+32768>>2]=a;return}function Aa(d,f,h,i,j,k,l,m,o,p,q){d=d|0;f=f|0;h=+h;i=i|0;j=j|0;k=k|0;l=l|0;m=m|0;o=o|0;p=p|0;q=q|0;var r=0,s=0,t=0,u=0,v=0,w=0.0,x=0.0,y=0.0,z=0.0,A=0.0,B=0.0,C=0.0,D=0.0,E=0.0,F=0.0;if((d|0)>2){r=2;s=c[n+32776>>2]|0;do{u=n+32776+(r<<2)|0;s=(c[u>>2]|0)+s|0;c[u>>2]=s;u=r|1;v=n+32776+(u<<2)|0;c[v>>2]=(c[v>>2]|0)+(c[n+32776+(u+-2<<2)>>2]|0);r=r+2|0}while((r|0)<(d|0))}u=c[n+40972>>2]|0;v=(d|0)>0;if(v){s=u+((d+-1|0)>>>1)|0;r=0;t=u;while(1){w=+(c[n+32776+((r|1)<<2)>>2]|0)/100.0;g[n+40976+(t*28|0)>>2]=+(c[n+32776+(r<<2)>>2]|0)/100.0;g[n+40976+(t*28|0)+4>>2]=w;g[n+40976+(t*28|0)+8>>2]=h;g[n+40976+(t*28|0)+12>>2]=0.0;g[n+40976+(t*28|0)+16>>2]=0.0;g[n+40976+(t*28|0)+20>>2]=1.0;a[n+40976+(t*28|0)+24>>0]=i;a[n+40976+(t*28|0)+25>>0]=j;a[n+40976+(t*28|0)+26>>0]=k;a[n+40976+(t*28|0)+27>>0]=l;r=r+2|0;if((r|0)>=(d|0))break;else t=t+1|0}r=s+1|0;c[n+40972>>2]=r}else r=u;if((f|0)>0){i=c[n+40968>>2]|0;s=0;t=i;while(1){b[n+3842064+(t<<1)>>1]=(e[n+3833872+(s<<1)>>1]|0)+u;s=s+1|0;if((s|0)==(f|0))break;else t=t+1|0}c[n+40968>>2]=i+f}if(!v)return;i=d+-2|0;t=c[n+40968>>2]|0;k=(d+-1|0)>>>1;j=r+(k<<2)|0;k=t+(k*6|0)|0;s=0;while(1){C=+(c[n+32776+(s<<2)>>2]|0)/100.0;B=+(c[n+32776+((s|1)<<2)>>2]|0)/100.0;f=s;s=s+2|0;l=(f|0)==(i|0);A=+(c[n+32776+((l?0:s)<<2)>>2]|0)/100.0;z=+(c[n+32776+((l?1:f+3|0)<<2)>>2]|0)/100.0;E=A-C;w=z-B;D=C-C;F=B-B;y=w*h-F*0.0;x=D*0.0-E*h;w=F*E-D*w;f=r+1|0;g[n+40976+(r*28|0)>>2]=C;g[n+40976+(r*28|0)+4>>2]=B;g[n+40976+(r*28|0)+8>>2]=0.0;g[n+40976+(r*28|0)+12>>2]=y;g[n+40976+(r*28|0)+16>>2]=x;g[n+40976+(r*28|0)+20>>2]=w;a[n+40976+(r*28|0)+24>>0]=m;a[n+40976+(r*28|0)+25>>0]=o;a[n+40976+(r*28|0)+26>>0]=p;a[n+40976+(r*28|0)+27>>0]=q;l=r+2|0;g[n+40976+(f*28|0)>>2]=C;g[n+40976+(f*28|0)+4>>2]=B;g[n+40976+(f*28|0)+8>>2]=h;g[n+40976+(f*28|0)+12>>2]=y;g[n+40976+(f*28|0)+16>>2]=x;g[n+40976+(f*28|0)+20>>2]=w;a[n+40976+(f*28|0)+24>>0]=m;a[n+40976+(f*28|0)+25>>0]=o;a[n+40976+(f*28|0)+26>>0]=p;a[n+40976+(f*28|0)+27>>0]=q;v=r+3|0;g[n+40976+(l*28|0)>>2]=A;g[n+40976+(l*28|0)+4>>2]=z;g[n+40976+(l*28|0)+8>>2]=0.0;g[n+40976+(l*28|0)+12>>2]=y;g[n+40976+(l*28|0)+16>>2]=x;g[n+40976+(l*28|0)+20>>2]=w;a[n+40976+(l*28|0)+24>>0]=m;a[n+40976+(l*28|0)+25>>0]=o;a[n+40976+(l*28|0)+26>>0]=p;a[n+40976+(l*28|0)+27>>0]=q;g[n+40976+(v*28|0)>>2]=A;g[n+40976+(v*28|0)+4>>2]=z;g[n+40976+(v*28|0)+8>>2]=h;g[n+40976+(v*28|0)+12>>2]=y;g[n+40976+(v*28|0)+16>>2]=x;g[n+40976+(v*28|0)+20>>2]=w;a[n+40976+(v*28|0)+24>>0]=m;a[n+40976+(v*28|0)+25>>0]=o;a[n+40976+(v*28|0)+26>>0]=p;a[n+40976+(v*28|0)+27>>0]=q;u=r&65535;b[n+3842064+(t<<1)>>1]=u;b[n+3842064+(t+1<<1)>>1]=l;v=v&65535;b[n+3842064+(t+2<<1)>>1]=v;b[n+3842064+(t+3<<1)>>1]=u;b[n+3842064+(t+4<<1)>>1]=v;b[n+3842064+(t+5<<1)>>1]=f;if((s|0)>=(d|0))break;else{t=t+6|0;r=r+4|0}}c[n+40972>>2]=j+4;c[n+40968>>2]=k+6;return}function Ba(){}

// EMSCRIPTEN_END_FUNCS
return{_reset_line:na,_get_block_index_start:ra,setThrew:da,_get_line_turnings_address:ha,_get_block_triangle_indices_address:pa,_get_line_vertex_count:ma,stackAlloc:$,_get_block_vertex_count:va,_get_block_vertex_start:ta,_get_line_vertex_end:la,_get_feature_points_address:wa,stackRestore:ba,_get_block_index_end:sa,_get_line_altitudes_address:fa,_get_block_vertex_end:ua,stackSave:aa,runPostSets:Ba,_get_line_vertex_start:ka,_parse_points:xa,_get_line_points_address:ga,establishStackSpace:ca,_get_line_index_end:ja,_append_line_data:ya,_get_line_index_start:ia,_append_block_data:Aa,_get_block_points_address:oa,_reset_block:qa,_get_line_data_address:ea}}


;
var ra,sa,ta,Aa,Ba,Ca,y,Ga,Ha,Ia,Ja,Ka,La,Ma,Va,Wa,Xa,Ya;
ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(b,a){void 0===b&&(b=0);void 0===a&&(a=this.byteLength);b=Math.floor(b);a=Math.floor(a);0>b&&(b+=this.byteLength);0>a&&(a+=this.byteLength);b=Math.min(Math.max(0,b),this.byteLength);a=Math.min(Math.max(0,a),this.byteLength);if(0>=a-b)return new ArrayBuffer(0);var c=new ArrayBuffer(a-b),t=new Uint8Array(c);b=new Uint8Array(this,b,a-b);t.set(b);return c});
function Za(b,a){var c=b.length;a=a||2;Ya||(Ya=y._get_feature_points_address()>>2);ta.set(b,Ya);y._parse_points(c,a);return new Float32Array(ra.slice(Ya<<2,Ya+c<<2))}function $a(){return y._get_block_vertex_count()}function ab(){La||(La=y._get_line_vertex_start());return new Float32Array(ra.slice(La,y._get_line_vertex_end()))}function ib(){Ka||(Ka=y._get_line_index_start());return new Uint16Array(ra.slice(Ka,y._get_line_index_end()))}function jb(){return y._get_line_vertex_count()}
function kb(b,a,c,t,f,p,k,q,x,g,e){var w=0;t&&(w=t.length,Ha||(Ha=y._get_line_altitudes_address()>>1),Ba.set(t,Ha));q&&q.length&&(Ja||(Ja=y._get_line_turnings_address()),sa.set(q,Ja));f=f||0;g=g||0;e=e||k.length/2;Ga||(Ga=y._get_line_data_address()>>1);Ba.set(b,Ga);Ia||(Ia=y._get_line_points_address()>>2);Aa.set(k,Ia);y._append_line_data(b.length,a[0],a[1],a[2],a[3],c,w,f,p?1:0,k.length,x,g,e)}function lb(){y._reset_line()}
function mb(b){ra||(ra=new ArrayBuffer(4587520),ta=new Float32Array(ra),Aa=new Int32Array(ra),sa=new Int8Array(ra),Ba=new Int16Array(ra),Ca=new Uint16Array(ra),y=self.createWasmModule(self,{W:0,qa:0,V:0,X:0,Y:0,ca:0,aa:0},ra));b&&b()}
function nb(b,a,c,t,f){var p={fixedLabel:[],lineLabel:[]};if(!b)return p;var k=[];if(a&&a.length)for(var q=0;q<a.length;q++){var x=a[q],g=x[0]/4;H[g+1]===ob&&k.push(Q(H[g]+1,x[0],x[0]+x[1]))}a=Q(0,c[0],c[0]+c[1])||[];t=t.height;p.fixedLabel=pb(b,k,t,f,void 0);k=[];for(c=0;c<a.length;c++){var e=b,w=a[c];q=f;x=t;g=k;var d=w[0]/4,u=Q(H[d]+1,w[0],w[0]+w[1]),v=Q(0,u[6][0],u[6][0]+u[6][1]);w=[];for(var l=0;l<v.length;l++)w[l]=new Uint16Array(e,v[l][0],v[l][1]/2);v=qb;var n=Math.pow(2,18-q.zoom),m=q.col*
q.baseTileSize*n,h=q.row*q.baseTileSize*n,E=new Uint16Array(e,u[4][0],u[4][1]/2),r=E.length,A=rb[d+1],C=sb.b(tb,A,"pointText",q.useZoom,ub,!1,T);d=rb[d+2];var B=vb(e,u[0][0],u[0][1],"utf-8"),z=w.length||B.split("").length;if(0!==z){var F=new Int32Array(e,u[1][0],u[1][1]/4),G=new Int16Array(e,u[5][0],u[5][1]/2),R=[G[0]],V=Array.prototype.slice.call(F.slice(0,2)),K=2;for(l=1;K<F.length;K+=2,l++)V[K]=V[K-2]+F[K],V[K+1]=V[K-1]+F[K+1],1===G.length?R[l]=G[0]:1<G.length&&(R[l]=R[l-1]+G[l]);var M=new Uint16Array(e,
u[3][0],u[3][1]/2);e=new Uint16Array(e,u[2][0],u[2][1]/2);for(l=0;l<r;l++)if(u=E[l],wb(u,q.useZoom)){if(q.processedLabelZooms&&q.processedLabelZooms.length){F=q.processedLabelZooms;var W=!1;for(K=0;K<F.length;K++)if(wb(u,F[K])){W=!0;break}if(W)continue}K=M[l];F=l*z*2;F=V.slice(F,F+2*z);var Y=W=1E3,X=-1E3,O=-1E3,J=w.slice(0);K&&J.reverse();for(var L,U,P,N=[],D=0;D<z;D++){var I=e[z*l+D],Z=F[2*D]/100,ea=F[2*D+1]/100,Na=0;0<G.length&&(Na=R[l*z]/100);0===D&&(L=Z,U=ea,P={lng:m+L,lat:h+U});Z=(Z-L)/n;ea=
(ea-U)/n;var S=J[D],fa=null,ua=null;if(S&&0<S.length){var xa=S[0];fa=S[1];var ia=S[2]/v;S=S[3]/v;ua=[ia,S];var la=xa/512,ma=(x-fa-S*v)/x,Oa=xa=(xa+ia*v)/512;fa=(x-fa)/x;fa=[la,ma,xa,ma,Oa,fa,la,ma,Oa,fa,la,fa];la=Z-ia/2;ma=ea+S/2;S=ea-S/2;ia=Z+ia/2;la<W&&(W=la);ia>X&&(X=ia);S<Y&&(Y=S);ma>O&&(O=ma)}N.push({offset:[Z,ea],z:Na,size:ua,angle:I,texcoord:fa})}J=F[2*(z-1)]-F[0];F=F[2*(z-1)+1]-F[1];1===K&&(J=-J,F=-F);0===J?F=0<F?90:270:(D=Math.atan(F/J)/Math.PI*180,0>J&&0<F?D+=180:0>J&&0>F?D+=180:0<J&&0>
F&&(D+=360),360===D&&(D=0),F=D);g.push({type:"line",rank:d,name:B,wordCount:z,pt:P,mcInTile:{x:L,y:U},reverse:K,styleId:A,styleText:C,bds:[W,Y,X,O],wordsInfo:N,labelAngle:F,tracer:u,processedInZoom:q.useZoom,key:"line_"+d+"_"+P.lng+"_"+P.lat})}}}p.lineLabel=k;p.textureHeight=t;p.tileInfo=f;return p}
function pb(b,a,c,t,f){for(var p=[],k=0;k<a.length;k++){var q=b,x=a[k],g=t,e=c,w=p,d=f;if(x&&x.length){d=d||ub;var u=g.useZoom;9===u&&(u=8);for(var v=Math.pow(2,18-g.zoom),l=g.col*g.baseTileSize*v,n=g.row*g.baseTileSize*v,m=g.col,h,E=m,r=1536*Math.pow(2,g.zoom-3)/(g.baseTileSize||256),A=r/2-1,C=-r/2;E>A;)E-=r;for(;E<C;)E+=r;h=E;var B=l;h>m?B=l-40075452:h<m&&(B=l+40075452);for(var z=0;z<x.length;z++){var F=x[z],G=F[0]/4,R=H[G],V=H[G+1],K=sb.b(tb,V,"point",u,d,!1,T),M=sb.b(tb,V,"pointText",u,d,!1,T),
W=Q(R+1,F[0],F[0]+F[1]);if(!(M&&0!==M.length||K&&0!==K.length))if(5===u){if(!W||!W.length)continue;for(var Y=0;Y<W.length;Y++){var X=W[Y],O=X[0]/4,J=H[O],L=Q(J+1,X[0],X[0]+X[1]),U;X[1]&&L[1][1]&&(U=vb(q,L[1][0],L[1][1],"utf-8"));if("\u5317\u4eac"===U){K=sb.b(tb,V,"point",6,d,!1,T);M=sb.b(tb,V,"pointText",6,d,!1,T);break}}}else continue;if(W){var P=null,N=1,D=0,I=0;K&&K[0]&&(K=K[0],P=K.icon,N=(K.zoom||100)/100);for(Y=0;Y<W.length;Y++)if(X=W[Y],O=X[0]/4,J=H[O],L=Q(J+1,X[0],X[0]+X[1]),X[1]){var Z=H[O+
1];if(wb(Z,g.useZoom)){if(g.processedLabelZooms&&g.processedLabelZooms.length&&!T){for(var ea=g.processedLabelZooms,Na=!1,S=0;S<ea.length;S++)if(wb(Z,ea[S])){Na=!0;break}if(Na)continue}var fa=Q(0,L[2][0],L[2][0]+L[2][1]),ua=[];for(S=0;S<fa.length;S++)ua[S]=new Uint16Array(q,fa[S][0],fa[S][1]);var xa=void 0;L[1][1]&&(xa=vb(q,L[1][0],L[1][1],"utf-8"));var ia=xa||"";if(!(M&&0<M.length&&0===ua.length&&""===ia)){var la=H[O+2],ma=H[O+3],Oa=H[O+4],dc=Math.round(la/100),ec=Math.round(ma/100),zb={lng:l+dc,
lat:n+ec},Gc={lng:B+dc,lat:n+ec},fc=void 0;L[0][1]&&(fc=vb(q,L[0][0],L[0][1],void 0));var Ab=H[O+5],gc=0<ua.length||""!==ia&&0<M.length,Bb=xb(P),ic=!(4!==Ab||!gc||!Bb),Hc=!!ia.match(/[qypjg]/g),Ic=fc||"",Jc=zb,Kc=Gc,Lc=ia,Mc=Hc,Nc=Oa,Oc=V,Pc=M,Qc=P,Rc=ic,Sc=Ab,Tc=x.R;a:{var va=void 0,bb=Z,jc=g.useZoom;yb[bb]||(va=bb.toString(2),8>va.length&&(va=Array(8-va.length+1).join("0")+va),yb[bb]=va);va=yb[bb];for(var kc=Cb[jc].start,Uc=Cb[jc].end-kc+1,cb=0;cb<Uc;cb++)if("1"===va[cb]){var lc=cb+kc;break a}lc=
99}var ba={type:"fixed",guid:Ic,pt:Jc,ptFix:Kc,name:Lc,containDescendings:Mc,rank:Nc,iconPos:null,textPos:null,styleId:Oc,styleText:Pc,icon:Qc,textOnIcon:Rc,direction:Sc,onDefaultFloor:Tc,startZoom:lc||99,tilePosStr:la+","+ma,tracer:Z,processedInZoom:g.useZoom,key:"fixed_"+Oa+"_"+zb.lng+"_"+zb.lat};if(null===P||ic)null!==P&&(ba.iconSize=Bb);else{var Db=xb(P);if(Db){var Eb=Db[0]/2*N,Fb=Db[1]/2*N,db=Math.round(-Eb/2),eb=Math.round(-Fb/2),Gb=db+Eb,Hb=eb+Fb;var mc={vertex:[db,eb,Gb,eb,Gb,Hb,db,eb,Gb,
Hb,db,Hb],texcoord:null,width:Eb,height:Fb,iconType:P}}else mc=null;ba.iconPos=mc;ba.iconPos&&(D=ba.iconPos.width,I=ba.iconPos.height)}if(ua.length){var Vc=ba,fb=Ab,Ib=ua,Jb=D,nc=I,gb=e,Pa=qb;"number"!==typeof fb&&(fb=0);for(var Da=Ib.length,oc=[],pc=[],Ea=0,Qa=0,ja=0;ja<Da;ja++)Qa+=Math.round(Ib[ja][3]/Pa);for(ja=0;ja<Da;ja++){var hb=Ib[ja],qc=hb[0],rc=hb[1],Fa=Math.round(hb[2]/Pa),ya=Math.round(hb[3]/Pa);0===Jb&&(fb=4);switch(fb){case 3:var na=Qa/2-ya+2*(Da-1)/2;var wa=Math.round(-Jb/2-Fa-2);var za=
Math.round(na-Ea-2*ja);break;case 1:na=Qa/2-ya+2*(Da-1)/2;wa=Math.round(Jb/2+2);za=Math.round(na-Ea-2*ja);break;case 2:na=nc/2+Qa-ya+2*Da;wa=Math.round(-Fa/2);za=Math.round(na-Ea-2*ja);break;case 0:na=-nc/2-2-ya;wa=Math.round(-Fa/2);za=Math.round(na-Ea-2*ja);break;case 4:na=-Qa/2-2*(Da-1)/2,wa=Math.round(-Fa/2),za=Math.round(na-Ea-2*ja)}Ea+=ya;var sc=wa+Math.round(Fa),tc=za,uc=sc,Kb=tc+Math.round(ya),Lb=qc/512,Mb=(gb-rc-ya*Pa)/gb,vc=(qc+Fa*Pa)/512,Wc=Mb,wc=vc,Nb=(gb-rc)/gb,Xc=Lb,Yc=Nb;oc.push(wa,
za,sc,tc,uc,Kb,wa,za,uc,Kb,wa,Kb);pc.push(Lb,Mb,vc,Wc,wc,Nb,Lb,Mb,wc,Nb,Xc,Yc)}Vc.textPos={vertex:oc,texcoord:pc}}if(ba.textPos||ba.iconPos){var Ra=1E3,Sa=1E3,Ta=-1E3,Ua=-1E3;if(ba.iconPos)for(var Ob=ba.iconPos.vertex,oa=0,Pb=Ob.length;oa<Pb;oa+=2){var pa=Ob[oa],qa=Ob[oa+1];pa<Ra&&(Ra=pa);pa>Ta&&(Ta=pa);qa<Sa&&(Sa=qa);qa>Ua&&(Ua=qa)}if(ba.textPos){var Qb=ba.textPos.vertex;oa=0;for(Pb=Qb.length;oa<Pb;oa+=2)pa=Qb[oa],qa=Qb[oa+1],pa<Ra&&(Ra=pa),pa>Ta&&(Ta=pa),qa<Sa&&(Sa=qa),qa>Ua&&(Ua=qa)}ba.bds=[Ra,
Sa,Ta,Ua]}(Bb||gc)&&w.push(ba)}}}}}}}return p}function xb(b){if(!b||"disekong"===b)return null;var a=Rb[b]||Rb["MapRes/"+b];!a&&b&&48<=b.charCodeAt(0)&&57>=b.charCodeAt(0)&&(a=Rb["_"+b]);return a}var Sb;
Sb=function(b,a,c,t){var f,p;a=Q(0,a[0],a[0]+a[1]);if(!a.length)return{};for(var k={},q=[],x=[],g=[],e=[],w=0;w<a.length;w++){var d=Q(0,a[w][0],a[w][0]+a[w][1]),u=d[0];u=Q(0,u[0],u[0]+u[1]);d=d[1];var v=Q(H[d[0]>>2]+1,d[0],d[0]+d[1]);a:{var l=b;if((f=Q(0,v[2][0],v[2][0]+v[2][1]))&&f[0]){for(var n=0;n<f.length;n++){var m=f[n],h=m[0]>>2;h=H[h];m=Q(h+1,m[0],m[0]+m[1]);if(!m[0][1]){l=[];f=[0,0];var E=p=void 0;break a}}p=[];var r=[0,0],A=[2.003772637E7,1.102819087E7];d=[-2.003772637E7,-1.060158079E7];
E=0;n=c.mercatorSize;var C=c.col*n,B=c.row*n;for(n=0;n<f.length;n++){m=f[n];h=m[0]>>2;h=H[h];m=Q(h+1,m[0],m[0]+m[1]);m=new Int32Array(l,m[0][0],m[0][1]>>2);h=[C+m[0]/100,B+m[1]/100];r[0]+=h[0];r[1]+=h[1];h[0]<A[0]&&(A[0]=h[0]);h[1]<A[1]&&(A[1]=h[1]);h[0]>d[0]&&(d[0]=h[0]);h[1]>d[1]&&(d[1]=h[1]);for(var z=2;z<m.length;z+=2)h[z]=h[z-2]+m[z]/100,h[z+1]=h[z-1]+m[z+1]/100,r[0]+=h[z],r[1]+=h[z+1],h[z]<A[0]&&(A[0]=h[z]),h[z+1]<A[1]&&(A[1]=h[z+1]),h[z]>d[0]&&(d[0]=h[z]),h[z+1]>d[1]&&(d[1]=h[z+1]);E+=m.length;
p.push(h)}r[0]/=E/2;r[1]/=E/2;l=p;f=r;p=A;E=d}else l=[],f=[0,0],E=p=void 0}A=Q(0,v[3][0],v[3][0]+v[3][1]);d=[];for(r=0;r<A.length;r++)d[r]=String.fromCharCode.apply(String,new Uint8Array(b,A[r][0],A[r][1]));C=String.fromCharCode.apply(String,new Uint8Array(b,v[1][0],v[1][1]));A=void 0;v=String.fromCharCode.apply(String,new Uint8Array(b,v[0][0],v[0][1]));for(r=0;r<d.length;r++)if(d[r]===C){A=r;break}l={defaultFloor:A,currentFloor:A,uid:v,floors:[],contour:l,boundsMin:p,boundsMax:E,center:f,floorLength:d.length};
for(r=0;r<d.length;r++){p=d[r];a:{f=b;E=u;C=p;for(n=0;n<E.length;n++)if(B=Q(H[E[n][0]>>2]+1,E[n][0],E[n][0]+E[n][1]),String.fromCharCode.apply(String,new Uint8Array(f,B[0][0],B[0][1]))===C){C=B[1];break a}C=null}f=b;B=v;m=p;p=c;var F=t;E=r===A?!0:!1;if(C)if(C=Q(0,C[0],C[0]+C[1]),C.length){n={base:[],contour:[]};for(var G=0;G<C.length;G++){h=C[G];z=h[0]>>2;var R=H[z+1];7===R&&(F=Tb(f,h,p,n.contour,F,1,{v:!0,M:!0}))}for(G=0;G<n.contour.length;G++)n.contour[G].uid=B;for(G=0;G<C.length;G++)h=C[G],z=h[0]>>
2,R=H[z+1],7===R&&(F=Tb(f,h,p,n.base,F,2,{v:!0}));for(G=0;G<n.base.length;G++)n.base[G].uid=B;(h=Ub(f,C,p,!0))&&0!==h.vertex.length&&(n.area3D=h,n.area3D.uid=B,n.area3D.border&&(n.indoorBorder3D=n.area3D.border,n.indoorBorder3D.uid=B,delete n.area3D.border));n.floorName=m;B=[];for(m=0;m<C.length;m++)h=C[m],z=h[0]>>2,R=H[z+1],R===ob&&(h=Q(H[z]+1,h[0],h[0]+h[1]),h.R=E,B.push(h));n.pois=pb(f,B,E?H[2]:H[3],p,Vb);f=n}else f={floorName:m};else f={floorName:m};l.floors[r]=f}k[v]=l;if(l.floors[A]){if(l.floors[A].base)for(r=
0;r<l.floors[A].base.length;r++)q.push(l.floors[A].base[r]);if(l.floors[A].contour)for(r=0;r<l.floors[A].contour.length;r++)x.push(l.floors[A].contour[r]);l.floors[A].indoorBorder3D&&g.push(l.floors[A].indoorBorder3D);l.floors[A].area3D&&e.push(l.floors[A].area3D)}k.tileInfo=c}0===q.length&&(q=null);0===x.length&&(x=null);0===g.length&&(g=null);0===e.length&&(e=null);return{indoorDataResult:k,indoorBase:q,indoorBaseContour:x,indoorArea3D:e,indoorBorder3D:g}};
var sb=function(){function b(b,t,c,f,g){if(f=f||null){g=f[2];switch(t){case "point":g=g[0];break;case "pointText":g=g[1];break;case "line":g=g[3];break;case "polygon":g=g[4];break;case "polygon3d":g=g[5]}var e=c-1;"line"===t&&12===c&&(e=c);e=f[1][e][0];e=e[b];e||"point"!==t&&"pointText"!==t||(e=f[1][c][0],e=e[b]);c={l:e,style:g,s:[]}}else if(g){f=g.baseFs;g=g.zoomStyleBody[c]||[];e=f[2];switch(t){case "point":e=e[0];g=g[0]||{};break;case "pointText":e=e[1];g=g[1]||{};break;case "line":e=e[3];g=g[3]||
{};break;case "polygon":e=e[4];g=g[4]||{};break;case "polygon3d":e=e[5],g=g[5]||{}}c={l:f[1][c-1][0][b],style:e,s:g}}else c={l:null,style:[],s:[]};g=c;c=g.l;f=g.style;g=g.s;e=[];if(!c)return e;for(var p=0;p<c.length;p++){var d=g[c[p]]||f[c[p]];if(d){switch(t){case "polygon":d={g:b,f:a(d[0]),c:a(d[1]),borderWidth:d[2],B:d[3],C:d[4],ua:d[5],da:d[6],ra:d[7],sa:a(d[8])};break;case "line":d={g:b,c:a(d[0]),f:a(d[1]),borderWidth:d[2],o:d[3],Z:d[4],G:d[5],ga:d[6],ha:d[7],ia:d[8],ka:d[9],la:d[10],B:d[11],
i:d[12],C:d[13],ba:d[14],ja:d[15],ea:d[16],ma:d[17],pa:d[18]};break;case "pointText":d=d&&0!==d.length?{sid:b,fontRgba:a(d[0]),haloRgba:a(d[1]),backRgba:a(d[2]),fontSize:d[3],haloSize:d[4],fontWeight:d[5],fontStyle:d[6],density:d[7]}:null;break;case "point":d={sid:b,rank:d[0],ta:d[1],icon:d[2],iconType:d[3],na:d[4],density:d[5],zoom:d[6]};break;case "polygon3d":d={g:b,filter:d[0],ratio:d[1],fa:d[2],borderWidth:d[3],c:a(d[4]),H:a(d[5]),m:a(d[6]),oa:d[7]}}d&&(d.$=c[p],e[e.length]=d)}}return e}function a(a){var b=
a;if(f[b])return f[b];a>>>=0;f[b]=[a&255,a>>8&255,a>>16&255,a>>24&255];return f[b]}var c={},t={},f={};return{b:function(a,f,q,x,g,e,w){if(60609!==f&&60604!==f&&60610!==f&&60611!==f&&60606!==f){a=(a||"default")+"-"+f+"-"+q+"-"+x;e&&(a+="-indoor");if(g)return t[a]||(t[a]=b(f,q,x,g)),t[a];c[a]||(c[a]=b(f,q,x,g,w));return c[a]}}}}();function Wb(b,a){if(b.fill)b.fill(a);else for(var c=0;c<b.length;c++)b[c]=a}
Uint8Array.prototype.slice||(Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}),Object.defineProperty(Uint16Array.prototype,"slice",{value:Array.prototype.slice}),Object.defineProperty(Uint32Array.prototype,"slice",{value:Array.prototype.slice}),Object.defineProperty(Int8Array.prototype,"slice",{value:Array.prototype.slice}),Object.defineProperty(Int16Array.prototype,"slice",{value:Array.prototype.slice}),Object.defineProperty(Int32Array.prototype,"slice",{value:Array.prototype.slice}),
Object.defineProperty(Float32Array.prototype,"slice",{value:Array.prototype.slice}));var rb,H,Xb;
function vb(b,a,c,t){b=new Uint8Array(b,a,c);if(self.TextDecoder)return Xb||(Xb=new TextDecoder("utf-8")),Xb.decode(b).replace(/\\\\/g,"\\");if("utf-8"===t)for(t="",a=0;a<b.length;a++)c=b[a],128>c?t+=String.fromCharCode(c):191<c&&224>c?(t+=String.fromCharCode((c&31)<<6|b[a+1]&63),a+=1):223<c&&240>c?(t+=String.fromCharCode((c&15)<<12|(b[a+1]&63)<<6|b[a+2]&63),a+=2):(c=((c&7)<<18|(b[a+1]&63)<<12|(b[a+2]&63)<<6|b[a+3]&63)-65536,t+=String.fromCharCode(c>>10|55296,c&1023|56320),a+=3);else{if(4096>=c)return String.fromCharCode.apply(String,
b);t="";var f=Math.ceil(c/4096);for(a=0;a<f;a++)t+=String.fromCharCode.apply(String,b.slice(4096*a,a===f-1?c:4096*(a+1)))}return t.replace(/\\\\/g,"\\")}function Q(b,a,c){var t=a>>2,f=H[t+b];a=4*(f+b+1)+a;var p=[];if(a>c)return p;for(c=0;c<f;c++){var k=H[t+b+1+c],q=a+k;p[c]=[a,k];0!==q%4?a=q+4-q%4:a=q}return p}
var ob=3,Yb=1E-5,Zb=1,ub=null,Vb=null,Rb=null,tb="",T=null,ha=new aa,$b=20,ac=65536,bc=[245,245,245,255],cc=1,hc=null,xc=null,Cb={3:{start:3,end:3,a:3},4:{start:4,end:5,a:5},5:{start:4,end:5,a:5},6:{start:6,end:7,a:7},7:{start:6,end:7,a:7},8:{start:8,end:9,a:9},9:{start:8,end:9,a:9},10:{start:10,end:10,a:10},11:{start:11,end:13,a:12},12:{start:11,end:13,a:12},13:{start:11,end:13,a:12},14:{start:14,end:15,a:15},15:{start:14,end:15,a:15},16:{start:16,end:17,a:17},17:{start:16,end:17,a:17},18:{start:18,
end:25,a:19},19:{start:18,end:25,a:19},20:{start:18,end:25,a:19},21:{start:18,end:25,a:19},22:{start:18,end:25,a:19},23:{start:18,end:25,a:19},24:{start:18,end:25,a:19},25:{start:18,end:25,a:19}},qb,yc,zc=!1,Ac=[],Bc=!1;function Cc(){Bc||(Bc=!0,mb(function(){zc=!0;if(Ac.length)for(var b=0;b<Ac.length;b++){var a=Ac[b];Dc(a.data,a.u,a.T)}Ac=[]}))}self.onmessage=function(b){b=b.data;var a=b.action,c=b.isText,t=b.isPoi;if(self[a])self[a](b);self.isText=c;self.isPoi=t};
var yb={0:"00000000",16:"00010000",32:"00100000",48:"00110000",64:"01000000",96:"01100000"};function wb(b,a){if(!yb[b]){var c=b.toString(2);8>c.length&&(c=Array(8-c.length+1).join("0")+c);yb[b]=c}c=yb[b];return"1"===c[a-Cb[a].start]}
function Dc(b,a,c){da("finishLoadTile");try{da("begin(ParseData)"),Ec(b,a,c,function(a){da("finishParseData");a.base=a.a;a.base3d=a.A;a.virtual=a.U;a.building3d=a.D;a.building3dMesh=a.F;a.indoorData=a.N;a.indoorBase=a.J;a.indoorBaseContour=a.K;a.indoorBorder3D=a.L;a.indoorArea3D=a.I;a.label=a.label;a.tileInfo=a.u;for(var b=[],c=0;c<a.base.length;c++){var k=a.base[c];b.push(k.data[0].buffer);b.push(k.data[1].buffer)}if(a.base3d)for(c=0;c<a.base3d.length;c++)k=a.base3d[c],"block"===k.type?(b.push(k.data.vertex.buffer),
b.push(k.data.index.buffer)):(b.push(k.data[0].buffer),b.push(k.data[1].buffer));if(a.virtual)for(c=0;c<a.virtual.length;c++)k=a.virtual[c],b.push(k.data[0].buffer),b.push(k.data[1].buffer);a.building3d&&(b.push(a.building3d.vertex.buffer),b.push(a.building3d.index.buffer));if(a.indoorBase)for(c=0;c<a.indoorBase.length;c++)k=a.indoorBase[c],b.push(k.data[0].buffer),b.push(k.data[1].buffer);if(a.indoorBaseContour)for(c=0;c<a.indoorBaseContour.length;c++)k=a.indoorBaseContour[c],b.push(k.data[0].buffer),
b.push(k.data[1].buffer);if(a.indoorBorder3D&&a.indoorBorder3D&&0<a.indoorBorder3D.length)for(c=0;c<a.indoorBorder3D.length;c++)b.push(a.indoorBorder3D[c].data[0].buffer),b.push(a.indoorBorder3D[c].data[1].buffer);if(a.indoorArea3D&&0<a.indoorArea3D.length)for(c=0;c<a.indoorArea3D.length;c++)b.push(a.indoorArea3D[c].vertex.buffer),b.push(a.indoorArea3D[c].index.buffer);a.label&&(a.label.textImageBitmap&&b.push(a.label.textImageBitmap),a.label.indoorTextImageBitmap&&b.push(a.label.indoorTextImageBitmap));
a.perfStat=[ka("beginLoadTile","finishLoadTile"),ka("finishLoadTile","beginParseData"),ka("beginParseData","finishParseData"),yc];a.endTime=Date.now();postMessage(a,b)})}catch(t){postMessage({tileInfo:a,tileKey:c,error:"parse_error",message:t.message})}}
self.loadTileData=function(b){var a=b.url,c={};c.baseTileSize=b.tileInfo.baseTileSize;c.col=b.tileInfo.col;c.loopOffsetX=b.tileInfo.loopOffsetX;c.mercatorSize=b.tileInfo.mercatorSize;c.row=b.tileInfo.row;c.tileSize=b.tileInfo.tileSize;c.tileTypeName=b.tileInfo.tileTypeName;c.useZoom=b.tileInfo.useZoom;c.zoom=b.tileInfo.zoom;c.processedLabelZooms=b.tileInfo.processedLabelZooms;var t=b.tileKey;b.featureStyle&&(ub=JSON.parse(b.featureStyle),T=null);b.indoorStyle&&(Vb=JSON.parse(b.indoorStyle));b.iconSetInfo&&
(Rb=JSON.parse(b.iconSetInfo));b.iconInfo&&(qb=b.iconInfo.textSizeRatio);b.mapStyleId&&(tb=b.mapStyleId);b.customMapStyle&&(T=JSON.parse(b.customMapStyle),ub=null);c.style=tb;hc=xc=null;yc=0;var f=new XMLHttpRequest;f.open("GET",a,!0);f.responseType="arraybuffer";f.timeout=1E4;f.ontimeout=function(){postMessage({tileInfo:c,tileKey:t,error:"net_timeout",message:"net status: timeout"})};f.onreadystatechange=function(){4===this.readyState&&(200===this.status&&(yc=Math.round(f.response.byteLength/1024),
zc?Dc(f.response,c,t):Ac[Ac.length]={data:f.response,u:c,T:t}),(400<=this.status||0===this.status)&&postMessage({tileInfo:c,tileKey:t,error:"net_error",message:"net status: "+this.status}))};f.send();Cc();da("beginLoadTile")};
function Ec(b,a,c,t){var f=[],p=[],k=[],q=0,x=a.useZoom,g=null,e=null;H=new Uint32Array(b);rb=new Int32Array(b);cc=H[0];for(var w=Q(H[1]+2,0,b.byteLength),d=Q(0,w[0][0],w[0][0]+w[0][1]),u,v=!1,l=0;l<d.length;l++){g=d[l];var n=g[0]>>2,m=H[n+1];if(7===m){v=!0;break}}!1===v&&(q=Tb(null,null,a,f,q,0));for(l=0;l<d.length;l++)g=d[l],n=g[0]>>2,m=H[n+1],v=H[n+2],7===m?q=Tb(b,g,a,f,q,0):4===m?13E3===v||83500===v?Fc(b,g,x,k,0):q=Fc(b,g,x,f,q):15===m?(u=q,q=Tb(b,g,a,p,q,1,{O:!0})):16===m?q=Fc(b,g,x,p,q,!0):
18===m?T&&T.zoomFrontStyle&&T.zoomFrontStyle[x]&&"off"===T.zoomFrontStyle[x].bmapRoadarrowVisibility||(q=Zc(b,g,x,p,q)):19===m?q=$c(b,g,x,f,q):20===m&&(q=ad(b,g,x,p,q));(l=bd(d,a))&&p.push({type:"block",data:l,has3D:!0,has2D:!1});g=Ub(b,d,a);l=cd(b,d,a);0<l&&(e={vertex:new Float32Array(7*l),index:new Uint16Array(l/3)},cd(b,d,a,e.vertex,e.index));l={S:vb(b,w[3][0],w[3][1],void 0)||"",height:H[2]||0};var h=nb(b,d,w[2],l,a)||{};h.textImgStr=l.S||null;w[4][1]&&H[3]?(h.indoorTextImgStr=vb(b,w[4][0],w[4][1],
void 0)||null,h.indoorTextureHeight=H[3]):h.indoorTextImgStr=null;b=Sb(b,w[1],a,u?u:q);h.indoorLabel=[];if(b.indoorDataResult)for(var E in b.indoorDataResult)if("tileInfo"!==E)for(q=b.indoorDataResult[E],w=q.defaultFloor,b.indoorDataResult[E].tileKey=c,l=0;l<q.floors.length;l++)w===l&&q.floors[l].pois&&(h.indoorLabel=h.indoorLabel.concat(q.floors[l].pois));H=rb=null;f.length&&(f=dd(f));var r={a:f,A:p.length?p:null,U:k.length?k:null,D:g,F:e,N:b.indoorDataResult,J:b.indoorBase,K:b.indoorBaseContour,
L:b.indoorBorder3D,I:b.indoorArea3D,label:h,u:a};if((h.textImgStr||h.indoorTextImgStr)&&self.fetch&&self.createImageBitmap&&self.Promise){var A=function(){t(r)},C=0;h.textImgStr&&(C++,fetch(h.textImgStr).then(function(a){a.blob().then(function(a){createImageBitmap(a,{imageOrientation:"flipY"}).then(function(a){h.textImageBitmap=a;h.textImgStr=null;C--;0===C&&t(r)},A)},A)},A));h.indoorTextImgStr&&(C++,fetch(h.indoorTextImgStr).then(function(a){a.blob().then(function(a){createImageBitmap(a,{imageOrientation:"flipY"}).then(function(a){h.indoorTextImageBitmap=
a;h.indoorTextImgStr=null;C--;0===C&&t(r)},A)},A)},A))}else t(r)}function dd(b){for(var a=void 0,c=0,t=0,f=!1,p=0;p<b.length;p++)"fill"!==b[p].type?a=void 0:b[p].type===a?(b[c]=ed(b[c],b[p],t),b[p].P=!0,t+=b[p].h,f=!0):(c=p,a=b[p].type,t=b[p].h);return f?b.filter(function(a){return!a.P}):b}function ed(b,a,c){var t=b.data[1],f=a.data[1];b.data[0]=fd(b.data[0],a.data[0]);b.data[1]=fd(t,f,c);b.has3D=b.has3D||a.has3D;b.has2D=b.has2D||a.has2D;return b}
function fd(b,a,c){if(b.constructor===ArrayBuffer){var t=new Uint8Array(b.byteLength+a.byteLength);t.set(new Uint8Array(b),0);t.set(new Uint8Array(a),b.byteLength);return t.buffer}t=new b.constructor(b.length+a.length);t.set(b,0);if(c)for(var f=0;f<a.length;f++)a[f]+=c;t.set(a,b.length);return t}
function Tb(b,a,c,t,f,p,k){var q=[];b&&(q=a?a[0]>>2:0,q=H[q],q=Q(q+1,a[0],a[0]+a[1]));a=0;var x=c.baseTileSize;c=c.useZoom;var g=[],e=[],w=[],d=[];k=k||{};var u=k.v||!1,v=k.O||!1;k=k.M||!1;if(!v&&0===f){e=bc;if(T&&T.bmapLandColor){e=T.bmapLandColor.replace("#","");3===e.length?e+="f":6===e.length&&(e+="ff");w=[];d=e.length;g=8===d?2:1;for(var l=0;l<d;l+=g)2===g?w.push(parseInt(e.slice(l,l+2),16)):w.push(parseInt(e.slice(l,l+1)+e.slice(l,l+1),16));e=w}g=[0,0,0,e[0],e[1],e[2],e[3],0,x,0,0,e[0],e[1],
e[2],e[3],0,x,x,0,e[0],e[1],e[2],e[3],0,0,x,0,e[0],e[1],e[2],e[3],0];e=[0,1,2,0,2,3];w=[72];d=[20]}1===p?(f++,a=f,f+=5):2===p&&(a=f+3*q.length+1);l=[];for(var n=[],m=!1,h=!1,E=0;E<q.length;E++){var r=q[E],A=r[0]>>2,C=H[A];A=H[A+1];var B=sb.b(tb,A,"polygon",c,u?Vb:ub,u,T);if(B&&B.length){B=B[0];if(B.g){if(6<c&&(71013===B.g||71012===B.g||71011===B.g))continue;if(5<c&&71011===B.g)continue;if(5>c&&(71012===B.g||71013===B.g))continue}var z=B.f[0],F=B.f[1],G=B.f[2],R=B.f[3],V=B.c[0],K=B.c[1],M=B.c[2],W=
B.c[3],Y=B.borderWidth/4,X=2.5*Y;r=Q(C+1,r[0],r[0]+r[1]);f+=3;for(C=0;C<r.length;C++){var O=r[C],J=O[0]>>2,L=H[J];if(wb(H[J+1],c)){var U=Q(L+1,O[0],O[0]+O[1]);O=new Int32Array(b,U[0][0],U[0][1]>>2);if(O.length&&!(4E3<O.length)){var P=new Uint16Array(b,U[2][0],U[2][1]>>1);!0!==k&&P&&g.length/8+O.length/2>ac&&(g=gd(g),t.push({type:"fill",data:[g,new Uint16Array(e)],h:g.byteLength/$b,has3D:m,has2D:h,verticesLength:d,styleIds:w}),g=[],e=[],w=[],d=[],h=m=!1);L=null;var N=!1;if(v){var D=1<cc?new Int16Array(b,
U[1][0],U[1][1]>>1):new Uint16Array(b,U[1][0],U[1][1]>>1);if(1===D.length&&D[0])L=Array(O.length>>1),0>D[0]&&(N=!0),Wb(L,D[0]),m=!0;else if(1<D.length){L=[];for(var I=0;I<D.length;I++)0>D[I]&&(N=!0),L[I]=D[I]||Zb;m=!0}else h=!0}I=g.length/8;D=Za(O);J=H[J+2];k&&1===J&&(Y=X);if(!0!==k&&P){J=e;for(var Z=0;Z<P.length;Z++)J[J.length]=P[Z]+I;I=0;for(P=D.length/2;I<P;I++)J=L?L[I]:0,g.push(D[2*I],D[2*I+1],J,z,F,G,R,f);w.push(A);d.push(g.length/1.6)}if(L&&!N)for(l.length/8+D.length/2*2>ac&&(l=gd(l),n=new Uint16Array(n),
t.push({type:"fill",data:[l,n],h:l.byteLength/$b,has3D:m,has2D:h}),n=[],l=[]),N=l.length/8,I=0;I<D.length;I+=2){J=L[I/2];P=J-280;0>P&&(P=0);l.push(D[I],D[I+1],J,V,K,M,W,f,D[I],D[I+1],P,V,K,M,W,f);J=D[I];P=D[I+1];Z=I===D.length-2?D[1]:D[I+3];var ea=!1;if(J===(I===D.length-2?D[0]:D[I+2])){if(Math.abs(J)<Yb||Math.abs(J-x)<Yb)ea=!0}else P===Z&&(Math.abs(P)<Yb||Math.abs(P-x)<Yb)&&(ea=!0);ea||(I===D.length-2?n.push(N+I,N+I+1,N,N,N+I+1,N+1):n.push(N+I,N+I+1,N+I+2,N+I+2,N+I+1,N+I+3))}if(p&&B.borderWidth&&
D.length){if(D[0]-D[D.length-2]>Yb||D[1]-D[D.length-1]>Yb)D[D.length]=D[0],D[D.length]=D[1],L&&(L[L.length]=L[0]);if(U[3])for(U=Q(0,U[3][0],U[3][0]+U[3][1]),D=0;D<U.length;D++)N=U[D],J=Q(0,N[0],N[0]+N[1]),N=new Int16Array(b,J[0][0],J[0][1]>>1),jb()+N.length/2>ac&&(t.push({type:"line",data:[ab(),ib()],has3D:m,has2D:h}),lb()),I=new Uint16Array(b,J[1][0],J[1][1]>>1),J=new Int8Array(b,J[2][0],J[2][1]),kb(N,[V,K,M,W],Y,L,a,!1,O,J,0,I[0],I[1])}}}}}}l.length&&(l=gd(l),n=new Uint16Array(n),t.push({type:"fill",
data:[l,n],h:l.byteLength/$b,has3D:m,has2D:h}));g.length&&(g=gd(g),t.push({type:"fill",data:[g,new Uint16Array(e)],h:g.byteLength/$b,has3D:m,has2D:h,verticesLength:d,styleIds:w}));p&&(t.push({type:"line",data:[ab(),ib()],has3D:m,has2D:h}),lb());return Math.max(f,a)}
function Fc(b,a,c,t,f,p){a=Q(H[a[0]>>2]+1,a[0],a[0]+a[1]);for(var k=!1,q=!1,x=[],g=[],e=0;2>e;e++){0===e&&f++;for(var w=0;w<a.length;w++){var d=a[w],u=d[0]>>2,v=H[u],l=H[u+1];if((u=sb.b(tb,l,"line",c,ub,!1,T))&&u.length&&(71059!==l||self.isText)&&(0!==e||u[0].borderWidth)&&(d=Q(v+1,d[0],d[0]+d[1]),0!==e||!u[0].i))if(1===e&&u[0].i){var n=u[0].i;v=n;var m=Rb[v]||Rb["MapRes/"+v];if(m){m=[m[0],m[1]];jb()&&(t[t.length]={type:"line",data:[ab(),ib()],has3D:k,has2D:q,styleIds:x,verticesLength:g},lb(),q=k=
!1,g=[],x=[]);/guojietianqiaojieti/.test(n)?f+=20:f++;var h=u[0].o/4,E=p?!0:!1,r=!1;/\b(32|16|8|4)$/.test(v)&&(h*=5,m[1]*=2,r=E=!0,n=n.replace(/\b4$/,"8"));var A=!1,C=!1;for(v=0;v<d.length;v++){var B=d[v],z=B[0]>>2,F=H[z];z=H[z+1];if(wb(z,c)&&(z=Q(F+1,B[0],B[0]+B[1]),B=null,F=new Int32Array(b,z[0][0],z[0][1]>>2),F.length&&!(8E3<F.length))){if(r&&4===F.length){var G=F,R=G[2],V=G[3],K=Math.sqrt(R*R+V*V);K=800*~~(K/800)/K;G[2]=~~(R*K);G[3]=~~(V*K)}if(p){var M=1<cc?new Int16Array(b,z[1][0],z[1][1]>>1):
new Uint16Array(b,z[1][0],z[1][1]>>1);if(1===M.length&&M[0])B=Array(F.length>>1),Wb(B,M[0]),A=!0;else if(1<M.length){B=[];for(A=0;A<M.length;A++)B[A]=M[A]||Zb;A=!0}else C=!0}G=new Int16Array(b,z[2][0],z[2][1]>>1);R=new Int8Array(b,z[3][0],z[3][1]);kb(G,u[0].f,h,B,f,!0,F,R,1);x.push(l);g.push(5*jb())}}jb()&&(t[t.length]={type:"line",textureSize:m,texture:n+".png",lineWidth:u[0].o/2,data:[ab(),ib()],has3D:A,has2D:C,zoomWithMap:E,styleIds:x,verticesLength:g},x=[],g=[],lb())}}else if(0===e?(l=u[0].c,
n=u[0].borderWidth):(l=u[0].f,n=u[0].o),n/=4,!(0===n||0===l[3]||100<n))for(1===e&&f++,v=0;v<d.length;v++)if(B=d[v],z=B[0]>>2,F=H[z],z=H[z+1],wb(z,c)&&(z=Q(F+1,B[0],B[0]+B[1]),F=new Int32Array(b,z[0][0],z[0][1]>>2),F.length&&!(8E3<F.length))){G=new Int16Array(b,z[2][0],z[2][1]>>1);R=new Int8Array(b,z[3][0],z[3][1]);jb()+G.length/2>ac&&(t[t.length]={type:"line",data:[ab(),ib()],has3D:k,has2D:q},q=k=!1,lb());B=null;if(p)if(1<cc?M=new Int16Array(b,z[1][0],z[1][1]>>1):M=new Uint16Array(b,z[1][0],z[1][1]>>
1),1===M.length&&M[0])B=Array(F.length>>1),Wb(B,M[0]),k=!0;else if(1<M.length){B=[];for(k=0;k<M.length;k++)B[k]=M[k]||Zb;k=!0}else q=!0;kb(G,l,n,B,f,1===u[0].G,F,R,0)}}}jb()&&(t[t.length]={type:"line",data:[ab(),ib()],has3D:k,has2D:q,styleIds:x,verticesLength:g},lb());return f}
function ad(b,a,c,t,f){var p=Q(H[a[0]>>2]+1,a[0],a[0]+a[1]),k=[];a=[];for(var q=!1,x=!1,g=0;g<p.length;g++){var e=p[g];e=Q(H[e[0]>>2]+1,e[0],e[0]+e[1])[0];var w=e[0]>>2,d=H[w];if(wb(H[w+1],c)){var u=Q(d+1,e[0],e[0]+e[1]);e=new Int32Array(b,u[0][0],u[0][1]>>2);e=Za(e);d=1<cc?new Int16Array(b,u[3][0],u[3][1]>>1):new Uint16Array(b,u[3][0],u[3][1]>>1);w=void 0;if(1===d.length&&d[0])w=Array(e.length>>1),Wb(w,d[0]),q=!0;else if(1<d.length){w=[];for(var v=0;v<d.length;v++)w[v]=d[v]||1;q=!0}else x=!0;d=new Uint32Array(b,
u[2][0],u[2][1]>>2);v=k.length/8;f+=8;var l=sb.b(tb,d[0],"polygon",c,ub,!1,T),n=sb.b(tb,d[1],"polygon",c,ub,!1,T);if(l&&n){var m=new Int32Array(b,u[1][0],u[1][1]>>2);d=[m[0]/100,m[1]/100];l=l[0].f;m=[m[2]/100,m[3]/100];n=n[0].f;var h=[m[0]-d[0],m[1]-d[1]],E=Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2)),r=a;u=new Uint16Array(b,u[4][0],u[4][1]>>1);for(var A=0;A<u.length;A++)r[r.length]=u[A]+v;v=0;for(u=e.length/2;v<u;v++){r=[e[2*v],e[2*v+1]];if(0===h[0]){A=d[0];var C=r[1]}else C=-((d[0]-r[0])*h[0]+(d[1]-
r[1])*h[1])/(h[0]*h[0]+h[1]*h[1]),A=C*h[0]+d[0],C=C*h[1]+d[1];C=Math.sqrt(Math.pow(A-m[0],2)+Math.pow(C-m[1],2))/E;if(d[0]<m[0]&&A<d[0]||d[0]>m[0]&&A>d[0])C=1;else if(d[0]<m[0]&&A>m[0]||d[0]>m[0]&&A<m[0])C=0;k.push(r[0],r[1],w?w[v]:0,C*l[0]+(1-C)*n[0],C*l[1]+(1-C)*n[1],C*l[2]+(1-C)*n[2],C*l[3]+(1-C)*n[3],f)}}}}k.length&&(b=gd(k),t.push({type:"fill",data:[b,new Uint16Array(a)],h:b.byteLength/$b,has3D:q,has2D:x}));return f}
function Zc(b,a,c,t,f){var p=Q(H[a[0]>>2]+1,a[0],a[0]+a[1]);if(!p.length)return f;a=[];var k=[];f++;var q=Za(new Int32Array(b,p[0][0],p[0][1]>>2)),x=new Int32Array(b,p[1][0],p[1][1]>>2);b=new Int16Array(b,p[2][0],p[2][1]>>1);var g=p=!1;1===b.length&&0===b[0]?g=!0:p=!0;b=Za(b,1);if(1===b.length){var e=b[0];b=Array(q.length>>1);Wb(b,e)}for(e=0;e<x.length;e++)if(wb(x[e],c)){var w=[q[4*e],q[4*e+1],b[2*e]],d=[q[4*e+2],q[4*e+3],b[2*e+1]],u=[(w[0]+d[0])/2,(w[1]+d[1])/2,(w[2]+d[2])/2],v=u[0]-w[0],l=u[1]-
w[1],n=[d[0]-w[0],d[1]-w[1]],m=n[0]*n[0]+n[1]*n[1];0<m&&(m=1/Math.sqrt(m),n[0]*=m,n[1]*=m);m=a.length/10;a[a.length]=u[0];a[a.length]=u[1];a[a.length]=w[2];a[a.length]=-v;a[a.length]=-l;a[a.length]=-n[1];a[a.length]=n[0];a[a.length]=.125;a[a.length]=.3125;a[a.length]=f;a[a.length]=u[0];a[a.length]=u[1];a[a.length]=w[2];a[a.length]=-v;a[a.length]=-l;a[a.length]=n[1];a[a.length]=-n[0];a[a.length]=.125;a[a.length]=.6875;a[a.length]=f;a[a.length]=u[0];a[a.length]=u[1];a[a.length]=d[2];a[a.length]=v;a[a.length]=
l;a[a.length]=-n[1];a[a.length]=n[0];a[a.length]=1;a[a.length]=.3125;a[a.length]=f;a[a.length]=u[0];a[a.length]=u[1];a[a.length]=d[2];a[a.length]=v;a[a.length]=l;a[a.length]=n[1];a[a.length]=-n[0];a[a.length]=1;a[a.length]=.6875;a[a.length]=f;k[k.length]=m;k[k.length]=m+1;k[k.length]=m+2;k[k.length]=m+2;k[k.length]=m+1;k[k.length]=m+3}k.length&&t.push({type:"arrow",data:[new Float32Array(a),new Uint16Array(k)],has3D:p,has2D:g});return f}
function $c(b,a,c,t,f){a=Q(H[a[0]>>2]+1,a[0],a[0]+a[1]);f++;for(var p=0;p<a.length;p++){var k=a[p],q=k[0]>>2,x=H[q];if((q=sb.b(tb,H[q+1],"line",c,ub,!1,T))&&q.length){var g=q[0];if("undefined"!==typeof g.i){g=g.i+".png";k=Q(x+1,k[0],k[0]+k[1]);for(x=0;x<k.length;x++){var e=k[x],w=e[0]>>2,d=H[w];wb(H[w+1],c)&&(w=H[w+2]/20,e=Q(d+1,e[0],e[0]+e[1]),kb(new Int16Array(b,e[2][0],e[2][1]>>1),q[0].f,w,null,f,!0,new Int32Array(b,e[0][0],e[0][1]>>2),new Int8Array(b,e[3][0],e[3][1]),2))}t[t.length]={type:"line",
texture:g,isSingle:!0,data:[ab(),ib()]};lb()}}}return f}
function Ub(b,a,c,t){var f=c.useZoom;if(!a||!a.length)return null;c=[];for(var p=[],k=0;k<a.length;k++){var q=a[k],x=q[0]>>2,g=H[x];if(8===H[x+1])for(q=Q(g+1,q[0],q[0]+q[1]),x=0;x<q.length;x++){var e=q[x];g=e[0]>>2;var w=H[g];g=H[g+1];var d=sb.b(tb,g,"polygon3d",f,t?Vb:ub,!1,T);if(d&&d[0]){d=d[0];var u=d.H,v=d.m;if(T){if(T.buildingFill){v=void 0;var l=u[0]/255,n=u[1]/255,m=u[2]/255,h=Math.max(l,n,m),E=h-Math.min(l,n,m);for(0===E?v=0:h===l?v=(n-m)/E%6*60:h===n?v=60*((m-l)/E+2):h===m&&(v=60*((l-n)/
E+4));0>v;)v+=360;var r=[v,0===h?0:E/h,h];r[2]+=.05;0>r[2]&&(r[2]=0);n=l=v=void 0;m=r[2]*r[1];h=m*(1-Math.abs(r[0]/60%2-1));E=r[2]-m;r=r[0];0<=r&&60>r?(n=m,l=h,v=0):60<=r&&120>r?(n=h,l=m,v=0):120<=r&&180>r?(n=0,l=m,v=h):180<=r&&240>r?(n=0,l=h,v=m):240<=r&&300>r?(n=h,l=0,v=m):300<=r&&360>r&&(n=m,l=0,v=h);v=[Math.round(255<255*(n+E)?255:255*(n+E)),Math.round(255<255*(l+E)?255:255*(l+E)),Math.round(255<255*(v+E)?255:255*(v+E))];v[3]=u[3]||255}hc||(hc=u,xc=v)}e=Q(w+1,e[0],e[0]+e[1]);w=0;if(d.borderWidth){var A=
d.c[0],C=d.c[1],B=d.c[2],z=d.c[3];w=d.borderWidth/4}for(l=0;l<e.length;l++)if(n=e[l],m=n[0]>>2,h=H[m],wb(H[m+1],f)&&(m=H[m+2],!(m<d.filter))){h=Q(h+1,n[0],n[0]+n[1]);n=new Int32Array(b,h[0][0],h[0][1]>>2);r=new Uint16Array(b,h[1][0],h[1][1]>>1);E=n;var F=m,G=u[0],R=u[1],V=u[2],K=u[3],M=v[0],W=v[1],Y=v[2],X=v[3],O=E;Ma||(Ma=y._get_block_points_address()>>2);Aa.set(O,Ma);O=r;Va||(Va=y._get_block_triangle_indices_address()>>1);Ca.set(O,Va);y._append_block_data(E.length,r.length,F,G,R,V,K,M,W,Y,X);c.push(g);
p.push(7*$a());if(d.borderWidth&&n.length&&(E=Array(n.length>>1),Wb(E,100*m),h[2]))for(m=Q(0,h[2][0],h[2][0]+h[2][1]),h=0;h<m.length;h++)r=m[h],G=Q(0,r[0],r[0]+r[1]),r=new Int16Array(b,G[0][0],G[0][1]>>1),F=new Uint16Array(b,G[1][0],G[1][1]>>1),G=new Int8Array(b,G[2][0],G[2][1]),kb(r,[A,C,B,z],w,E,2,!0,n,G,0,F[0],F[1])}}}}b={type:"line",data:[ab(),ib()]};lb();return 0<$a()?(Xa||(Xa=y._get_block_vertex_start()),a=new Float32Array(ra.slice(Xa,y._get_block_vertex_end())),Wa||(Wa=y._get_block_index_start()),
t=new Uint16Array(ra.slice(Wa,y._get_block_index_end())),c={vertex:a,index:t,styleIds:c,verticesLength:p},y._reset_block(),c.border=b,c):null}function gd(b){var a=new ArrayBuffer(b.length/8*20),c=new Float32Array(a);a=new Uint8Array(a);for(var t=0,f=12,p=4,k=0;k<b.length;k+=8)c[t]=b[k],c[t+1]=b[k+1],c[t+2]=b[k+2]/100,a[f]=b[k+3],a[f+1]=b[k+4],a[f+2]=b[k+5],a[f+3]=b[k+6],c[p]=b[k+7],t+=5,f+=20,p+=5;return c}
function cd(b,a,c,t,f){if(!a||!a.length)return 0;c=c.useZoom;for(var p=0,k=0,q=0,x=0,g=0;g<a.length;g++){var e=a[g],w=e[0]>>2;if(25===H[w+1]){e=Q(H[w]+1,e[0],e[0]+e[1])[0];var d=e[0]>>2;w=H[d];if((d=sb.b(tb,H[d+1],"polygon3d",c,ub,!1,T))&&d[0]){d=d[0];var u=d.m;xc&&(u=xc);e=Q(w+1,e[0],e[0]+e[1])[0];w=Q(H[e[0]>>2]+1,e[0],e[0]+e[1]);e=new Int32Array(b,w[1][0],w[1][1]>>2);p+=e.length;if(t){d=new Int32Array(b,w[2][0],w[2][1]>>2);w=e;for(var v=t,l=x,n=new DataView(v.buffer),m,h=0;h<w.length;h+=3)m=h/3*
7+l,v[m]=w[h]/100,v[m+1]=w[h+1]/100,v[m+2]=w[h+2]/100,v[m+3]=d[h],v[m+4]=d[h+1],v[m+5]=d[h+2],n.setUint8(4*m+24,u[0]),n.setUint8(4*m+25,u[1]),n.setUint8(4*m+26,u[2]),n.setUint8(4*m+27,u[3]);w=[];for(d=0;d<e.length/3;d++)w.push(d+k);f.set(w,q);x+=e.length/3*7;q+=w.length;k+=e.length/3}}}}return p}
function bd(b,a){var c=[],t=[];a=a.useZoom;for(var f=0;f<b.length;f++){var p=b[f],k=p[0]>>2;if(24===H[k+1]){k=Q(H[k]+1,p[0],p[0]+p[1])[0];p=k[0]>>2;var q=H[p];if((p=sb.b(tb,H[p+1],"polygon3d",a,ub,!1,T))&&p[0])for(p=p[0],p=p.m,xc&&(p=xc),k=Q(q+1,k[0],k[0]+k[1]),q=0;q<k.length;q++){var x=k[q][0]/4,g=c,e=t,w=c.length/10,d=H[x+1]/100,u=H[x+2]/100,v=H[x+3]/100,l=H[x+4]/100,n=p[0],m=p[1],h=p[2];for(x=0;360>=x;x+=36){var E=Math.cos(x*Math.PI/180)*u+v,r=Math.sin(x*Math.PI/180)*u+l,A=E+v,C=r+l;g.push(E,r,
0,A,C,0,n,m,h,255);g.push(E,r,d,A,C,0,n,m,h,255)}for(x=0;10>x;x++)g=2*x+w,e.push(g,g+2,g+3),e.push(g,g+3,g+1)}}}if(0<c.length){b=c.length/10;a=new Float32Array(7*b);f=new DataView(a.buffer);for(k=0;k<b;k++)p=7*k,a[p]=c[10*k],a[p+1]=c[10*k+1],a[p+2]=c[10*k+2],a[p+3]=c[10*k+3],a[p+4]=c[10*k+4],a[p+5]=c[10*k+5],f.setUint8(4*p+24,c[10*k+6]),f.setUint8(4*p+25,c[10*k+7]),f.setUint8(4*p+26,c[10*k+8]),f.setUint8(4*p+27,c[10*k+9]);c={vertex:a,index:new Uint16Array(t)}}else c=null;return c};